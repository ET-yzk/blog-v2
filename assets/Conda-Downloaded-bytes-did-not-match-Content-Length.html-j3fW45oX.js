import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as d,c as r,a,b as n,d as s,f as t}from"./app-HHaGRXeI.js";const i={},l=t(`<h1 id="conda-downloaded-bytes-did-not-match-content-length" tabindex="-1"><a class="header-anchor" href="#conda-downloaded-bytes-did-not-match-content-length" aria-hidden="true">#</a> Conda - Downloaded bytes did not match Content-Length</h1><h2 id="问题描述" tabindex="-1"><a class="header-anchor" href="#问题描述" aria-hidden="true">#</a> 问题描述</h2><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>CondaError: Downloaded bytes did not match Content-Length
  url: https://repo.anaconda.com/pkgs/main/linux-64/cudnn-7.0.5-cuda8.0_0.tar.bz2
  target_path: /home/yyf/miniconda3/pkgs/cudnn-7.0.5-cuda8.0_0.tar.bz2
  Content-Length: <span class="token number">261398285</span>
  downloaded bytes: <span class="token number">47463195</span>
</code></pre></div><p>如上所示，在用conda安装包的时候下载包的长度不够导致安装包不成功。原因一般是在下载的时候速度较慢，导致下载timeout而终止。解决办法如下。</p><hr><h2 id="解决方案一-【推荐】" tabindex="-1"><a class="header-anchor" href="#解决方案一-【推荐】" aria-hidden="true">#</a> 解决方案一 【推荐】</h2>`,6),p={href:"https://blog.csdn.net/feifei3211/article/details/90045560",target:"_blank",rel:"noopener noreferrer"},h={href:"https://mirror.tuna.tsinghua.edu.cn/help/anaconda/",target:"_blank",rel:"noopener noreferrer"},u=t(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 先添加清华源</span>
conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/
conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro/
<span class="token comment"># [!] 下列源可能存在问题</span>
conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/

<span class="token comment"># 然后运行安装命令</span>
conda <span class="token function">install</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[ ! ] 注意，若报 “conda.core.subdir_data.Response304ContentUnchanged”</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 移除conda-forge</span>
conda config <span class="token parameter variable">--remove</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge
</code></pre></div><p>详见 https://github.com/conda/conda/issues/8051</p><hr><h2 id="解决方案二" tabindex="-1"><a class="header-anchor" href="#解决方案二" aria-hidden="true">#</a> 解决方案二</h2><p>设置conda下载的 timeout，然后再进行尝试，如果时长不够可以再设置大一点。</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 设置timeout</span>
conda config <span class="token parameter variable">--set</span> remote_read_timeout_secs <span class="token number">600.0</span>

<span class="token comment"># 然后运行安装命令</span>
conda <span class="token function">install</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span>
</code></pre></div><hr><h2 id="解决方案三" tabindex="-1"><a class="header-anchor" href="#解决方案三" aria-hidden="true">#</a> 解决方案三</h2><p>从conda的源下载好要安装的包，直接采用本地安装的方式。下载的url再出错的地方有提示：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>url: https://repo.anaconda.com/pkgs/main/<span class="token punctuation">[</span>system-version<span class="token punctuation">]</span>/<span class="token punctuation">[</span>package<span class="token punctuation">]</span>
conda <span class="token function">install</span> <span class="token parameter variable">--offline</span> <span class="token punctuation">[</span>download_postion<span class="token punctuation">]</span>/<span class="token punctuation">[</span>package<span class="token punctuation">]</span>
</code></pre></div><hr><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2>`,14),m={href:"https://stackoverflow.com/questions/42797957/changing-timeout-limit-when-using-conda-install",target:"_blank",rel:"noopener noreferrer"},g={href:"https://stackoverflow.com/questions/34316951/install-anaconda-library-from-a-local-source",target:"_blank",rel:"noopener noreferrer"};function b(k,v){const e=c("ExternalLinkIcon");return d(),r("div",null,[l,a("p",null,[n("设置额外的源，直接从速度快的源进行下载。详见"),a("a",p,[n("conda源的使用"),s(e)]),n("和"),a("a",h,[n("清华源的添加方式"),s(e)]),n("。")]),u,a("p",null,[a("a",m,[n("stackoverflow 1"),s(e)])]),a("p",null,[a("a",g,[n("stackoverflow 2"),s(e)])])])}const x=o(i,[["render",b],["__file","Conda-Downloaded-bytes-did-not-match-Content-Length.html.vue"]]);export{x as default};

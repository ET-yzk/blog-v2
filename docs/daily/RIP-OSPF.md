---
icon: b fa-simplybuilt
category: 天天笔记
date: 2021-11-16

tag:
  - 计网
---

# 如何形象说明路由协议RIP和OSPF？

> [![车小胖](https://gitee.com/yzketx/image-markdown/raw/master/img/202111170026250.jpeg)](https://www.zhihu.com/people/chexiaopang)
> [车小胖](https://www.zhihu.com/people/chexiaopang) 计算机网络话题下的优秀答主

**RIP**

RIP协议是基于谣言的消息传播，这话怎么理解呢，先来看一个例子。

宫廷戏经常有这样的场景，正襟危坐的皇上老大，对下边的太监小弟说：宣隔壁老王觐见！

太监小弟尖着阳气不足的喉咙喊：宣隔壁老王觐见！（娘娘腔…）

大厅外的宣令官A听到，丝毫不敢怠慢，用雄厚的男中音喊：宣隔壁老王觐见！

经过多轮的消息传播，最后消息被宣令官H接收到，然后宣令官喊最后一嗓子：宣隔壁老王觐见！

于是，诚惶诚恐的隔壁老王被带进了皇宫…

这是典型的谣言传播的场景，这里的出场人物除了皇上本人、太监，谁都不知道皇上到底说没说“宣隔壁老王觐见”，宣令官遵守的原则是：盲目相信比自己更靠近皇上的宣令官，并将消息传播出去，这就够了。

如果中途宣令官E打瞌睡，没有听到D的喊声，消息传播就断了，游戏就没法玩了。



**OSPF**

OSPF协议，类似车载导航系统，将每条道路都收集到自己的数据库里。当计算上海到北京的最短路径时，有以下选择：

（1）沈海高速—长深高速—荣乌高速—京沪高速

（2）京沪高速—滨莱高速—荣乌高速

（3）京沪高速—泰新高速—京台高速—廊沧高速

第一条路径最短，优先选择。如果遇到中途“荣乌高速”严重堵车，可以提前切换到京沪高速，提高通行的效率。

**OSPF比RIP强大的地方是，OSPF对整网的拓扑结构了如指掌，一旦某一条路径断了，可以及时选择备份链路，对通信的影响小。**

RIP是基于谣言，对整网的拓扑结构没有概念，只知道有几个邻居，至于更远的邻居是什么样子，对不起，不知道！

这样的后果是，当不和自己直连的邻居down掉了、或物理链路down掉了，自己却浑然不知，依然将流量发给自己的直连邻居，直连邻居暗暗叫苦：我的邻居已经down了，让我发给鬼啊？ 没办法，丢了丢了…

经过一段相对漫长的时间，down掉的路由器或链路终于被大家发现了，因为自己的邻居不再散播这条谣言了，于是路由器纷纷使用更优的谣言来转发流量！
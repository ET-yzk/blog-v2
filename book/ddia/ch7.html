<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.0" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://blog.yzketx.online/book/ddia/ch7.html"><meta property="og:site_name" content="ET-yzk ğŸŒ±"><meta property="og:title" content="ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡"><meta property="og:description" content="ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡"><meta property="og:type" content="website"><meta property="og:image" content="https://blog.yzketx.online/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-03-06T16:35:04.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡"><meta property="article:author" content="Martin Kleppmann åŸè‘— && å†¯è‹¥èˆª è¯‘è‘—"><meta property="article:modified_time" content="2023-03-06T16:35:04.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡","description":"ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡"}</script><link rel="alternate" type="application/json" href="https://blog.yzketx.online/feed.json" title="ET-yzk ğŸŒ± JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://blog.yzketx.online/rss.xml" title="ET-yzk ğŸŒ± RSS Feed"><script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script><script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script><script src="https://unpkg.com/axios/dist/axios.min.js"></script><script src="https://kit.fontawesome.com/f13755d114.js" crossorigin="anonymous"></script><title>ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡ | ET-yzk ğŸŒ±</title><meta name="description" content="ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡">
    <link rel="preload" href="/assets/style-Hhu-O2FB.css" as="style"><link rel="stylesheet" href="/assets/style-Hhu-O2FB.css">
    <link rel="modulepreload" href="/assets/app-HHaGRXeI.js"><link rel="modulepreload" href="/assets/ch7.html-D3d8jMX8.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-x3n3nnut.js"><link rel="modulepreload" href="/assets/ch7.html-cUcBWVuO.js">
    <link rel="prefetch" href="/assets/404.html-uywht4j7.js" as="script"><link rel="prefetch" href="/assets/LICENSE.html-qAybFNXb.js" as="script"><link rel="prefetch" href="/assets/home.html-bNhIE-pb.js" as="script"><link rel="prefetch" href="/assets/index.html--pU5ursp.js" as="script"><link rel="prefetch" href="/assets/tags.html-pxA6YLJ4.js" as="script"><link rel="prefetch" href="/assets/cxydzwxy.html-ehGHizOa.js" as="script"><link rel="prefetch" href="/assets/index.html-whKniAQq.js" as="script"><link rel="prefetch" href="/assets/Network-review.html-D913PUGb.js" as="script"><link rel="prefetch" href="/assets/bian-yi-yuan-li.html-8g314mxx.js" as="script"><link rel="prefetch" href="/assets/bigdata.html-T49s2Xt1.js" as="script"><link rel="prefetch" href="/assets/cao-zuo-xi-tong-gai-lun.html-fTRx7-vj.js" as="script"><link rel="prefetch" href="/assets/db-read-data.html-J_Hr_c84.js" as="script"><link rel="prefetch" href="/assets/index.html-2L3O7GJ_.js" as="script"><link rel="prefetch" href="/assets/æ“ä½œç³»ç»Ÿç»ƒä¹ .html-kJEB-nZi.js" as="script"><link rel="prefetch" href="/assets/ç§»åŠ¨å¼€å‘.html-4hJENZ8b.js" as="script"><link rel="prefetch" href="/assets/BST.html-XQqEv5ts.js" as="script"><link rel="prefetch" href="/assets/Class-defines-itself-internally.html-3fQjY-11.js" as="script"><link rel="prefetch" href="/assets/Functioncallback.html-2NClFWom.js" as="script"><link rel="prefetch" href="/assets/Listary-Everything.html-yEe_WeMY.js" as="script"><link rel="prefetch" href="/assets/LoadBalance.html-zfl1nE4a.js" as="script"><link rel="prefetch" href="/assets/Message-push.html-MiqCo1t9.js" as="script"><link rel="prefetch" href="/assets/Promise-base.html-v2f9YWnd.js" as="script"><link rel="prefetch" href="/assets/Python-loop.html-hW76Q2es.js" as="script"><link rel="prefetch" href="/assets/RIP-OSPF.html-PCpdOfOU.js" as="script"><link rel="prefetch" href="/assets/Redis.html-23A901-m.js" as="script"><link rel="prefetch" href="/assets/Synergetic-process.html-7d8nrxVz.js" as="script"><link rel="prefetch" href="/assets/TCP.html-VPNDH3ix.js" as="script"><link rel="prefetch" href="/assets/Thread-safety.html-4DT1LLW2.js" as="script"><link rel="prefetch" href="/assets/Ubuntu.html-O65mZ3Lj.js" as="script"><link rel="prefetch" href="/assets/Vim.html-WzuB6JhK.js" as="script"><link rel="prefetch" href="/assets/algolia.html-h6JJf212.js" as="script"><link rel="prefetch" href="/assets/bitmap.html-nwAti7mP.js" as="script"><link rel="prefetch" href="/assets/ci.html-9XoWefj5.js" as="script"><link rel="prefetch" href="/assets/common-nouns.html-Osd1aHbw.js" as="script"><link rel="prefetch" href="/assets/decorator.html-F7gH_lj3.js" as="script"><link rel="prefetch" href="/assets/django-auth.html-TjZA8JMV.js" as="script"><link rel="prefetch" href="/assets/docker-desktop-wsl2-change-dir.html-J2OF0FLL.js" as="script"><link rel="prefetch" href="/assets/dp.html-14QYiQgx.js" as="script"><link rel="prefetch" href="/assets/frontend-base.html-LJVe1aMT.js" as="script"><link rel="prefetch" href="/assets/hook.html-UVeMOssU.js" as="script"><link rel="prefetch" href="/assets/javabean.html-hWWmDH-9.js" as="script"><link rel="prefetch" href="/assets/lock.html-e2XsxgE3.js" as="script"><link rel="prefetch" href="/assets/pycharm-remote-develop.html-VGiB3542.js" as="script"><link rel="prefetch" href="/assets/python-mateclass.html-K6Ohrxq5.js" as="script"><link rel="prefetch" href="/assets/python-memory-management-strategy.html-NR99EPgi.js" as="script"><link rel="prefetch" href="/assets/pythonGenerator.html--Swx6BmM.js" as="script"><link rel="prefetch" href="/assets/python_inf_nan.html-xQHWi8cO.js" as="script"><link rel="prefetch" href="/assets/index.html-3SQ59Pcm.js" as="script"><link rel="prefetch" href="/assets/runtime.html-DDDO9l1_.js" as="script"><link rel="prefetch" href="/assets/str-repr.html-hxGda0DH.js" as="script"><link rel="prefetch" href="/assets/tree.html-vKvd7W4j.js" as="script"><link rel="prefetch" href="/assets/vue3-lifecycle.html-EWRnOUm1.js" as="script"><link rel="prefetch" href="/assets/vuepress-starter.html-LEOpPV9Q.js" as="script"><link rel="prefetch" href="/assets/wechat-deploy.html-JaJIdVOj.js" as="script"><link rel="prefetch" href="/assets/home.html-YHbRFkk4.js" as="script"><link rel="prefetch" href="/assets/index.html-DiND9Mll.js" as="script"><link rel="prefetch" href="/assets/aq.html-SBlRytHR.js" as="script"><link rel="prefetch" href="/assets/bytedance.html-5-DRnG2D.js" as="script"><link rel="prefetch" href="/assets/code.html-INYGktDX.js" as="script"><link rel="prefetch" href="/assets/didi.html-kFBb6Xu8.js" as="script"><link rel="prefetch" href="/assets/hikvision.html-RaYlgOsz.js" as="script"><link rel="prefetch" href="/assets/me.html-1Fuqwlwh.js" as="script"><link rel="prefetch" href="/assets/note.html-NilWVK55.js" as="script"><link rel="prefetch" href="/assets/index.html-_MIsOga3.js" as="script"><link rel="prefetch" href="/assets/index.html-C4Ar5VVH.js" as="script"><link rel="prefetch" href="/assets/api.html-aq1kFsNy.js" as="script"><link rel="prefetch" href="/assets/index.html-tmbFpsxQ.js" as="script"><link rel="prefetch" href="/assets/sql.html-LmJN2G2W.js" as="script"><link rel="prefetch" href="/assets/leetcode.html-uqVTx7Z0.js" as="script"><link rel="prefetch" href="/assets/index.html-9dZMGODw.js" as="script"><link rel="prefetch" href="/assets/tips.html-F9wzTePz.js" as="script"><link rel="prefetch" href="/assets/aliyun-server.html-JU78Z52s.js" as="script"><link rel="prefetch" href="/assets/github-page.html-7eKgdqpc.js" as="script"><link rel="prefetch" href="/assets/otherAPI.html-ne-2UsYk.js" as="script"><link rel="prefetch" href="/assets/index.html-BYHUVa9m.js" as="script"><link rel="prefetch" href="/assets/Halloween.html-HmjImEwH.js" as="script"><link rel="prefetch" href="/assets/index.html-7kXFU1hB.js" as="script"><link rel="prefetch" href="/assets/Android Studio.html-oeZOoHmv.js" as="script"><link rel="prefetch" href="/assets/Conda-Downloaded-bytes-did-not-match-Content-Length.html-DW2umtG8.js" as="script"><link rel="prefetch" href="/assets/Microsoft-typewriting.html-DTOuyCGg.js" as="script"><link rel="prefetch" href="/assets/Python-cls-self-classmethod-staticmethod.html-8P9J_rFh.js" as="script"><link rel="prefetch" href="/assets/jupyterlab.html-mz5yXMQQ.js" as="script"><link rel="prefetch" href="/assets/index.html-4sZuHCrc.js" as="script"><link rel="prefetch" href="/assets/vim.html-qV41Or1M.js" as="script"><link rel="prefetch" href="/assets/wechat-backend-Django.html-n_Muqnjd.js" as="script"><link rel="prefetch" href="/assets/Vue-improve10.html-CviVnHre.js" as="script"><link rel="prefetch" href="/assets/pythonMultithreading.html-Uo_x4Uf-.js" as="script"><link rel="prefetch" href="/assets/index.html-8iVjh5HB.js" as="script"><link rel="prefetch" href="/assets/redis-template.html-CMF0pA_G.js" as="script"><link rel="prefetch" href="/assets/diary.html-fBJz_L4_.js" as="script"><link rel="prefetch" href="/assets/index.html-AfBxygsW.js" as="script"><link rel="prefetch" href="/assets/todo-list.html-rSJALOJ8.js" as="script"><link rel="prefetch" href="/assets/disable.html-T9nxiqgM.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-nALZPCxB.js" as="script"><link rel="prefetch" href="/assets/layout.html-5dfVhm-q.js" as="script"><link rel="prefetch" href="/assets/page.html-kwXRXG85.js" as="script"><link rel="prefetch" href="/assets/index.html-kXhZeEiX.js" as="script"><link rel="prefetch" href="/assets/slides.html-NMoReVI7.js" as="script"><link rel="prefetch" href="/assets/typora.html-dXmcH19R.js" as="script"><link rel="prefetch" href="/assets/DDIA_README.html-BZ5J6q7x.js" as="script"><link rel="prefetch" href="/assets/LICENSE.html-I6zFrZMf.js" as="script"><link rel="prefetch" href="/assets/ch1.html-HvwIyTwB.js" as="script"><link rel="prefetch" href="/assets/ch10.html-mxW23vUk.js" as="script"><link rel="prefetch" href="/assets/ch11.html-ciKByO66.js" as="script"><link rel="prefetch" href="/assets/ch12.html-hvNtER8b.js" as="script"><link rel="prefetch" href="/assets/ch2.html-NMFViL6s.js" as="script"><link rel="prefetch" href="/assets/ch3.html-PTfMwqsn.js" as="script"><link rel="prefetch" href="/assets/ch4.html-aX5oHa1J.js" as="script"><link rel="prefetch" href="/assets/ch5.html-25ZwNzjP.js" as="script"><link rel="prefetch" href="/assets/ch6.html-NTsV6mTz.js" as="script"><link rel="prefetch" href="/assets/ch8.html-wYmCda5j.js" as="script"><link rel="prefetch" href="/assets/ch9.html-gToaEyK3.js" as="script"><link rel="prefetch" href="/assets/colophon.html-jDucmYx5.js" as="script"><link rel="prefetch" href="/assets/ddia_sidebar.html-NAWFxcrr.js" as="script"><link rel="prefetch" href="/assets/glossary.html--VAJJ_4J.js" as="script"><link rel="prefetch" href="/assets/part-i.html-i4qE_EAo.js" as="script"><link rel="prefetch" href="/assets/part-ii.html-QlYFkkMS.js" as="script"><link rel="prefetch" href="/assets/part-iii.html-mVdXrw7_.js" as="script"><link rel="prefetch" href="/assets/preface.html-R7J3SdkK.js" as="script"><link rel="prefetch" href="/assets/index.html-3V6aRk0P.js" as="script"><link rel="prefetch" href="/assets/index.html-dA3nod5L.js" as="script"><link rel="prefetch" href="/assets/disable.html-Q-yGS_3J.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-OzUxx7hm.js" as="script"><link rel="prefetch" href="/assets/markdown.html-A49KuS7Y.js" as="script"><link rel="prefetch" href="/assets/page.html-0jvrD5zM.js" as="script"><link rel="prefetch" href="/assets/index.html-t5HBbRl7.js" as="script"><link rel="prefetch" href="/assets/index.html-vRQrklOu.js" as="script"><link rel="prefetch" href="/assets/demo.html-zxuu1ugj.js" as="script"><link rel="prefetch" href="/assets/markdown-intro.html-UrfZavPe.js" as="script"><link rel="prefetch" href="/assets/index.html-DHS1P3h6.js" as="script"><link rel="prefetch" href="/assets/emoji.html-ULB68vvz.js" as="script"><link rel="prefetch" href="/assets/nature.html-TW24ZshK.js" as="script"><link rel="prefetch" href="/assets/object.html-J34fGYlI.js" as="script"><link rel="prefetch" href="/assets/people.html-I6zscWYB.js" as="script"><link rel="prefetch" href="/assets/place.html-MmlffjMl.js" as="script"><link rel="prefetch" href="/assets/index.html-1pKUpi7h.js" as="script"><link rel="prefetch" href="/assets/symbol.html-qTSsh_lC.js" as="script"><link rel="prefetch" href="/assets/index.html-ewbA0wTL.js" as="script"><link rel="prefetch" href="/assets/index.html-_sHhlqcl.js" as="script"><link rel="prefetch" href="/assets/index.html-gP9KvfH0.js" as="script"><link rel="prefetch" href="/assets/index.html-RWCBdDLN.js" as="script"><link rel="prefetch" href="/assets/index.html-TFLUryt_.js" as="script"><link rel="prefetch" href="/assets/index.html-KWH1oGN0.js" as="script"><link rel="prefetch" href="/assets/index.html-4r0AgK7k.js" as="script"><link rel="prefetch" href="/assets/index.html-NXbYrvIp.js" as="script"><link rel="prefetch" href="/assets/index.html-Ie7Sh2Em.js" as="script"><link rel="prefetch" href="/assets/index.html-kEQH6OqL.js" as="script"><link rel="prefetch" href="/assets/index.html-49QQhEj9.js" as="script"><link rel="prefetch" href="/assets/index.html-ySWX68Wc.js" as="script"><link rel="prefetch" href="/assets/index.html--1UEn9qj.js" as="script"><link rel="prefetch" href="/assets/index.html-A0ELMUIZ.js" as="script"><link rel="prefetch" href="/assets/index.html-HCWYBYiK.js" as="script"><link rel="prefetch" href="/assets/index.html-YM8L2pFL.js" as="script"><link rel="prefetch" href="/assets/index.html-UHWd-XHX.js" as="script"><link rel="prefetch" href="/assets/index.html-0y2TtmfI.js" as="script"><link rel="prefetch" href="/assets/index.html-XKkd1wyn.js" as="script"><link rel="prefetch" href="/assets/index.html-IlbN1H7J.js" as="script"><link rel="prefetch" href="/assets/index.html-lxU_i7pi.js" as="script"><link rel="prefetch" href="/assets/index.html-NN13IXV3.js" as="script"><link rel="prefetch" href="/assets/index.html-Vyr3XvnN.js" as="script"><link rel="prefetch" href="/assets/index.html-GPv8MdFW.js" as="script"><link rel="prefetch" href="/assets/index.html-1-0LsFT1.js" as="script"><link rel="prefetch" href="/assets/index.html-KGrS0DkK.js" as="script"><link rel="prefetch" href="/assets/index.html-cPNRhdAd.js" as="script"><link rel="prefetch" href="/assets/index.html-4OIsBHw5.js" as="script"><link rel="prefetch" href="/assets/index.html-7_DCAEcp.js" as="script"><link rel="prefetch" href="/assets/index.html-zIDtN4H9.js" as="script"><link rel="prefetch" href="/assets/index.html-REZKETcj.js" as="script"><link rel="prefetch" href="/assets/index.html-2O4O6Hys.js" as="script"><link rel="prefetch" href="/assets/index.html-i4JgY5RQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Pkf6rnYw.js" as="script"><link rel="prefetch" href="/assets/index.html-hz9dqx9n.js" as="script"><link rel="prefetch" href="/assets/index.html-UtgCFb46.js" as="script"><link rel="prefetch" href="/assets/index.html-pF-t5wQi.js" as="script"><link rel="prefetch" href="/assets/index.html-t7ufAtuD.js" as="script"><link rel="prefetch" href="/assets/index.html-0ttT86xD.js" as="script"><link rel="prefetch" href="/assets/index.html-Ny5KXAfu.js" as="script"><link rel="prefetch" href="/assets/index.html-rneU68K4.js" as="script"><link rel="prefetch" href="/assets/index.html-9IgPfVH3.js" as="script"><link rel="prefetch" href="/assets/index.html-AJs82N-2.js" as="script"><link rel="prefetch" href="/assets/index.html--2TEVpD7.js" as="script"><link rel="prefetch" href="/assets/index.html-nycKYBi6.js" as="script"><link rel="prefetch" href="/assets/index.html-tObTQwuA.js" as="script"><link rel="prefetch" href="/assets/index.html-7j6G6The.js" as="script"><link rel="prefetch" href="/assets/index.html-K4lmV6Ta.js" as="script"><link rel="prefetch" href="/assets/index.html-XYBgfgnG.js" as="script"><link rel="prefetch" href="/assets/index.html-DgGbPfU-.js" as="script"><link rel="prefetch" href="/assets/index.html-m2OHNP1d.js" as="script"><link rel="prefetch" href="/assets/index.html-AQTC3d5B.js" as="script"><link rel="prefetch" href="/assets/index.html-gTFlQZWx.js" as="script"><link rel="prefetch" href="/assets/index.html-vUhPkXGV.js" as="script"><link rel="prefetch" href="/assets/index.html-s6lWlkOv.js" as="script"><link rel="prefetch" href="/assets/index.html-odMgnmOq.js" as="script"><link rel="prefetch" href="/assets/index.html-RrV_FVaz.js" as="script"><link rel="prefetch" href="/assets/index.html-EHvgKLLv.js" as="script"><link rel="prefetch" href="/assets/index.html-5L8R1MK8.js" as="script"><link rel="prefetch" href="/assets/index.html-1AdOLAEm.js" as="script"><link rel="prefetch" href="/assets/index.html-Z9rVHSQa.js" as="script"><link rel="prefetch" href="/assets/index.html-KkP5fRJR.js" as="script"><link rel="prefetch" href="/assets/index.html-HtxVkc_w.js" as="script"><link rel="prefetch" href="/assets/index.html-alM3HGmY.js" as="script"><link rel="prefetch" href="/assets/index.html-IfNuBgZA.js" as="script"><link rel="prefetch" href="/assets/index.html-UK2sxbmb.js" as="script"><link rel="prefetch" href="/assets/index.html-J5R9HPkq.js" as="script"><link rel="prefetch" href="/assets/index.html-lhMIdmvX.js" as="script"><link rel="prefetch" href="/assets/404.html-HxqjVAeH.js" as="script"><link rel="prefetch" href="/assets/LICENSE.html-dAjzKmg7.js" as="script"><link rel="prefetch" href="/assets/home.html-8CUIWIK8.js" as="script"><link rel="prefetch" href="/assets/index.html-3YS7nCLt.js" as="script"><link rel="prefetch" href="/assets/tags.html-WWyIDzYf.js" as="script"><link rel="prefetch" href="/assets/cxydzwxy.html-TrkRygWp.js" as="script"><link rel="prefetch" href="/assets/index.html-3BTqNLc7.js" as="script"><link rel="prefetch" href="/assets/Network-review.html-hp1zm4VS.js" as="script"><link rel="prefetch" href="/assets/bian-yi-yuan-li.html-9wJhYTfZ.js" as="script"><link rel="prefetch" href="/assets/bigdata.html-E9ThsRYZ.js" as="script"><link rel="prefetch" href="/assets/cao-zuo-xi-tong-gai-lun.html-O8pb3IzA.js" as="script"><link rel="prefetch" href="/assets/db-read-data.html-662OIZug.js" as="script"><link rel="prefetch" href="/assets/index.html-J3bSJKM5.js" as="script"><link rel="prefetch" href="/assets/æ“ä½œç³»ç»Ÿç»ƒä¹ .html-8PzYK14Y.js" as="script"><link rel="prefetch" href="/assets/ç§»åŠ¨å¼€å‘.html-T3A9B-vR.js" as="script"><link rel="prefetch" href="/assets/BST.html-h_nNSiW2.js" as="script"><link rel="prefetch" href="/assets/Class-defines-itself-internally.html-v9gHtiD5.js" as="script"><link rel="prefetch" href="/assets/Functioncallback.html-77stHmn4.js" as="script"><link rel="prefetch" href="/assets/Listary-Everything.html-tS0FvkpE.js" as="script"><link rel="prefetch" href="/assets/LoadBalance.html-v8dF0PP-.js" as="script"><link rel="prefetch" href="/assets/Message-push.html-9Chv0vuG.js" as="script"><link rel="prefetch" href="/assets/Promise-base.html-5PI-wz4b.js" as="script"><link rel="prefetch" href="/assets/Python-loop.html-YvCDoCEB.js" as="script"><link rel="prefetch" href="/assets/RIP-OSPF.html-OC8ImT_t.js" as="script"><link rel="prefetch" href="/assets/Redis.html-PZG22Afv.js" as="script"><link rel="prefetch" href="/assets/Synergetic-process.html-qYoAINdB.js" as="script"><link rel="prefetch" href="/assets/TCP.html-RQvWOdeK.js" as="script"><link rel="prefetch" href="/assets/Thread-safety.html-cLWuljys.js" as="script"><link rel="prefetch" href="/assets/Ubuntu.html-3EmgP8iY.js" as="script"><link rel="prefetch" href="/assets/Vim.html-VAjJtmrw.js" as="script"><link rel="prefetch" href="/assets/algolia.html-61_Q-gk0.js" as="script"><link rel="prefetch" href="/assets/bitmap.html-WSBFiVK6.js" as="script"><link rel="prefetch" href="/assets/ci.html-mz8Doyb5.js" as="script"><link rel="prefetch" href="/assets/common-nouns.html-qS259DxE.js" as="script"><link rel="prefetch" href="/assets/decorator.html-jihgk_cB.js" as="script"><link rel="prefetch" href="/assets/django-auth.html-WKzSV4vi.js" as="script"><link rel="prefetch" href="/assets/docker-desktop-wsl2-change-dir.html--QNHa2p4.js" as="script"><link rel="prefetch" href="/assets/dp.html-b-aNKuEE.js" as="script"><link rel="prefetch" href="/assets/frontend-base.html-DhCrylXz.js" as="script"><link rel="prefetch" href="/assets/hook.html-n4z4_6oY.js" as="script"><link rel="prefetch" href="/assets/javabean.html-c2SeavkM.js" as="script"><link rel="prefetch" href="/assets/lock.html-BquTR7vD.js" as="script"><link rel="prefetch" href="/assets/pycharm-remote-develop.html-rVMLd1oN.js" as="script"><link rel="prefetch" href="/assets/python-mateclass.html-VnP_CfxQ.js" as="script"><link rel="prefetch" href="/assets/python-memory-management-strategy.html-YGjqthXt.js" as="script"><link rel="prefetch" href="/assets/pythonGenerator.html-bs_no7vM.js" as="script"><link rel="prefetch" href="/assets/python_inf_nan.html-bnxjjgL7.js" as="script"><link rel="prefetch" href="/assets/index.html-O2g7nOY9.js" as="script"><link rel="prefetch" href="/assets/runtime.html-UIt8bFy7.js" as="script"><link rel="prefetch" href="/assets/str-repr.html-e3-VBpp1.js" as="script"><link rel="prefetch" href="/assets/tree.html-_Wq3eBL6.js" as="script"><link rel="prefetch" href="/assets/vue3-lifecycle.html-gO2b4Mmm.js" as="script"><link rel="prefetch" href="/assets/vuepress-starter.html-3KVoSFQ2.js" as="script"><link rel="prefetch" href="/assets/wechat-deploy.html-YSerBKgi.js" as="script"><link rel="prefetch" href="/assets/home.html-6Dmq2d6c.js" as="script"><link rel="prefetch" href="/assets/index.html-IuxxdSx_.js" as="script"><link rel="prefetch" href="/assets/aq.html-VgPPvLYV.js" as="script"><link rel="prefetch" href="/assets/bytedance.html-O2lUjYLY.js" as="script"><link rel="prefetch" href="/assets/code.html-xZrsq2qX.js" as="script"><link rel="prefetch" href="/assets/didi.html-Ffy3hJAT.js" as="script"><link rel="prefetch" href="/assets/hikvision.html-lBj40_DF.js" as="script"><link rel="prefetch" href="/assets/me.html-wUya_Eo8.js" as="script"><link rel="prefetch" href="/assets/note.html-bJYkHknm.js" as="script"><link rel="prefetch" href="/assets/index.html-dpaUKtKp.js" as="script"><link rel="prefetch" href="/assets/index.html--s0CqMcw.js" as="script"><link rel="prefetch" href="/assets/api.html-1-jcMM7b.js" as="script"><link rel="prefetch" href="/assets/index.html-gbXBcqni.js" as="script"><link rel="prefetch" href="/assets/sql.html-NGCDo6j8.js" as="script"><link rel="prefetch" href="/assets/leetcode.html-OnY7KMHp.js" as="script"><link rel="prefetch" href="/assets/index.html-rmAFLaMX.js" as="script"><link rel="prefetch" href="/assets/tips.html-f8TmsX-0.js" as="script"><link rel="prefetch" href="/assets/aliyun-server.html-1CKq3nkz.js" as="script"><link rel="prefetch" href="/assets/github-page.html-wjh7gfB5.js" as="script"><link rel="prefetch" href="/assets/otherAPI.html-kjcXYegz.js" as="script"><link rel="prefetch" href="/assets/index.html-BAa2Y_sQ.js" as="script"><link rel="prefetch" href="/assets/Halloween.html-SclVbzhB.js" as="script"><link rel="prefetch" href="/assets/index.html-779r-DX5.js" as="script"><link rel="prefetch" href="/assets/Android Studio.html-_d4REgH0.js" as="script"><link rel="prefetch" href="/assets/Conda-Downloaded-bytes-did-not-match-Content-Length.html-j3fW45oX.js" as="script"><link rel="prefetch" href="/assets/Microsoft-typewriting.html-pWwN-IR-.js" as="script"><link rel="prefetch" href="/assets/Python-cls-self-classmethod-staticmethod.html-2pY6AyGO.js" as="script"><link rel="prefetch" href="/assets/jupyterlab.html-NN6Edgyr.js" as="script"><link rel="prefetch" href="/assets/index.html-KfTt7BY5.js" as="script"><link rel="prefetch" href="/assets/vim.html-rCbRjhqc.js" as="script"><link rel="prefetch" href="/assets/wechat-backend-Django.html-_HI6DAUu.js" as="script"><link rel="prefetch" href="/assets/Vue-improve10.html-fCa0Yo89.js" as="script"><link rel="prefetch" href="/assets/pythonMultithreading.html-9H7Uaqm3.js" as="script"><link rel="prefetch" href="/assets/index.html-Js3_44av.js" as="script"><link rel="prefetch" href="/assets/redis-template.html-dv4q175x.js" as="script"><link rel="prefetch" href="/assets/diary.html-9HQb7Kdo.js" as="script"><link rel="prefetch" href="/assets/index.html-7c1htt28.js" as="script"><link rel="prefetch" href="/assets/todo-list.html-LUZlmN1Z.js" as="script"><link rel="prefetch" href="/assets/disable.html-mxJDqzie.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-RoJtnRND.js" as="script"><link rel="prefetch" href="/assets/layout.html-EWbi4A2A.js" as="script"><link rel="prefetch" href="/assets/page.html-ThkjsdLC.js" as="script"><link rel="prefetch" href="/assets/index.html-YpQgY6Pj.js" as="script"><link rel="prefetch" href="/assets/slides.html-OoGrY-BK.js" as="script"><link rel="prefetch" href="/assets/typora.html-ja5FEpIB.js" as="script"><link rel="prefetch" href="/assets/DDIA_README.html-0L6LCujj.js" as="script"><link rel="prefetch" href="/assets/LICENSE.html-w0_wNEyT.js" as="script"><link rel="prefetch" href="/assets/ch1.html-dpPSu6k3.js" as="script"><link rel="prefetch" href="/assets/ch10.html-Mm5mFP67.js" as="script"><link rel="prefetch" href="/assets/ch11.html-UhabZaZs.js" as="script"><link rel="prefetch" href="/assets/ch12.html-7i4_ac1v.js" as="script"><link rel="prefetch" href="/assets/ch2.html-VCa9eUfL.js" as="script"><link rel="prefetch" href="/assets/ch3.html-x1zx2VGF.js" as="script"><link rel="prefetch" href="/assets/ch4.html-bsMXVMvD.js" as="script"><link rel="prefetch" href="/assets/ch5.html-9DjN_Hqh.js" as="script"><link rel="prefetch" href="/assets/ch6.html-T6mvZACD.js" as="script"><link rel="prefetch" href="/assets/ch8.html-ViIcQ00Z.js" as="script"><link rel="prefetch" href="/assets/ch9.html-P5jcChfG.js" as="script"><link rel="prefetch" href="/assets/colophon.html-CjXkpumG.js" as="script"><link rel="prefetch" href="/assets/ddia_sidebar.html-ubonahqo.js" as="script"><link rel="prefetch" href="/assets/glossary.html-MicuPv-L.js" as="script"><link rel="prefetch" href="/assets/part-i.html-BCAavWWl.js" as="script"><link rel="prefetch" href="/assets/part-ii.html-7PuzDuS7.js" as="script"><link rel="prefetch" href="/assets/part-iii.html-MolxOmxR.js" as="script"><link rel="prefetch" href="/assets/preface.html-DW9UuGn2.js" as="script"><link rel="prefetch" href="/assets/index.html-6dDv8WCs.js" as="script"><link rel="prefetch" href="/assets/index.html-PQYIjuKj.js" as="script"><link rel="prefetch" href="/assets/disable.html-Gix700Zv.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-HbL7D8ew.js" as="script"><link rel="prefetch" href="/assets/markdown.html-4k3Kvzit.js" as="script"><link rel="prefetch" href="/assets/page.html-X8lUsWx5.js" as="script"><link rel="prefetch" href="/assets/index.html-dMle_Qo1.js" as="script"><link rel="prefetch" href="/assets/index.html-sZuQYdc4.js" as="script"><link rel="prefetch" href="/assets/demo.html-s9ftFwJ5.js" as="script"><link rel="prefetch" href="/assets/markdown-intro.html-qlGLAz1l.js" as="script"><link rel="prefetch" href="/assets/index.html-rsDrPztL.js" as="script"><link rel="prefetch" href="/assets/emoji.html-6NQn-Pzc.js" as="script"><link rel="prefetch" href="/assets/nature.html-rprTsyXh.js" as="script"><link rel="prefetch" href="/assets/object.html-ciOZ-u3R.js" as="script"><link rel="prefetch" href="/assets/people.html-4ljv46kf.js" as="script"><link rel="prefetch" href="/assets/place.html-klDAIHN9.js" as="script"><link rel="prefetch" href="/assets/index.html-kyAHLCY4.js" as="script"><link rel="prefetch" href="/assets/symbol.html-fEA0UgTI.js" as="script"><link rel="prefetch" href="/assets/index.html-ijprkvzB.js" as="script"><link rel="prefetch" href="/assets/index.html-4Ong_Oe1.js" as="script"><link rel="prefetch" href="/assets/index.html-RMfDhNWK.js" as="script"><link rel="prefetch" href="/assets/index.html-mp_J8rKM.js" as="script"><link rel="prefetch" href="/assets/index.html-mKi73XEn.js" as="script"><link rel="prefetch" href="/assets/index.html-4hlQVEJ4.js" as="script"><link rel="prefetch" href="/assets/index.html-51bh7xSy.js" as="script"><link rel="prefetch" href="/assets/index.html-mcaMMCvL.js" as="script"><link rel="prefetch" href="/assets/index.html-MS5JtLKj.js" as="script"><link rel="prefetch" href="/assets/index.html-9lmy0_nl.js" as="script"><link rel="prefetch" href="/assets/index.html-R9aYobzv.js" as="script"><link rel="prefetch" href="/assets/index.html-7FmdfIv0.js" as="script"><link rel="prefetch" href="/assets/index.html-pEq3ozaO.js" as="script"><link rel="prefetch" href="/assets/index.html-6cnBTNQH.js" as="script"><link rel="prefetch" href="/assets/index.html-1rvjh_tw.js" as="script"><link rel="prefetch" href="/assets/index.html-A_nwXo3x.js" as="script"><link rel="prefetch" href="/assets/index.html-TXMZvwJw.js" as="script"><link rel="prefetch" href="/assets/index.html-8BEuZ6nL.js" as="script"><link rel="prefetch" href="/assets/index.html-lwXO1wDJ.js" as="script"><link rel="prefetch" href="/assets/index.html-bGss-izd.js" as="script"><link rel="prefetch" href="/assets/index.html-XofyjCN4.js" as="script"><link rel="prefetch" href="/assets/index.html-ehs3zeRp.js" as="script"><link rel="prefetch" href="/assets/index.html-aNA9o2Xr.js" as="script"><link rel="prefetch" href="/assets/index.html-8dyty-Mf.js" as="script"><link rel="prefetch" href="/assets/index.html-vinjS6Da.js" as="script"><link rel="prefetch" href="/assets/index.html-G2DEbiyg.js" as="script"><link rel="prefetch" href="/assets/index.html-ENAVLqDp.js" as="script"><link rel="prefetch" href="/assets/index.html-CbFYUJRe.js" as="script"><link rel="prefetch" href="/assets/index.html-qjbu7Jia.js" as="script"><link rel="prefetch" href="/assets/index.html-HUnSbur0.js" as="script"><link rel="prefetch" href="/assets/index.html-Msc6nJlN.js" as="script"><link rel="prefetch" href="/assets/index.html-_pUx618a.js" as="script"><link rel="prefetch" href="/assets/index.html-CBafI8Nj.js" as="script"><link rel="prefetch" href="/assets/index.html-3IyzwdKF.js" as="script"><link rel="prefetch" href="/assets/index.html-ULGoklFP.js" as="script"><link rel="prefetch" href="/assets/index.html-lc1Jwj9G.js" as="script"><link rel="prefetch" href="/assets/index.html-3lXK5ZFy.js" as="script"><link rel="prefetch" href="/assets/index.html-5i0BpQ3f.js" as="script"><link rel="prefetch" href="/assets/index.html-sQbDi5E3.js" as="script"><link rel="prefetch" href="/assets/index.html-n2hMzycO.js" as="script"><link rel="prefetch" href="/assets/index.html-RMEk7N5S.js" as="script"><link rel="prefetch" href="/assets/index.html-e-V4JXMh.js" as="script"><link rel="prefetch" href="/assets/index.html-S5aKgcyG.js" as="script"><link rel="prefetch" href="/assets/index.html-zTUlt8Ju.js" as="script"><link rel="prefetch" href="/assets/index.html-Y6pLeWqp.js" as="script"><link rel="prefetch" href="/assets/index.html-Lilooe0U.js" as="script"><link rel="prefetch" href="/assets/index.html-Rps32fyH.js" as="script"><link rel="prefetch" href="/assets/index.html-LIvQvGXn.js" as="script"><link rel="prefetch" href="/assets/index.html-2ANV-u4b.js" as="script"><link rel="prefetch" href="/assets/index.html-9cULt4zb.js" as="script"><link rel="prefetch" href="/assets/index.html-GA6864ZW.js" as="script"><link rel="prefetch" href="/assets/index.html-G_h7THtq.js" as="script"><link rel="prefetch" href="/assets/index.html-91_L5lC0.js" as="script"><link rel="prefetch" href="/assets/index.html-3scUcP-b.js" as="script"><link rel="prefetch" href="/assets/index.html-vnh9vjci.js" as="script"><link rel="prefetch" href="/assets/index.html-GHkdPuxu.js" as="script"><link rel="prefetch" href="/assets/index.html-958BNMm4.js" as="script"><link rel="prefetch" href="/assets/index.html--mZu3Mej.js" as="script"><link rel="prefetch" href="/assets/index.html-VyFhP2AS.js" as="script"><link rel="prefetch" href="/assets/index.html-ZP_w0d6X.js" as="script"><link rel="prefetch" href="/assets/index.html-hImpIM9s.js" as="script"><link rel="prefetch" href="/assets/index.html-lCAs53ql.js" as="script"><link rel="prefetch" href="/assets/index.html-XrAaOo7p.js" as="script"><link rel="prefetch" href="/assets/index.html-hvlI4cFg.js" as="script"><link rel="prefetch" href="/assets/index.html-lSd-IhOh.js" as="script"><link rel="prefetch" href="/assets/index.html-cfjKtgyY.js" as="script"><link rel="prefetch" href="/assets/index.html-EDssXZaS.js" as="script"><link rel="prefetch" href="/assets/index.html-uGQlOWRB.js" as="script"><link rel="prefetch" href="/assets/browser-ux2wBRIf.js" as="script"><link rel="prefetch" href="/assets/waline-meta-w40geAFS.js" as="script"><link rel="prefetch" href="/assets/component-Fe6Goej7.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-hLR48fKj.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-mC0Qcr12.js" as="script"><link rel="prefetch" href="/assets/pageview-22xJcQFx.js" as="script"><link rel="prefetch" href="/assets/SearchResult-yedQL5YH.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo light" src="/logo.png" alt="ET-yzk ğŸŒ±"><img class="vp-nav-logo dark" src="/logo-darkmode.png" alt="ET-yzk ğŸŒ±"><span class="vp-site-name hide-in-pad">ET-yzk ğŸŒ±</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="ä¸»é¡µ" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon fas fa-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å¼€æºä¹¦ç±"><span class="title"><span class="font-icon icon fas fa-book-open-reader" style=""></span>å¼€æºä¹¦ç±</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="ã€Šè®¾è®¡å¯†é›†å‹åº”ç”¨ã€‹" class="vp-link nav-link active nav-link active" href="/book/ddia/"><span class="font-icon icon fas fa-book-atlas" style=""></span>ã€Šè®¾è®¡å¯†é›†å‹åº”ç”¨ã€‹<!----></a></li><li class="dropdown-item"><a aria-label="ã€Šé˜¿é‡Œå·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»ã€‹" class="vp-link nav-link nav-link" href="/book/cxydzwxy.html"><span class="font-icon icon fas fa-book-atlas" style=""></span>ã€Šé˜¿é‡Œå·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»ã€‹<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å¯¼èˆª"><span class="title"><span class="font-icon icon fas fa-paper-plane" style=""></span>å¯¼èˆª</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="å¤©å¤©ç¬”è®°" class="vp-link nav-link nav-link" href="/daily/"><span class="font-icon icon fas fa-pen-clip" style=""></span>å¤©å¤©ç¬”è®°<!----></a></li><li class="dropdown-item"><a aria-label="åŠ›æ‰£ç¬”è®°" class="vp-link nav-link nav-link" href="/leetcode/"><span class="font-icon icon fas fa-code" style=""></span>åŠ›æ‰£ç¬”è®°<!----></a></li><li class="dropdown-item"><a aria-label="è¸©å‘æŒ‡å—" class="vp-link nav-link nav-link" href="/problem/"><span class="font-icon icon fas fa-shoe-prints" style=""></span>è¸©å‘æŒ‡å—<!----></a></li><li class="dropdown-item"><a aria-label="è½¬è½½æ•´ç†" class="vp-link nav-link nav-link" href="/reprint/"><span class="font-icon icon fas fa-clipboard" style=""></span>è½¬è½½æ•´ç†<!----></a></li><li class="dropdown-item"><a aria-label="ä½¿ç”¨æŒ‡å— v1" class="vp-link nav-link nav-link" href="/tip/"><span class="font-icon icon fas fa-compass" style=""></span>ä½¿ç”¨æŒ‡å— v1<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://blog.yzketx.online/iSTEP.github.io/" rel="noopener noreferrer" target="_blank" aria-label="iSTEP Blog" class="nav-link"><span class="font-icon icon fas fa-blog" style=""></span>iSTEP Blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button type="button" class="dropdown-title" aria-label="é€‰æ‹©è¯­è¨€"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="ç®€ä½“ä¸­æ–‡" class="vp-link nav-link active nav-link active" href="/book/ddia/ch7.html"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li><li class="dropdown-item"><a aria-label="English" class="vp-link nav-link nav-link" href="/en/"><!---->English<!----></a></li></ul></button></div></div><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon fas fa-book-atlas" style=""></span><span class="vp-sidebar-title">ã€Šè®¾è®¡æ•°æ®å¯†é›†å‹åº”ç”¨ã€‹</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="åºè¨€" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/preface.html"><!---->åºè¨€<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ç›®å½•" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/ddia_sidebar.html"><!---->ç›®å½•<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fas fa-bookmark" style=""></span><span class="vp-sidebar-title">å·ä¸€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon fas fa-bookmark" style=""></span><span class="vp-sidebar-title">å·äºŒ</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="ç¬¬äºŒéƒ¨åˆ†ï¼šåˆ†å¸ƒå¼æ•°æ®" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/part-ii.html"><!---->ç¬¬äºŒéƒ¨åˆ†ï¼šåˆ†å¸ƒå¼æ•°æ®<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ç¬¬äº”ç« ï¼šå¤åˆ¶" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/ch5.html"><!---->ç¬¬äº”ç« ï¼šå¤åˆ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ç¬¬å…­ç« ï¼šåˆ†åŒº" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/ch6.html"><!---->ç¬¬å…­ç« ï¼šåˆ†åŒº<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/book/ddia/ch7.html"><!---->ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="äº‹åŠ¡çš„æ£˜æ‰‹æ¦‚å¿µ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#äº‹åŠ¡çš„æ£˜æ‰‹æ¦‚å¿µ"><!---->äº‹åŠ¡çš„æ£˜æ‰‹æ¦‚å¿µ<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="ACIDçš„å«ä¹‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#acidçš„å«ä¹‰"><!---->ACIDçš„å«ä¹‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å•å¯¹è±¡å’Œå¤šå¯¹è±¡æ“ä½œ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#å•å¯¹è±¡å’Œå¤šå¯¹è±¡æ“ä½œ"><!---->å•å¯¹è±¡å’Œå¤šå¯¹è±¡æ“ä½œ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å¼±éš”ç¦»çº§åˆ«" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#å¼±éš”ç¦»çº§åˆ«"><!---->å¼±éš”ç¦»çº§åˆ«<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="è¯»å·²æäº¤" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#è¯»å·²æäº¤"><!---->è¯»å·²æäº¤<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»"><!---->å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="é˜²æ­¢ä¸¢å¤±æ›´æ–°" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#é˜²æ­¢ä¸¢å¤±æ›´æ–°"><!---->é˜²æ­¢ä¸¢å¤±æ›´æ–°<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å†™å…¥åæ–œä¸å¹»è¯»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#å†™å…¥åæ–œä¸å¹»è¯»"><!---->å†™å…¥åæ–œä¸å¹»è¯»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å¯ä¸²è¡ŒåŒ–" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#å¯ä¸²è¡ŒåŒ–"><!---->å¯ä¸²è¡ŒåŒ–<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="çœŸçš„ä¸²è¡Œæ‰§è¡Œ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#çœŸçš„ä¸²è¡Œæ‰§è¡Œ"><!---->çœŸçš„ä¸²è¡Œæ‰§è¡Œ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ä¸¤é˜¶æ®µé”å®š" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#ä¸¤é˜¶æ®µé”å®š"><!---->ä¸¤é˜¶æ®µé”å®š<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»"><!---->å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="æœ¬ç« å°ç»“" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#æœ¬ç« å°ç»“"><!---->æœ¬ç« å°ç»“<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å‚è€ƒæ–‡çŒ®" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/book/ddia/ch7.html#å‚è€ƒæ–‡çŒ®"><!---->å‚è€ƒæ–‡çŒ®<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-label="ç¬¬å…«ç« ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„éº»çƒ¦" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/ch8.html"><!---->ç¬¬å…«ç« ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„éº»çƒ¦<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ç¬¬ä¹ç« ï¼šä¸€è‡´æ€§ä¸å…±è¯†" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/ch9.html"><!---->ç¬¬ä¹ç« ï¼šä¸€è‡´æ€§ä¸å…±è¯†<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fas fa-bookmark" style=""></span><span class="vp-sidebar-title">å·ä¸‰</span><span class="vp-arrow end"></span></button><!----></section></li><li><!--[--><a aria-label="æœ¯è¯­è¡¨ ã€DRAFTã€‘" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/glossary.html"><!---->æœ¯è¯­è¡¨ ã€DRAFTã€‘<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="åè®°" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/colophon.html"><!---->åè®°<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="å¼€æºåè®®" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/ddia/LICENSE.html"><!---->å¼€æºåè®®<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a aria-label="é˜¿é‡Œäº‘å¼€å‘ç¤¾åŒºçš„ç”µå­ä¹¦ã€Šé˜¿é‡Œå·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»ã€‹æ€»ç»“" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/book/cxydzwxy.html"><span class="font-icon icon fas fa-book-atlas" style=""></span>é˜¿é‡Œäº‘å¼€å‘ç¤¾åŒºçš„ç”µå­ä¹¦ã€Šé˜¿é‡Œå·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»ã€‹æ€»ç»“<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Martin Kleppmann åŸè‘— &amp;&amp; å†¯è‹¥èˆª è¯‘è‘—</span></span><span property="author" content="Martin Kleppmann åŸè‘— &amp;&amp; å†¯è‹¥èˆª è¯‘è‘—"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-01-20T05:34:49.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/book/ddia/ch7.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 97 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT97M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#äº‹åŠ¡çš„æ£˜æ‰‹æ¦‚å¿µ">äº‹åŠ¡çš„æ£˜æ‰‹æ¦‚å¿µ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#acidçš„å«ä¹‰">ACIDçš„å«ä¹‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#å•å¯¹è±¡å’Œå¤šå¯¹è±¡æ“ä½œ">å•å¯¹è±¡å’Œå¤šå¯¹è±¡æ“ä½œ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#å¼±éš”ç¦»çº§åˆ«">å¼±éš”ç¦»çº§åˆ«</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#è¯»å·²æäº¤">è¯»å·²æäº¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»">å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#é˜²æ­¢ä¸¢å¤±æ›´æ–°">é˜²æ­¢ä¸¢å¤±æ›´æ–°</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#å†™å…¥åæ–œä¸å¹»è¯»">å†™å…¥åæ–œä¸å¹»è¯»</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#å¯ä¸²è¡ŒåŒ–">å¯ä¸²è¡ŒåŒ–</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#çœŸçš„ä¸²è¡Œæ‰§è¡Œ">çœŸçš„ä¸²è¡Œæ‰§è¡Œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#ä¸¤é˜¶æ®µé”å®š">ä¸¤é˜¶æ®µé”å®š</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»">å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#æœ¬ç« å°ç»“">æœ¬ç« å°ç»“</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="ç¬¬ä¸ƒç« -äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#ç¬¬ä¸ƒç« -äº‹åŠ¡" aria-hidden="true">#</a> ç¬¬ä¸ƒç« ï¼šäº‹åŠ¡</h1><figure><img src="/assets/ch7-7Df4S6dK.png" alt="" tabindex="0"><figcaption></figcaption></figure><blockquote><p>â€‹ ä¸€äº›ä½œè€…å£°ç§°ï¼Œæ”¯æŒé€šç”¨çš„ä¸¤é˜¶æ®µæäº¤ä»£ä»·å¤ªå¤§ï¼Œä¼šå¸¦æ¥æ€§èƒ½ä¸å¯ç”¨æ€§çš„é—®é¢˜ã€‚è®©ç¨‹åºå‘˜æ¥å¤„ç†è¿‡åº¦ä½¿ç”¨äº‹åŠ¡å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼Œæ€»æ¯”ç¼ºå°‘äº‹åŠ¡ç¼–ç¨‹å¥½å¾—å¤šã€‚</p><p>â€‹ â€”â€”James Corbettç­‰äººï¼ŒSpannerï¼šGoogleçš„å…¨çƒåˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆ2012ï¼‰</p></blockquote><hr><p>[TOC]</p><p>åœ¨æ•°æ®ç³»ç»Ÿçš„æ®‹é…·ç°å®ä¸­ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½å¯èƒ½å‡ºé”™ï¼š</p><ul><li>æ•°æ®åº“è½¯ä»¶ã€ç¡¬ä»¶å¯èƒ½åœ¨ä»»æ„æ—¶åˆ»å‘ç”Ÿæ•…éšœï¼ˆåŒ…æ‹¬å†™æ“ä½œè¿›è¡Œåˆ°ä¸€åŠæ—¶ï¼‰ã€‚</li><li>åº”ç”¨ç¨‹åºå¯èƒ½åœ¨ä»»æ„æ—¶åˆ»å´©æºƒï¼ˆåŒ…æ‹¬ä¸€ç³»åˆ—æ“ä½œçš„ä¸­é—´ï¼‰ã€‚</li><li>ç½‘ç»œä¸­æ–­å¯èƒ½ä¼šæ„å¤–åˆ‡æ–­æ•°æ®åº“ä¸åº”ç”¨çš„è¿æ¥ï¼Œæˆ–æ•°æ®åº“ä¹‹é—´çš„è¿æ¥ã€‚</li><li>å¤šä¸ªå®¢æˆ·ç«¯å¯èƒ½ä¼šåŒæ—¶å†™å…¥æ•°æ®åº“ï¼Œè¦†ç›–å½¼æ­¤çš„æ›´æ”¹ã€‚</li><li>å®¢æˆ·ç«¯å¯èƒ½è¯»å–åˆ°æ— æ„ä¹‰çš„æ•°æ®ï¼Œå› ä¸ºæ•°æ®åªæ›´æ–°äº†ä¸€éƒ¨åˆ†ã€‚</li><li>å®¢æˆ·ä¹‹é—´çš„ç«äº‰æ¡ä»¶å¯èƒ½å¯¼è‡´ä»¤äººæƒŠè®¶çš„é”™è¯¯ã€‚</li></ul><p>ä¸ºäº†å®ç°å¯é æ€§ï¼Œç³»ç»Ÿå¿…é¡»å¤„ç†è¿™äº›æ•…éšœï¼Œç¡®ä¿å®ƒä»¬ä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„ç¾éš¾æ€§æ•…éšœã€‚ä½†æ˜¯å®ç°å®¹é”™æœºåˆ¶å·¥ä½œé‡å·¨å¤§ã€‚éœ€è¦ä»”ç»†è€ƒè™‘æ‰€æœ‰å¯èƒ½å‡ºé”™çš„äº‹æƒ…ï¼Œå¹¶è¿›è¡Œå¤§é‡çš„æµ‹è¯•ï¼Œä»¥ç¡®ä¿è§£å†³æ–¹æ¡ˆçœŸæ­£ç®¡ç”¨ã€‚</p><p>â€‹ æ•°åå¹´æ¥ï¼Œ<strong>äº‹åŠ¡ï¼ˆtransactionï¼‰</strong> ä¸€ç›´æ˜¯ç®€åŒ–è¿™äº›é—®é¢˜çš„é¦–é€‰æœºåˆ¶ã€‚äº‹åŠ¡æ˜¯åº”ç”¨ç¨‹åºå°†å¤šä¸ªè¯»å†™æ“ä½œç»„åˆæˆä¸€ä¸ªé€»è¾‘å•å…ƒçš„ä¸€ç§æ–¹å¼ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œäº‹åŠ¡ä¸­çš„æ‰€æœ‰è¯»å†™æ“ä½œè¢«è§†ä½œå•ä¸ªæ“ä½œæ¥æ‰§è¡Œï¼šæ•´ä¸ªäº‹åŠ¡è¦ä¹ˆæˆåŠŸï¼ˆ<strong>æäº¤ï¼ˆcommitï¼‰</strong>ï¼‰è¦ä¹ˆå¤±è´¥ï¼ˆ<strong>ä¸­æ­¢ï¼ˆabortï¼‰</strong>ï¼Œ<strong>å›æ»šï¼ˆrollbackï¼‰</strong>ï¼‰ã€‚å¦‚æœå¤±è´¥ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å®‰å…¨åœ°é‡è¯•ã€‚å¯¹äºäº‹åŠ¡æ¥è¯´ï¼Œåº”ç”¨ç¨‹åºçš„é”™è¯¯å¤„ç†å˜å¾—ç®€å•å¤šäº†ï¼Œå› ä¸ºå®ƒä¸ç”¨å†æ‹…å¿ƒéƒ¨åˆ†å¤±è´¥çš„æƒ…å†µäº†ï¼Œå³æŸäº›æ“ä½œæˆåŠŸï¼ŒæŸäº›å¤±è´¥ï¼ˆæ— è®ºå‡ºäºä½•ç§åŸå› ï¼‰ã€‚</p><p>â€‹ å’Œäº‹åŠ¡æ‰“äº¤é“æ—¶é—´é•¿äº†ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—å®ƒæ˜¾è€Œæ˜“è§ã€‚ä½†æˆ‘ä»¬ä¸åº”å°†å…¶è§†ä¸ºç†æ‰€å½“ç„¶ã€‚äº‹åŠ¡ä¸æ˜¯å¤©ç„¶å­˜åœ¨çš„ï¼›å®ƒä»¬æ˜¯ä¸ºäº†<strong>ç®€åŒ–åº”ç”¨ç¼–ç¨‹æ¨¡å‹</strong>è€Œåˆ›å»ºçš„ã€‚é€šè¿‡ä½¿ç”¨äº‹åŠ¡ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥è‡ªç”±åœ°å¿½ç•¥æŸäº›æ½œåœ¨çš„é”™è¯¯æƒ…å†µå’Œå¹¶å‘é—®é¢˜ï¼Œå› ä¸ºæ•°æ®åº“ä¼šæ›¿åº”ç”¨å¤„ç†å¥½è¿™äº›ã€‚ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>å®‰å…¨ä¿è¯ï¼ˆsafety guaranteesï¼‰</strong>ï¼‰ã€‚</p><p>â€‹ å¹¶ä¸æ˜¯æ‰€æœ‰çš„åº”ç”¨éƒ½éœ€è¦äº‹åŠ¡ï¼Œæœ‰æ—¶å€™å¼±åŒ–äº‹åŠ¡ä¿è¯ã€æˆ–å®Œå…¨æ”¾å¼ƒäº‹åŠ¡ä¹Ÿæ˜¯æœ‰å¥½å¤„çš„ï¼ˆä¾‹å¦‚ï¼Œä¸ºäº†è·å¾—æ›´é«˜æ€§èƒ½æˆ–æ›´é«˜å¯ç”¨æ€§ï¼‰ã€‚ä¸€äº›å®‰å…¨å±æ€§ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰äº‹åŠ¡çš„æƒ…å†µä¸‹å®ç°ã€‚</p><p>â€‹ æ€æ ·çŸ¥é“ä½ æ˜¯å¦éœ€è¦äº‹åŠ¡ï¼Ÿä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆéœ€è¦ç¡®åˆ‡ç†è§£äº‹åŠ¡å¯ä»¥æä¾›çš„å®‰å…¨ä¿éšœï¼Œä»¥åŠå®ƒä»¬çš„ä»£ä»·ã€‚å°½ç®¡ä¹çœ‹äº‹åŠ¡ä¼¼ä¹å¾ˆç®€å•ï¼Œä½†å®é™…ä¸Šæœ‰è®¸å¤šå¾®å¦™ä½†é‡è¦çš„ç»†èŠ‚åœ¨èµ·ä½œç”¨ã€‚</p><p>â€‹ æœ¬ç« å°†ç ”ç©¶è®¸å¤šå‡ºé”™æ¡ˆä¾‹ï¼Œå¹¶æ¢ç´¢æ•°æ®åº“ç”¨äºé˜²èŒƒè¿™äº›é—®é¢˜çš„ç®—æ³•ã€‚å°¤å…¶ä¼šæ·±å…¥<strong>å¹¶å‘æ§åˆ¶</strong>çš„é¢†åŸŸï¼Œè®¨è®ºå„ç§å¯èƒ½å‘ç”Ÿçš„ç«äº‰æ¡ä»¶ï¼Œä»¥åŠæ•°æ®åº“å¦‚ä½•å®ç°<strong>è¯»å·²æäº¤ï¼ˆread committedï¼‰</strong>ï¼Œ<strong>å¿«ç…§éš”ç¦»ï¼ˆsnapshot isolationï¼‰</strong> å’Œ<strong>å¯ä¸²è¡ŒåŒ–ï¼ˆserializabilityï¼‰</strong> ç­‰éš”ç¦»çº§åˆ«ã€‚</p><p>â€‹ æœ¬ç« åŒæ—¶é€‚ç”¨äºå•æœºæ•°æ®åº“ä¸åˆ†å¸ƒå¼æ•°æ®åº“ï¼›åœ¨<a href="/book/ddia/ch8.html" class="">ç¬¬å…«ç« </a>ä¸­å°†é‡ç‚¹è®¨è®ºä»…å‡ºç°åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ç‰¹æ®ŠæŒ‘æˆ˜ã€‚</p><h2 id="äº‹åŠ¡çš„æ£˜æ‰‹æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡çš„æ£˜æ‰‹æ¦‚å¿µ" aria-hidden="true">#</a> äº‹åŠ¡çš„æ£˜æ‰‹æ¦‚å¿µ</h2><p>â€‹ ç°ä»Šï¼Œå‡ ä¹æ‰€æœ‰çš„å…³ç³»å‹æ•°æ®åº“å’Œä¸€äº›éå…³ç³»æ•°æ®åº“éƒ½æ”¯æŒ<strong>äº‹åŠ¡</strong>ã€‚å…¶ä¸­å¤§å¤šæ•°éµå¾ªIBM System Rï¼ˆç¬¬ä¸€ä¸ªSQLæ•°æ®åº“ï¼‰åœ¨1975å¹´å¼•å…¥çš„é£æ ¼ã€1,2,3ã€‘ã€‚40å¹´é‡Œï¼Œå°½ç®¡ä¸€äº›å®ç°ç»†èŠ‚å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ€»ä½“æ€è·¯å¤§åŒå°å¼‚ï¼šMySQLï¼ŒPostgreSQLï¼ŒOracleï¼ŒSQL Serverç­‰æ•°æ®åº“ä¸­çš„äº‹åŠ¡æ”¯æŒä¸System Rå¼‚ä¹å¯»å¸¸åœ°ç›¸ä¼¼ã€‚</p><p>2000å¹´ä»¥åï¼Œéå…³ç³»ï¼ˆNoSQLï¼‰æ•°æ®åº“å¼€å§‹æ™®åŠã€‚å®ƒä»¬çš„ç›®æ ‡æ˜¯åœ¨å…³ç³»æ•°æ®åº“çš„ç°çŠ¶åŸºç¡€ä¸Šï¼Œé€šè¿‡æä¾›æ–°çš„æ•°æ®æ¨¡å‹é€‰æ‹©ï¼ˆè¯·å‚é˜…<a href="/book/ddia/ch2.html" class="">ç¬¬äºŒç« </a>ï¼‰å¹¶é»˜è®¤åŒ…å«å¤åˆ¶ï¼ˆç¬¬äº”ç« ï¼‰å’Œåˆ†åŒºï¼ˆç¬¬å…­ç« ï¼‰æ¥è¿›ä¸€æ­¥æå‡ã€‚äº‹åŠ¡æ˜¯è¿™æ¬¡è¿åŠ¨çš„ä¸»è¦ç‰ºç‰²å“ï¼šè¿™äº›æ–°ä¸€ä»£æ•°æ®åº“ä¸­çš„è®¸å¤šæ•°æ®åº“å®Œå…¨æ”¾å¼ƒäº†äº‹åŠ¡ï¼Œæˆ–è€…é‡æ–°å®šä¹‰äº†è¿™ä¸ªè¯ï¼Œæè¿°æ¯”ä»¥å‰æ‰€ç†è§£çš„æ›´å¼±å¾—å¤šçš„ä¸€å¥—ä¿è¯ã€4ã€‘ã€‚</p><p>éšç€è¿™ç§æ–°å‹åˆ†å¸ƒå¼æ•°æ®åº“çš„ç‚’ä½œï¼Œäººä»¬æ™®éè®¤ä¸ºäº‹åŠ¡æ˜¯å¯ä¼¸ç¼©æ€§çš„å¯¹ç«‹é¢ï¼Œä»»ä½•å¤§å‹ç³»ç»Ÿéƒ½å¿…é¡»æ”¾å¼ƒäº‹åŠ¡ä»¥ä¿æŒè‰¯å¥½çš„æ€§èƒ½å’Œé«˜å¯ç”¨æ€§ã€5,6ã€‘ã€‚å¦ä¸€æ–¹é¢ï¼Œæ•°æ®åº“å‚å•†æœ‰æ—¶å°†äº‹åŠ¡ä¿è¯ä½œä¸ºâ€œé‡è¦åº”ç”¨â€å’Œâ€œæœ‰ä»·å€¼æ•°æ®â€çš„åŸºæœ¬è¦æ±‚ã€‚è¿™ä¸¤ç§è§‚ç‚¹éƒ½æ˜¯<strong>çº¯ç²¹çš„å¤¸å¼ </strong>ã€‚</p><p>äº‹å®å¹¶éå¦‚æ­¤ç®€å•ï¼šä¸å…¶ä»–æŠ€æœ¯è®¾è®¡é€‰æ‹©ä¸€æ ·ï¼Œäº‹åŠ¡æœ‰å…¶ä¼˜åŠ¿å’Œå±€é™æ€§ã€‚ä¸ºäº†ç†è§£è¿™äº›æƒè¡¡ï¼Œè®©æˆ‘ä»¬äº†è§£äº‹åŠ¡æ‰€æä¾›çš„ä¿è¯çš„ç»†èŠ‚â€”â€”æ— è®ºæ˜¯åœ¨æ­£å¸¸è¿è¡Œä¸­è¿˜æ˜¯åœ¨å„ç§æç«¯ï¼ˆä½†æ˜¯ç°å®å­˜åœ¨ï¼‰çš„æƒ…å†µä¸‹ã€‚</p><h3 id="acidçš„å«ä¹‰" tabindex="-1"><a class="header-anchor" href="#acidçš„å«ä¹‰" aria-hidden="true">#</a> ACIDçš„å«ä¹‰</h3><p>äº‹åŠ¡æ‰€æä¾›çš„å®‰å…¨ä¿è¯ï¼Œé€šå¸¸ç”±ä¼—æ‰€å‘¨çŸ¥çš„é¦–å­—æ¯ç¼©ç•¥è¯ACIDæ¥æè¿°ï¼ŒACIDä»£è¡¨<strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong>ï¼Œ<strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong>ï¼Œ<strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong> å’Œ<strong>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</strong>ã€‚å®ƒç”±Theo HÃ¤rderå’ŒAndreas Reuteräº1983å¹´æå‡ºï¼Œæ—¨åœ¨ä¸ºæ•°æ®åº“ä¸­çš„å®¹é”™æœºåˆ¶å»ºç«‹ç²¾ç¡®çš„æœ¯è¯­ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œä¸åŒæ•°æ®åº“çš„ACIDå®ç°å¹¶ä¸ç›¸åŒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°ï¼Œå…³äº<strong>éš”ç¦»æ€§</strong>çš„å«ä¹‰å°±æœ‰è®¸å¤šå«ç³Šä¸æ¸…ã€8ã€‘ã€‚é«˜å±‚æ¬¡ä¸Šçš„æƒ³æ³•å¾ˆç¾å¥½ï¼Œä½†é­”é¬¼éšè—åœ¨ç»†èŠ‚é‡Œã€‚ä»Šå¤©ï¼Œå½“ä¸€ä¸ªç³»ç»Ÿå£°ç§°è‡ªå·±â€œç¬¦åˆACIDâ€æ—¶ï¼Œå®é™…ä¸Šèƒ½æœŸå¾…çš„æ˜¯ä»€ä¹ˆä¿è¯å¹¶ä¸æ¸…æ¥šã€‚ä¸å¹¸çš„æ˜¯ï¼ŒACIDç°åœ¨å‡ ä¹å·²ç»å˜æˆäº†ä¸€ä¸ªè¥é”€æœ¯è¯­ã€‚</p><p>ï¼ˆä¸ç¬¦åˆACIDæ ‡å‡†çš„ç³»ç»Ÿæœ‰æ—¶è¢«ç§°ä¸ºBASEï¼Œå®ƒä»£è¡¨<strong>åŸºæœ¬å¯ç”¨æ€§ï¼ˆBasically Availableï¼‰</strong>ï¼Œ<strong>è½¯çŠ¶æ€ï¼ˆSoft Stateï¼‰</strong> å’Œ<strong>æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual consistencyï¼‰</strong>ã€9ã€‘ï¼Œè¿™æ¯”ACIDçš„å®šä¹‰æ›´åŠ æ¨¡ç³Šï¼Œä¼¼ä¹BASEçš„å”¯ä¸€åˆç†çš„å®šä¹‰æ˜¯â€œä¸æ˜¯ACIDâ€ï¼Œå³å®ƒå‡ ä¹å¯ä»¥ä»£è¡¨ä»»ä½•ä½ æƒ³è¦çš„ä¸œè¥¿ã€‚ï¼‰</p><p>è®©æˆ‘ä»¬æ·±å…¥äº†è§£åŸå­æ€§ï¼Œä¸€è‡´æ€§ï¼Œéš”ç¦»æ€§å’ŒæŒä¹…æ€§çš„å®šä¹‰ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬æç‚¼å‡ºäº‹åŠ¡çš„æ€æƒ³ã€‚</p><h4 id="åŸå­æ€§" tabindex="-1"><a class="header-anchor" href="#åŸå­æ€§" aria-hidden="true">#</a> åŸå­æ€§</h4><p>ä¸€èˆ¬æ¥è¯´ï¼ŒåŸå­æ˜¯æŒ‡ä¸èƒ½åˆ†è§£æˆå°éƒ¨åˆ†çš„ä¸œè¥¿ã€‚è¿™ä¸ªè¯åœ¨è®¡ç®—æœºçš„ä¸åŒé¢†åŸŸä¸­æ„å‘³ç€ç›¸ä¼¼ä½†åˆå¾®å¦™ä¸åŒçš„ä¸œè¥¿ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªåŸå­æ“ä½œï¼Œè¿™æ„å‘³ç€å¦ä¸€ä¸ªçº¿ç¨‹æ— æ³•çœ‹åˆ°è¯¥æ“ä½œçš„ä¸€åŠç»“æœã€‚ç³»ç»Ÿåªèƒ½å¤„äºæ“ä½œä¹‹å‰æˆ–æ“ä½œä¹‹åçš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯ä»‹äºä¸¤è€…ä¹‹é—´çš„çŠ¶æ€ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒACIDçš„åŸå­æ€§å¹¶<strong>ä¸</strong>æ˜¯å…³äº <strong>å¹¶å‘ï¼ˆconcurrentï¼‰</strong> çš„ã€‚å®ƒå¹¶ä¸æ˜¯åœ¨æè¿°å¦‚æœå‡ ä¸ªè¿›ç¨‹è¯•å›¾åŒæ—¶è®¿é—®ç›¸åŒçš„æ•°æ®ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œè¿™ç§æƒ…å†µåŒ…å«åœ¨ç¼©å†™ <em><strong>I</strong></em> ä¸­ï¼Œå³<a href="#%E9%9A%94%E7%A6%BB%E6%80%A7"><strong>éš”ç¦»æ€§</strong></a>ã€‚</p><p>ACIDçš„åŸå­æ€§æè¿°äº†å½“å®¢æˆ·æƒ³è¿›è¡Œå¤šæ¬¡å†™å…¥ï¼Œä½†åœ¨ä¸€äº›å†™æ“ä½œå¤„ç†å®Œä¹‹åå‡ºç°æ•…éšœçš„æƒ…å†µã€‚ä¾‹å¦‚è¿›ç¨‹å´©æºƒï¼Œç½‘ç»œè¿æ¥ä¸­æ–­ï¼Œç£ç›˜å˜æ»¡æˆ–è€…æŸç§å®Œæ•´æ€§çº¦æŸè¢«è¿åã€‚å¦‚æœè¿™äº›å†™æ“ä½œè¢«åˆ†ç»„åˆ°ä¸€ä¸ªåŸå­äº‹åŠ¡ä¸­ï¼Œå¹¶ä¸”è¯¥äº‹åŠ¡ç”±äºé”™è¯¯è€Œä¸èƒ½å®Œæˆï¼ˆæäº¤ï¼‰ï¼Œåˆ™è¯¥äº‹åŠ¡å°†è¢«ä¸­æ­¢ï¼Œå¹¶ä¸”æ•°æ®åº“å¿…é¡»ä¸¢å¼ƒæˆ–æ’¤æ¶ˆè¯¥äº‹åŠ¡ä¸­è¿„ä»Šä¸ºæ­¢æ‰€åšçš„ä»»ä½•å†™å…¥ã€‚</p><p>å¦‚æœæ²¡æœ‰åŸå­æ€§ï¼Œåœ¨å¤šå¤„æ›´æ”¹è¿›è¡Œåˆ°ä¸€åŠæ—¶å‘ç”Ÿé”™è¯¯ï¼Œå¾ˆéš¾çŸ¥é“å“ªäº›æ›´æ”¹å·²ç»ç”Ÿæ•ˆï¼Œå“ªäº›æ²¡æœ‰ç”Ÿæ•ˆã€‚è¯¥åº”ç”¨ç¨‹åºå¯ä»¥å†è¯•ä¸€æ¬¡ï¼Œä½†å†’ç€è¿›è¡Œä¸¤æ¬¡ç›¸åŒå˜æ›´çš„é£é™©ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®é‡å¤æˆ–é”™è¯¯çš„æ•°æ®ã€‚åŸå­æ€§ç®€åŒ–äº†è¿™ä¸ªé—®é¢˜ï¼šå¦‚æœäº‹åŠ¡è¢«<strong>ä¸­æ­¢ï¼ˆabortï¼‰</strong>ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç¡®å®šå®ƒæ²¡æœ‰æ”¹å˜ä»»ä½•ä¸œè¥¿ï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨åœ°é‡è¯•ã€‚</p><p>ACIDåŸå­æ€§çš„å®šä¹‰ç‰¹å¾æ˜¯ï¼š<strong>èƒ½å¤Ÿåœ¨é”™è¯¯æ—¶ä¸­æ­¢äº‹åŠ¡ï¼Œä¸¢å¼ƒè¯¥äº‹åŠ¡è¿›è¡Œçš„æ‰€æœ‰å†™å…¥å˜æ›´çš„èƒ½åŠ›ã€‚</strong> æˆ–è®¸ <strong>å¯ä¸­æ­¢æ€§ï¼ˆabortabilityï¼‰</strong> æ˜¯æ›´å¥½çš„æœ¯è¯­ï¼Œä½†æœ¬ä¹¦å°†ç»§ç»­ä½¿ç”¨åŸå­æ€§ï¼Œå› ä¸ºè¿™æ˜¯æƒ¯ç”¨è¯ã€‚</p><h4 id="ä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#ä¸€è‡´æ€§" aria-hidden="true">#</a> ä¸€è‡´æ€§</h4><p>ä¸€è‡´æ€§è¿™ä¸ªè¯è¢«èµ‹äºˆå¤ªå¤šå«ä¹‰ï¼š</p><ul><li>åœ¨<a href="/book/ddia/ch5.html" class="">ç¬¬äº”ç« </a>ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å‰¯æœ¬ä¸€è‡´æ€§ï¼Œä»¥åŠå¼‚æ­¥å¤åˆ¶ç³»ç»Ÿä¸­çš„æœ€ç»ˆä¸€è‡´æ€§é—®é¢˜ï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch5.html#%E5%A4%8D%E5%88%B6%E5%BB%B6%E8%BF%9F%E9%97%AE%E9%A2%98" class="">å¤åˆ¶å»¶è¿Ÿé—®é¢˜</a>â€ï¼‰ã€‚</li><li><a href="/book/ddia/ch6.html#%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C" class="">ä¸€è‡´æ€§å“ˆå¸Œï¼ˆConsistency Hashingï¼‰</a>)æ˜¯æŸäº›ç³»ç»Ÿç”¨äºé‡æ–°åˆ†åŒºçš„ä¸€ç§åˆ†åŒºæ–¹æ³•ã€‚</li><li>åœ¨<a href="/book/ddia/ch9.html#CAP%E5%AE%9A%E7%90%86" class="">CAPå®šç†</a>ä¸­ï¼Œä¸€è‡´æ€§ä¸€è¯ç”¨äºè¡¨ç¤º<a href="/book/ddia/ch9.html#%E7%BA%BF%E6%80%A7%E4%B8%80%E8%87%B4%E6%80%A7" class="">çº¿æ€§ä¸€è‡´æ€§</a>ã€‚</li><li>åœ¨ACIDçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ<strong>ä¸€è‡´æ€§</strong>æ˜¯æŒ‡æ•°æ®åº“åœ¨åº”ç”¨ç¨‹åºçš„ç‰¹å®šæ¦‚å¿µä¸­å¤„äºâ€œè‰¯å¥½çŠ¶æ€â€ã€‚</li></ul><p>å¾ˆä¸å¹¸ï¼Œè¿™ä¸€ä¸ªè¯å°±è‡³å°‘æœ‰å››ç§ä¸åŒçš„å«ä¹‰ã€‚</p><p>ACIDä¸€è‡´æ€§çš„æ¦‚å¿µæ˜¯ï¼Œ<strong>å¯¹æ•°æ®çš„ä¸€ç»„ç‰¹å®šçº¦æŸå¿…é¡»å§‹ç»ˆæˆç«‹</strong>ã€‚å³<strong>ä¸å˜é‡ï¼ˆinvariantsï¼‰</strong>ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¼šè®¡ç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰è´¦æˆ·æ•´ä½“ä¸Šå¿…é¡»å€Ÿè´·ç›¸æŠµã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡å¼€å§‹äºä¸€ä¸ªæ»¡è¶³è¿™äº›ä¸å˜é‡çš„æœ‰æ•ˆæ•°æ®åº“ï¼Œä¸”åœ¨äº‹åŠ¡å¤„ç†æœŸé—´çš„ä»»ä½•å†™å…¥æ“ä½œéƒ½ä¿æŒè¿™ç§æœ‰æ•ˆæ€§ï¼Œé‚£ä¹ˆå¯ä»¥ç¡®å®šï¼Œä¸å˜é‡æ€»æ˜¯æ»¡è¶³çš„ã€‚</p><p>ä½†æ˜¯ï¼Œä¸€è‡´æ€§çš„è¿™ç§æ¦‚å¿µå–å†³äºåº”ç”¨ç¨‹åºå¯¹ä¸å˜é‡çš„ç†è§£ï¼Œåº”ç”¨ç¨‹åºè´Ÿè´£æ­£ç¡®å®šä¹‰å®ƒçš„äº‹åŠ¡ï¼Œå¹¶ä¿æŒä¸€è‡´æ€§ã€‚è¿™å¹¶ä¸æ˜¯æ•°æ®åº“å¯ä»¥ä¿è¯çš„äº‹æƒ…ï¼šå¦‚æœä½ å†™å…¥è¿åä¸å˜é‡çš„è„æ•°æ®ï¼Œæ•°æ®åº“ä¹Ÿæ— æ³•é˜»æ­¢ä½ ã€‚ ï¼ˆä¸€äº›ç‰¹å®šç±»å‹çš„ä¸å˜é‡å¯ä»¥ç”±æ•°æ®åº“æ£€æŸ¥ï¼Œä¾‹å¦‚å¤–é”®çº¦æŸæˆ–å”¯ä¸€çº¦æŸï¼Œä½†æ˜¯ä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯åº”ç”¨ç¨‹åºæ¥å®šä¹‰ä»€ä¹ˆæ ·çš„æ•°æ®æ˜¯æœ‰æ•ˆçš„ï¼Œä»€ä¹ˆæ ·æ˜¯æ— æ•ˆçš„ã€‚â€”â€” æ•°æ®åº“åªç®¡å­˜å‚¨ã€‚ï¼‰</p><p>åŸå­æ€§ï¼Œéš”ç¦»æ€§å’ŒæŒä¹…æ€§æ˜¯æ•°æ®åº“çš„å±æ€§ï¼Œè€Œä¸€è‡´æ€§ï¼ˆåœ¨ACIDæ„ä¹‰ä¸Šï¼‰æ˜¯åº”ç”¨ç¨‹åºçš„å±æ€§ã€‚åº”ç”¨å¯èƒ½ä¾èµ–æ•°æ®åº“çš„åŸå­æ€§å’Œéš”ç¦»å±æ€§æ¥å®ç°ä¸€è‡´æ€§ï¼Œä½†è¿™å¹¶ä¸ä»…å–å†³äºæ•°æ®åº“ã€‚å› æ­¤ï¼Œå­—æ¯Cä¸å±äºACID<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>ã€‚</p><h4 id="éš”ç¦»æ€§" tabindex="-1"><a class="header-anchor" href="#éš”ç¦»æ€§" aria-hidden="true">#</a> éš”ç¦»æ€§</h4><p>å¤§å¤šæ•°æ•°æ®åº“éƒ½ä¼šåŒæ—¶è¢«å¤šä¸ªå®¢æˆ·ç«¯è®¿é—®ã€‚å¦‚æœå®ƒä»¬å„è‡ªè¯»å†™æ•°æ®åº“çš„ä¸åŒéƒ¨åˆ†ï¼Œè¿™æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœå®ƒä»¬è®¿é—®ç›¸åŒçš„æ•°æ®åº“è®°å½•ï¼Œåˆ™å¯èƒ½ä¼šé‡åˆ°<strong>å¹¶å‘</strong>é—®é¢˜ï¼ˆ<strong>ç«äº‰æ¡ä»¶ï¼ˆrace conditionsï¼‰</strong>ï¼‰ã€‚</p><p><a href="./img/fig7-1.png">å›¾7-1</a>æ˜¯è¿™ç±»é—®é¢˜çš„ä¸€ä¸ªç®€å•ä¾‹å­ã€‚å‡è®¾ä½ æœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯åŒæ—¶åœ¨æ•°æ®åº“ä¸­å¢é•¿ä¸€ä¸ªè®¡æ•°å™¨ã€‚ï¼ˆå‡è®¾æ•°æ®åº“æ²¡æœ‰å†…å»ºçš„è‡ªå¢æ“ä½œï¼‰æ¯ä¸ªå®¢æˆ·ç«¯éœ€è¦è¯»å–è®¡æ•°å™¨çš„å½“å‰å€¼ï¼ŒåŠ  1 ï¼Œå†å›å†™æ–°å€¼ã€‚<a href="./img/fig7-1.png">å›¾7-1</a> ä¸­ï¼Œå› ä¸ºå‘ç”Ÿäº†ä¸¤æ¬¡å¢é•¿ï¼Œè®¡æ•°å™¨åº”è¯¥ä»42å¢è‡³44ï¼›ä½†ç”±äºç«æ€æ¡ä»¶ï¼Œå®é™…ä¸Šåªå¢è‡³ 43 ã€‚</p><p>ACIDæ„ä¹‰ä¸Šçš„éš”ç¦»æ€§æ„å‘³ç€ï¼Œ<strong>åŒæ—¶æ‰§è¡Œçš„äº‹åŠ¡æ˜¯ç›¸äº’éš”ç¦»çš„</strong>ï¼šå®ƒä»¬ä¸èƒ½ç›¸äº’å†’çŠ¯ã€‚ä¼ ç»Ÿçš„æ•°æ®åº“æ•™ç§‘ä¹¦å°†éš”ç¦»æ€§å½¢å¼åŒ–ä¸º<strong>å¯ä¸²è¡ŒåŒ–ï¼ˆSerializabilityï¼‰</strong>ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªäº‹åŠ¡å¯ä»¥å‡è£…å®ƒæ˜¯å”¯ä¸€åœ¨æ•´ä¸ªæ•°æ®åº“ä¸Šè¿è¡Œçš„äº‹åŠ¡ã€‚æ•°æ®åº“ç¡®ä¿å½“å¤šä¸ªäº‹åŠ¡è¢«æäº¤æ—¶ï¼Œç»“æœä¸å®ƒä»¬ä¸²è¡Œè¿è¡Œï¼ˆä¸€ä¸ªæ¥ä¸€ä¸ªï¼‰æ˜¯ä¸€æ ·çš„ï¼Œå°½ç®¡å®é™…ä¸Šå®ƒä»¬å¯èƒ½æ˜¯å¹¶å‘è¿è¡Œçš„ã€10ã€‘ã€‚</p><figure><img src="/assets/fig7-1-RcGi4SD9.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-1 ä¸¤ä¸ªå®¢æˆ·ä¹‹é—´çš„ç«äº‰çŠ¶æ€åŒæ—¶é€’å¢è®¡æ•°å™¨</strong></p><p>ç„¶è€Œå®è·µä¸­å¾ˆå°‘ä¼šä½¿ç”¨å¯ä¸²è¡Œçš„éš”ç¦»ï¼Œå› ä¸ºå®ƒæœ‰æ€§èƒ½æŸå¤±ã€‚ä¸€äº›æµè¡Œçš„æ•°æ®åº“å¦‚Oracle 11gï¼Œç”šè‡³æ²¡æœ‰å®ç°å®ƒã€‚åœ¨Oracleä¸­æœ‰ä¸€ä¸ªåä¸ºâ€œå¯ä¸²è¡Œçš„â€éš”ç¦»çº§åˆ«ï¼Œä½†å®é™…ä¸Šå®ƒå®ç°äº†ä¸€ç§å«åš<strong>å¿«ç…§éš”ç¦»ï¼ˆsnapshot isolationï¼‰</strong> çš„åŠŸèƒ½ï¼Œ<strong>è¿™æ˜¯ä¸€ç§æ¯”å¯ä¸²è¡ŒåŒ–æ›´å¼±çš„ä¿è¯</strong>ã€8,11ã€‘ã€‚æˆ‘ä»¬å°†åœ¨â€œ<a href="#%E5%BC%B1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB">å¼±éš”ç¦»çº§åˆ«</a>â€ä¸­ç ”ç©¶å¿«ç…§éš”ç¦»å’Œå…¶ä»–å½¢å¼çš„éš”ç¦»ã€‚</p><h4 id="æŒä¹…æ€§" tabindex="-1"><a class="header-anchor" href="#æŒä¹…æ€§" aria-hidden="true">#</a> æŒä¹…æ€§</h4><p>æ•°æ®åº“ç³»ç»Ÿçš„ç›®çš„æ˜¯ï¼Œæä¾›ä¸€ä¸ªå®‰å…¨çš„åœ°æ–¹å­˜å‚¨æ•°æ®ï¼Œè€Œä¸ç”¨æ‹…å¿ƒä¸¢å¤±ã€‚<strong>æŒä¹…æ€§</strong> æ˜¯ä¸€ä¸ªæ‰¿è¯ºï¼Œå³ä¸€æ—¦äº‹åŠ¡æˆåŠŸå®Œæˆï¼Œå³ä½¿å‘ç”Ÿç¡¬ä»¶æ•…éšœæˆ–æ•°æ®åº“å´©æºƒï¼Œå†™å…¥çš„ä»»ä½•æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p><p>åœ¨å•èŠ‚ç‚¹æ•°æ®åº“ä¸­ï¼ŒæŒä¹…æ€§é€šå¸¸æ„å‘³ç€æ•°æ®å·²è¢«å†™å…¥éæ˜“å¤±æ€§å­˜å‚¨è®¾å¤‡ï¼Œå¦‚ç¡¬ç›˜æˆ–SSDã€‚å®ƒé€šå¸¸è¿˜åŒ…æ‹¬é¢„å†™æ—¥å¿—æˆ–ç±»ä¼¼çš„æ–‡ä»¶ï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch3.html#%E8%AE%A9B%E6%A0%91%E6%9B%B4%E5%8F%AF%E9%9D%A0" class="">è®©Bæ ‘æ›´å¯é </a>â€ï¼‰ï¼Œä»¥ä¾¿åœ¨ç£ç›˜ä¸Šçš„æ•°æ®ç»“æ„æŸåæ—¶è¿›è¡Œæ¢å¤ã€‚åœ¨å¸¦å¤åˆ¶çš„æ•°æ®åº“ä¸­ï¼ŒæŒä¹…æ€§å¯èƒ½æ„å‘³ç€æ•°æ®å·²æˆåŠŸå¤åˆ¶åˆ°ä¸€äº›èŠ‚ç‚¹ã€‚ä¸ºäº†æä¾›æŒä¹…æ€§ä¿è¯ï¼Œæ•°æ®åº“å¿…é¡»ç­‰åˆ°è¿™äº›å†™å…¥æˆ–å¤åˆ¶å®Œæˆåï¼Œæ‰èƒ½æŠ¥å‘Šäº‹åŠ¡æˆåŠŸæäº¤ã€‚</p><p>å¦‚â€œ<a href="/book/ddia/ch1.html#%E5%8F%AF%E9%9D%A0%E6%80%A7" class="">å¯é æ€§</a>â€ä¸€èŠ‚æ‰€è¿°ï¼Œ<strong>å®Œç¾çš„æŒä¹…æ€§æ˜¯ä¸å­˜åœ¨çš„</strong> ï¼šå¦‚æœæ‰€æœ‰ç¡¬ç›˜å’Œæ‰€æœ‰å¤‡ä»½åŒæ—¶è¢«é”€æ¯ï¼Œé‚£æ˜¾ç„¶æ²¡æœ‰ä»»ä½•æ•°æ®åº“èƒ½æ•‘å¾—äº†ä½ ã€‚</p><blockquote><h4 id="å¤åˆ¶ä¸æŒä¹…æ€§" tabindex="-1"><a class="header-anchor" href="#å¤åˆ¶ä¸æŒä¹…æ€§" aria-hidden="true">#</a> å¤åˆ¶ä¸æŒä¹…æ€§</h4><p>åœ¨å†å²ä¸Šï¼ŒæŒä¹…æ€§æ„å‘³ç€å†™å…¥å½’æ¡£ç£å¸¦ã€‚åæ¥å®ƒè¢«ç†è§£ä¸ºå†™å…¥ç£ç›˜æˆ–SSDã€‚å†åæ¥å®ƒåˆæœ‰äº†æ–°çš„å†…æ¶µå³â€œå¤åˆ¶ï¼ˆreplicationï¼‰â€ã€‚å“ªç§å®ç°æ›´å¥½ä¸€äº›ï¼Ÿ</p><p>çœŸç›¸æ˜¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯å®Œç¾çš„ï¼š</p><ul><li>å¦‚æœä½ å†™å…¥ç£ç›˜ç„¶åæœºå™¨å®•æœºï¼Œå³ä½¿æ•°æ®æ²¡æœ‰ä¸¢å¤±ï¼Œåœ¨ä¿®å¤æœºå™¨æˆ–å°†ç£ç›˜è½¬ç§»åˆ°å…¶ä»–æœºå™¨ä¹‹å‰ï¼Œä¹Ÿæ˜¯æ— æ³•è®¿é—®çš„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¤åˆ¶ç³»ç»Ÿå¯ä»¥ä¿æŒå¯ç”¨æ€§ã€‚</li><li>ä¸€ä¸ªç›¸å…³æ€§æ•…éšœï¼ˆåœç”µï¼Œæˆ–ä¸€ä¸ªç‰¹å®šè¾“å…¥å¯¼è‡´æ‰€æœ‰èŠ‚ç‚¹å´©æºƒçš„Bugï¼‰å¯èƒ½ä¼šä¸€æ¬¡æ€§æ‘§æ¯æ‰€æœ‰å‰¯æœ¬ï¼ˆè¯·å‚é˜…ã€Œ<a href="/book/ddia/ch1.html#%E5%8F%AF%E9%9D%A0%E6%80%A7" class="">å¯é æ€§</a>ã€ï¼‰ï¼Œä»»ä½•ä»…å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ•°æ®éƒ½ä¼šä¸¢å¤±ï¼Œæ•…å†…å­˜æ•°æ®åº“ä»ç„¶è¦å’Œç£ç›˜å†™å…¥æ‰“äº¤é“ã€‚</li><li>åœ¨å¼‚æ­¥å¤åˆ¶ç³»ç»Ÿä¸­ï¼Œå½“ä¸»åº“ä¸å¯ç”¨æ—¶ï¼Œæœ€è¿‘çš„å†™å…¥æ“ä½œå¯èƒ½ä¼šä¸¢å¤±ï¼ˆè¯·å‚é˜…ã€Œ<a href="/book/ddia/ch5.html#%E5%A4%84%E7%90%86%E8%8A%82%E7%82%B9%E5%AE%95%E6%9C%BA" class="">å¤„ç†èŠ‚ç‚¹å®•æœº</a>ã€ï¼‰ã€‚</li><li>å½“ç”µæºçªç„¶æ–­ç”µæ—¶ï¼Œç‰¹åˆ«æ˜¯å›ºæ€ç¡¬ç›˜ï¼Œæœ‰è¯æ®æ˜¾ç¤ºæœ‰æ—¶ä¼šè¿ååº”æœ‰çš„ä¿è¯ï¼šç”šè‡³fsyncä¹Ÿä¸èƒ½ä¿è¯æ­£å¸¸å·¥ä½œã€12ã€‘ã€‚ç¡¬ç›˜å›ºä»¶å¯èƒ½æœ‰é”™è¯¯ï¼Œå°±åƒä»»ä½•å…¶ä»–ç±»å‹çš„è½¯ä»¶ä¸€æ ·ã€13,14ã€‘ã€‚</li><li>å­˜å‚¨å¼•æ“å’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„å¾®å¦™äº¤äº’å¯èƒ½ä¼šå¯¼è‡´éš¾ä»¥è¿½è¸ªçš„é”™è¯¯ï¼Œå¹¶å¯èƒ½å¯¼è‡´ç£ç›˜ä¸Šçš„æ–‡ä»¶åœ¨å´©æºƒåè¢«æŸåã€15,16ã€‘ã€‚</li><li>ç£ç›˜ä¸Šçš„æ•°æ®å¯èƒ½ä¼šåœ¨æ²¡æœ‰æ£€æµ‹åˆ°çš„æƒ…å†µä¸‹é€æ¸æŸåã€17ã€‘ã€‚å¦‚æœæ•°æ®å·²æŸåä¸€æ®µæ—¶é—´ï¼Œå‰¯æœ¬å’Œæœ€è¿‘çš„å¤‡ä»½ä¹Ÿå¯èƒ½æŸåã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å°è¯•ä»å†å²å¤‡ä»½ä¸­æ¢å¤æ•°æ®ã€‚</li><li>ä¸€é¡¹å…³äºå›ºæ€ç¡¬ç›˜çš„ç ”ç©¶å‘ç°ï¼Œåœ¨è¿è¡Œçš„å‰å››å¹´ä¸­ï¼Œ30ï¼…åˆ°80ï¼…çš„ç¡¬ç›˜ä¼šäº§ç”Ÿè‡³å°‘ä¸€ä¸ªåå—ã€18ã€‘ã€‚ç›¸æ¯”å›ºæ€ç¡¬ç›˜ï¼Œç£ç›˜çš„åé“ç‡è¾ƒä½ï¼Œä½†å®Œå…¨å¤±æ•ˆçš„æ¦‚ç‡æ›´é«˜ã€‚</li><li>å¦‚æœSSDæ–­ç”µï¼Œå¯èƒ½ä¼šåœ¨å‡ å‘¨å†…å¼€å§‹ä¸¢å¤±æ•°æ®ï¼Œå…·ä½“å–å†³äºæ¸©åº¦ã€19ã€‘ã€‚</li></ul><p>åœ¨å®è·µä¸­ï¼Œæ²¡æœ‰ä¸€ç§æŠ€æœ¯å¯ä»¥æä¾›ç»å¯¹ä¿è¯ã€‚åªæœ‰å„ç§é™ä½é£é™©çš„æŠ€æœ¯ï¼ŒåŒ…æ‹¬å†™å…¥ç£ç›˜ï¼Œå¤åˆ¶åˆ°è¿œç¨‹æœºå™¨å’Œå¤‡ä»½â€”â€”å®ƒä»¬å¯ä»¥ä¸”åº”è¯¥ä¸€èµ·ä½¿ç”¨ã€‚ä¸å¾€å¸¸ä¸€æ ·ï¼Œæœ€å¥½æŠ±ç€æ€€ç–‘çš„æ€åº¦æ¥å—ä»»ä½•ç†è®ºä¸Šçš„â€œä¿è¯â€ã€‚</p></blockquote><h3 id="å•å¯¹è±¡å’Œå¤šå¯¹è±¡æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#å•å¯¹è±¡å’Œå¤šå¯¹è±¡æ“ä½œ" aria-hidden="true">#</a> å•å¯¹è±¡å’Œå¤šå¯¹è±¡æ“ä½œ</h3><p>å›é¡¾ä¸€ä¸‹ï¼Œåœ¨ACIDä¸­ï¼ŒåŸå­æ€§å’Œéš”ç¦»æ€§æè¿°äº†å®¢æˆ·ç«¯åœ¨åŒä¸€äº‹åŠ¡ä¸­æ‰§è¡Œå¤šæ¬¡å†™å…¥æ—¶ï¼Œæ•°æ®åº“åº”è¯¥åšçš„äº‹æƒ…ï¼š</p><p><em><strong>åŸå­æ€§</strong></em></p><p>å¦‚æœåœ¨ä¸€ç³»åˆ—å†™æ“ä½œçš„ä¸­é€”å‘ç”Ÿé”™è¯¯ï¼Œåˆ™åº”ä¸­æ­¢äº‹åŠ¡å¤„ç†ï¼Œå¹¶ä¸¢å¼ƒå½“å‰äº‹åŠ¡çš„æ‰€æœ‰å†™å…¥ã€‚æ¢å¥è¯è¯´ï¼Œæ•°æ®åº“å…å»äº†ç”¨æˆ·å¯¹éƒ¨åˆ†å¤±è´¥çš„æ‹…å¿§â€”â€”é€šè¿‡æä¾›â€œ<strong>å®ä¸ºç‰ç¢ï¼Œä¸ä¸ºç“¦å…¨ï¼ˆall-or-nothingï¼‰</strong>â€çš„ä¿è¯ã€‚</p><p><em><strong>éš”ç¦»æ€§</strong></em></p><p>åŒæ—¶è¿è¡Œçš„äº‹åŠ¡ä¸åº”è¯¥äº’ç›¸å¹²æ‰°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªäº‹åŠ¡è¿›è¡Œå¤šæ¬¡å†™å…¥ï¼Œåˆ™å¦ä¸€ä¸ªäº‹åŠ¡è¦ä¹ˆçœ‹åˆ°å…¨éƒ¨å†™å…¥ç»“æœï¼Œè¦ä¹ˆä»€ä¹ˆéƒ½çœ‹ä¸åˆ°ï¼Œä½†ä¸åº”è¯¥æ˜¯ä¸€äº›å­é›†ã€‚</p><p>è¿™äº›å®šä¹‰å‡è®¾ä½ æƒ³åŒæ—¶ä¿®æ”¹å¤šä¸ªå¯¹è±¡ï¼ˆè¡Œï¼Œæ–‡æ¡£ï¼Œè®°å½•ï¼‰ã€‚é€šå¸¸éœ€è¦<strong>å¤šå¯¹è±¡äº‹åŠ¡ï¼ˆmulti-object transactionï¼‰</strong> æ¥ä¿æŒå¤šå—æ•°æ®åŒæ­¥ã€‚<a href="./img/fig7-2.png">å›¾7-2</a>å±•ç¤ºäº†ä¸€ä¸ªæ¥è‡ªç”µé‚®åº”ç”¨çš„ä¾‹å­ã€‚æ‰§è¡Œä»¥ä¸‹æŸ¥è¯¢æ¥æ˜¾ç¤ºç”¨æˆ·æœªè¯»é‚®ä»¶æ•°é‡ï¼š</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> COUNTï¼ˆ<span class="token operator">*</span>ï¼‰<span class="token keyword">FROM</span> emails <span class="token keyword">WHERE</span> recipient_id <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">AND</span> unread_flag <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><p>ä½†å¦‚æœé‚®ä»¶å¤ªå¤šï¼Œä½ å¯èƒ½ä¼šè§‰å¾—è¿™ä¸ªæŸ¥è¯¢å¤ªæ…¢ï¼Œå¹¶å†³å®šç”¨å•ç‹¬çš„å­—æ®µå­˜å‚¨æœªè¯»é‚®ä»¶çš„æ•°é‡ï¼ˆä¸€ç§åè§„èŒƒåŒ–ï¼‰ã€‚ç°åœ¨æ¯å½“ä¸€ä¸ªæ–°æ¶ˆæ¯å†™å…¥æ—¶ï¼Œå¿…é¡»ä¹Ÿå¢é•¿æœªè¯»è®¡æ•°å™¨ï¼Œæ¯å½“ä¸€ä¸ªæ¶ˆæ¯è¢«æ ‡è®°ä¸ºå·²è¯»æ—¶ï¼Œä¹Ÿå¿…é¡»å‡å°‘æœªè¯»è®¡æ•°å™¨ã€‚</p><p>åœ¨<a href="./img/fig7-2.png">å›¾7-2</a>ä¸­ï¼Œç”¨æˆ·2 é‡åˆ°å¼‚å¸¸æƒ…å†µï¼šé‚®ä»¶åˆ—è¡¨é‡Œæ˜¾ç¤ºæœ‰æœªè¯»æ¶ˆæ¯ï¼Œä½†è®¡æ•°å™¨æ˜¾ç¤ºä¸ºé›¶æœªè¯»æ¶ˆæ¯ï¼Œå› ä¸ºè®¡æ•°å™¨å¢é•¿è¿˜æ²¡æœ‰å‘ç”Ÿ<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup>ã€‚éš”ç¦»æ€§å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼šé€šè¿‡ç¡®ä¿ç”¨æˆ·2 è¦ä¹ˆåŒæ—¶çœ‹åˆ°æ–°é‚®ä»¶å’Œå¢é•¿åçš„è®¡æ•°å™¨ï¼Œè¦ä¹ˆéƒ½çœ‹ä¸åˆ°ã€‚åæ­£ä¸ä¼šçœ‹åˆ°æ‰§è¡Œåˆ°ä¸€åŠçš„ä¸­é—´ç»“æœã€‚</p><figure><img src="/assets/fig7-2-pXKCPr9q.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-2 è¿åéš”ç¦»æ€§ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡çš„æœªè¢«æ‰§è¡Œçš„å†™å…¥ï¼ˆâ€œè„è¯»â€ï¼‰ã€‚</strong></p><p><a href="./img/fig7-3.png">å›¾7-3</a>è¯´æ˜äº†å¯¹åŸå­æ€§çš„éœ€æ±‚ï¼šå¦‚æœåœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œé‚®ç®±å’Œæœªè¯»è®¡æ•°å™¨çš„å†…å®¹å¯èƒ½ä¼šå¤±å»åŒæ­¥ã€‚åœ¨åŸå­äº‹åŠ¡ä¸­ï¼Œå¦‚æœå¯¹è®¡æ•°å™¨çš„æ›´æ–°å¤±è´¥ï¼Œäº‹åŠ¡å°†è¢«ä¸­æ­¢ï¼Œå¹¶ä¸”æ’å…¥çš„ç”µå­é‚®ä»¶å°†è¢«å›æ»šã€‚</p><figure><img src="/assets/fig7-3-9tRhZEP2.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-3 åŸå­æ€§ç¡®ä¿å‘ç”Ÿé”™è¯¯æ—¶ï¼Œäº‹åŠ¡å…ˆå‰çš„ä»»ä½•å†™å…¥éƒ½ä¼šè¢«æ’¤æ¶ˆï¼Œä»¥é¿å…çŠ¶æ€ä¸ä¸€è‡´</strong></p><p>å¤šå¯¹è±¡äº‹åŠ¡éœ€è¦æŸç§æ–¹å¼æ¥ç¡®å®šå“ªäº›è¯»å†™æ“ä½œå±äºåŒä¸€ä¸ªäº‹åŠ¡ã€‚åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œé€šå¸¸åŸºäºå®¢æˆ·ç«¯ä¸æ•°æ®åº“æœåŠ¡å™¨çš„TCPè¿æ¥ï¼šåœ¨ä»»ä½•ç‰¹å®šè¿æ¥ä¸Šï¼Œ<code>BEGIN TRANSACTION</code> å’Œ <code>COMMIT</code> è¯­å¥ä¹‹é—´çš„æ‰€æœ‰å†…å®¹ï¼Œè¢«è®¤ä¸ºæ˜¯åŒä¸€äº‹åŠ¡çš„ä¸€éƒ¨åˆ†.<sup class="footnote-ref"><a href="#footnote3">[3]</a><a class="footnote-anchor" id="footnote-ref3"></a></sup></p><p>å¦ä¸€æ–¹é¢ï¼Œè®¸å¤šéå…³ç³»æ•°æ®åº“å¹¶æ²¡æœ‰å°†è¿™äº›æ“ä½œç»„åˆåœ¨ä¸€èµ·çš„æ–¹æ³•ã€‚å³ä½¿å­˜åœ¨å¤šå¯¹è±¡APIï¼ˆä¾‹å¦‚ï¼ŒæŸé”®å€¼å­˜å‚¨å¯èƒ½å…·æœ‰åœ¨ä¸€ä¸ªæ“ä½œä¸­æ›´æ–°å‡ ä¸ªé”®çš„multi-putæ“ä½œï¼‰ï¼Œä½†è¿™å¹¶ä¸ä¸€å®šæ„å‘³ç€å®ƒå…·æœ‰äº‹åŠ¡è¯­ä¹‰ï¼šè¯¥å‘½ä»¤å¯èƒ½åœ¨ä¸€äº›é”®ä¸ŠæˆåŠŸï¼Œåœ¨å…¶ä»–çš„é”®ä¸Šå¤±è´¥ï¼Œä½¿æ•°æ®åº“å¤„äºéƒ¨åˆ†æ›´æ–°çš„çŠ¶æ€ã€‚</p><h4 id="å•å¯¹è±¡å†™å…¥" tabindex="-1"><a class="header-anchor" href="#å•å¯¹è±¡å†™å…¥" aria-hidden="true">#</a> å•å¯¹è±¡å†™å…¥</h4><p>å½“å•ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒåŸå­æ€§å’Œéš”ç¦»æ€§ä¹Ÿæ˜¯é€‚ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æ­£åœ¨å‘æ•°æ®åº“å†™å…¥ä¸€ä¸ª 20 KBçš„ JSONæ–‡æ¡£ï¼š</p><ul><li>å¦‚æœåœ¨å‘é€ç¬¬ä¸€ä¸ª10 KBä¹‹åç½‘ç»œè¿æ¥ä¸­æ–­ï¼Œæ•°æ®åº“æ˜¯å¦å­˜å‚¨äº†ä¸å¯è§£æçš„10KB JSONç‰‡æ®µï¼Ÿ</li><li>å¦‚æœåœ¨æ•°æ®åº“æ­£åœ¨è¦†ç›–ç£ç›˜ä¸Šçš„å‰ä¸€ä¸ªå€¼çš„è¿‡ç¨‹ä¸­ç”µæºå‘ç”Ÿæ•…éšœï¼Œæ˜¯å¦æœ€ç»ˆå°†æ–°æ—§å€¼æ‹¼æ¥åœ¨ä¸€èµ·ï¼Ÿ</li><li>å¦‚æœå¦ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨å†™å…¥è¿‡ç¨‹ä¸­è¯»å–è¯¥æ–‡æ¡£ï¼Œæ˜¯å¦ä¼šçœ‹åˆ°éƒ¨åˆ†æ›´æ–°çš„å€¼ï¼Ÿ</li></ul><p>è¿™äº›é—®é¢˜éå¸¸è®©äººå¤´å¤§ï¼Œæ•…å­˜å‚¨å¼•æ“ä¸€ä¸ªå‡ ä¹æ™®éçš„ç›®æ ‡æ˜¯ï¼šå¯¹å•èŠ‚ç‚¹ä¸Šçš„å•ä¸ªå¯¹è±¡ï¼ˆä¾‹å¦‚é”®å€¼å¯¹ï¼‰ä¸Šæä¾›åŸå­æ€§å’Œéš”ç¦»æ€§ã€‚åŸå­æ€§å¯ä»¥é€šè¿‡ä½¿ç”¨æ—¥å¿—æ¥å®ç°å´©æºƒæ¢å¤ï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch3.html#%E8%AE%A9B%E6%A0%91%E6%9B%B4%E5%8F%AF%E9%9D%A0" class="">è®©Bæ ‘æ›´å¯é </a>â€ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨æ¯ä¸ªå¯¹è±¡ä¸Šçš„é”æ¥å®ç°éš”ç¦»ï¼ˆæ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡ï¼‰ ã€‚</p><p>ä¸€äº›æ•°æ®åº“ä¹Ÿæä¾›æ›´å¤æ‚çš„åŸå­æ“ä½œ<sup class="footnote-ref"><a href="#footnote4">[4]</a><a class="footnote-anchor" id="footnote-ref4"></a></sup>ï¼Œä¾‹å¦‚è‡ªå¢æ“ä½œï¼Œè¿™æ ·å°±ä¸å†éœ€è¦åƒ <a href="./img/fig7-1.png">å›¾7-1</a> é‚£æ ·çš„è¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—äº†ã€‚åŒæ ·æµè¡Œçš„æ˜¯ <strong><a href="#%E6%AF%94%E8%BE%83%E5%B9%B6%E8%AE%BE%E7%BD%AE%EF%BC%88CAS%EF%BC%89">æ¯”è¾ƒå’Œè®¾ç½®ï¼ˆCAS, compare-and-setï¼‰</a></strong> æ“ä½œï¼Œä»…å½“å€¼æ²¡æœ‰è¢«å…¶ä»–å¹¶å‘ä¿®æ”¹è¿‡æ—¶ï¼Œæ‰å…è®¸æ‰§è¡Œå†™æ“ä½œã€‚</p><p>è¿™äº›å•å¯¹è±¡æ“ä½œå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é˜²æ­¢åœ¨å¤šä¸ªå®¢æˆ·ç«¯å°è¯•åŒæ—¶å†™å…¥åŒä¸€ä¸ªå¯¹è±¡æ—¶ä¸¢å¤±æ›´æ–°ï¼ˆè¯·å‚é˜…â€œ<a href="#%E9%98%B2%E6%AD%A2%E4%B8%A2%E5%A4%B1%E6%9B%B4%E6%96%B0">é˜²æ­¢ä¸¢å¤±æ›´æ–°</a>â€ï¼‰ã€‚ä½†å®ƒä»¬ä¸æ˜¯é€šå¸¸æ„ä¹‰ä¸Šçš„äº‹åŠ¡ã€‚CASä»¥åŠå…¶ä»–å•ä¸€å¯¹è±¡æ“ä½œè¢«ç§°ä¸ºâ€œè½»é‡çº§äº‹åŠ¡â€ï¼Œç”šè‡³å‡ºäºè¥é”€ç›®çš„è¢«ç§°ä¸ºâ€œACIDâ€ã€20,21,22ã€‘ï¼Œä½†æ˜¯è¿™ä¸ªæœ¯è¯­æ˜¯è¯¯å¯¼æ€§çš„ã€‚äº‹åŠ¡é€šå¸¸è¢«ç†è§£ä¸ºï¼Œ<strong>å°†å¤šä¸ªå¯¹è±¡ä¸Šçš„å¤šä¸ªæ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªæ‰§è¡Œå•å…ƒçš„æœºåˆ¶</strong>ã€‚</p><h4 id="å¤šå¯¹è±¡äº‹åŠ¡çš„éœ€æ±‚" tabindex="-1"><a class="header-anchor" href="#å¤šå¯¹è±¡äº‹åŠ¡çš„éœ€æ±‚" aria-hidden="true">#</a> å¤šå¯¹è±¡äº‹åŠ¡çš„éœ€æ±‚</h4><p>è®¸å¤šåˆ†å¸ƒå¼æ•°æ®å­˜å‚¨å·²ç»æ”¾å¼ƒäº†å¤šå¯¹è±¡äº‹åŠ¡ï¼Œå› ä¸ºå¤šå¯¹è±¡äº‹åŠ¡å¾ˆéš¾è·¨åˆ†åŒºå®ç°ï¼Œè€Œä¸”åœ¨éœ€è¦é«˜å¯ç”¨æ€§æˆ–é«˜æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯èƒ½ä¼šç¢äº‹ã€‚ä½†è¯´åˆ°åº•ï¼Œåœ¨åˆ†å¸ƒå¼æ•°æ®åº“ä¸­å®ç°äº‹åŠ¡ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæ ¹æœ¬æ€§çš„éšœç¢ã€‚<a href="/book/ddia/ch9.html" class="">ç¬¬ä¹ç« </a> å°†è®¨è®ºåˆ†å¸ƒå¼äº‹åŠ¡çš„å®ç°ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬æ˜¯å¦éœ€è¦å¤šå¯¹è±¡äº‹åŠ¡ï¼Ÿ<strong>æ˜¯å¦æœ‰å¯èƒ½åªç”¨é”®å€¼æ•°æ®æ¨¡å‹å’Œå•å¯¹è±¡æ“ä½œæ¥å®ç°ä»»ä½•åº”ç”¨ç¨‹åºï¼Ÿ</strong></p><p>æœ‰ä¸€äº›åœºæ™¯ä¸­ï¼Œå•å¯¹è±¡æ’å…¥ï¼Œæ›´æ–°å’Œåˆ é™¤æ˜¯è¶³å¤Ÿçš„ã€‚ä½†æ˜¯è®¸å¤šå…¶ä»–åœºæ™¯éœ€è¦åè°ƒå†™å…¥å‡ ä¸ªä¸åŒçš„å¯¹è±¡ï¼š</p><ul><li>åœ¨å…³ç³»æ•°æ®æ¨¡å‹ä¸­ï¼Œä¸€ä¸ªè¡¨ä¸­çš„è¡Œé€šå¸¸å…·æœ‰å¯¹å¦ä¸€ä¸ªè¡¨ä¸­çš„è¡Œçš„å¤–é”®å¼•ç”¨ã€‚ï¼ˆç±»ä¼¼çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªå›¾æ•°æ®æ¨¡å‹ä¸­ï¼Œä¸€ä¸ªé¡¶ç‚¹æœ‰ç€åˆ°å…¶ä»–é¡¶ç‚¹çš„è¾¹ï¼‰ã€‚å¤šå¯¹è±¡äº‹åŠ¡ä½¿ä½ ç¡®ä¿è¿™äº›å¼•ç”¨å§‹ç»ˆæœ‰æ•ˆï¼šå½“æ’å…¥å‡ ä¸ªç›¸äº’å¼•ç”¨çš„è®°å½•æ—¶ï¼Œå¤–é”®å¿…é¡»æ˜¯æ­£ç¡®çš„å’Œæœ€æ–°çš„ï¼Œä¸ç„¶æ•°æ®å°±æ²¡æœ‰æ„ä¹‰ã€‚</li><li>åœ¨æ–‡æ¡£æ•°æ®æ¨¡å‹ä¸­ï¼Œéœ€è¦ä¸€èµ·æ›´æ–°çš„å­—æ®µé€šå¸¸åœ¨åŒä¸€ä¸ªæ–‡æ¡£ä¸­ï¼Œè¿™è¢«è§†ä¸ºå•ä¸ªå¯¹è±¡â€”â€”æ›´æ–°å•ä¸ªæ–‡æ¡£æ—¶ä¸éœ€è¦å¤šå¯¹è±¡äº‹åŠ¡ã€‚ä½†æ˜¯ï¼Œç¼ºä¹è¿æ¥åŠŸèƒ½çš„æ–‡æ¡£æ•°æ®åº“ä¼šé¼“åŠ±éè§„èŒƒåŒ–ï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch2.html#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E6%96%87%E6%A1%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9C%A8%E4%BB%8A%E6%97%A5%E7%9A%84%E5%AF%B9%E6%AF%94" class="">å…³ç³»å‹æ•°æ®åº“ä¸æ–‡æ¡£æ•°æ®åº“åœ¨ä»Šæ—¥çš„å¯¹æ¯”</a>â€ï¼‰ã€‚å½“éœ€è¦æ›´æ–°éè§„èŒƒåŒ–çš„ä¿¡æ¯æ—¶ï¼Œå¦‚ <a href="./img/fig7-2.png">å›¾7-2</a> æ‰€ç¤ºï¼Œéœ€è¦ä¸€æ¬¡æ›´æ–°å¤šä¸ªæ–‡æ¡£ã€‚äº‹åŠ¡åœ¨è¿™ç§æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é˜²æ­¢éè§„èŒƒåŒ–çš„æ•°æ®ä¸åŒæ­¥ã€‚</li><li>åœ¨å…·æœ‰æ¬¡çº§ç´¢å¼•çš„æ•°æ®åº“ä¸­ï¼ˆé™¤äº†çº¯ç²¹çš„é”®å€¼å­˜å‚¨ä»¥å¤–å‡ ä¹éƒ½æœ‰ï¼‰ï¼Œæ¯æ¬¡æ›´æ”¹å€¼æ—¶éƒ½éœ€è¦æ›´æ–°ç´¢å¼•ã€‚ä»äº‹åŠ¡è§’åº¦æ¥çœ‹ï¼Œè¿™äº›ç´¢å¼•æ˜¯ä¸åŒçš„æ•°æ®åº“å¯¹è±¡ï¼šä¾‹å¦‚ï¼Œå¦‚æœæ²¡æœ‰äº‹åŠ¡éš”ç¦»æ€§ï¼Œè®°å½•å¯èƒ½å‡ºç°åœ¨ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œä½†æ²¡æœ‰å‡ºç°åœ¨å¦ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œå› ä¸ºç¬¬äºŒä¸ªç´¢å¼•çš„æ›´æ–°è¿˜æ²¡æœ‰å‘ç”Ÿã€‚</li></ul><p>è¿™äº›åº”ç”¨ä»ç„¶å¯ä»¥åœ¨æ²¡æœ‰äº‹åŠ¡çš„æƒ…å†µä¸‹å®ç°ã€‚ç„¶è€Œï¼Œ<strong>æ²¡æœ‰åŸå­æ€§ï¼Œé”™è¯¯å¤„ç†å°±è¦å¤æ‚å¾—å¤šï¼Œç¼ºä¹éš”ç¦»æ€§ï¼Œå°±ä¼šå¯¼è‡´å¹¶å‘é—®é¢˜</strong>ã€‚æˆ‘ä»¬å°†åœ¨â€œ<a href="#%E5%BC%B1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB">å¼±éš”ç¦»çº§åˆ«</a>â€ä¸­è®¨è®ºè¿™äº›é—®é¢˜ï¼Œå¹¶åœ¨<a href="/book/ddia/ch12.html" class="">ç¬¬åäºŒç« </a>ä¸­æ¢è®¨å…¶ä»–æ–¹æ³•ã€‚</p><h4 id="å¤„ç†é”™è¯¯å’Œä¸­æ­¢" tabindex="-1"><a class="header-anchor" href="#å¤„ç†é”™è¯¯å’Œä¸­æ­¢" aria-hidden="true">#</a> å¤„ç†é”™è¯¯å’Œä¸­æ­¢</h4><p>äº‹åŠ¡çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå®ƒå¯ä»¥ä¸­æ­¢å¹¶å®‰å…¨åœ°é‡è¯•ã€‚ ACIDæ•°æ®åº“åŸºäºè¿™æ ·çš„å“²å­¦ï¼šå¦‚æœæ•°æ®åº“æœ‰è¿åå…¶åŸå­æ€§ï¼Œéš”ç¦»æ€§æˆ–æŒä¹…æ€§çš„å±é™©ï¼Œåˆ™å®æ„¿å®Œå…¨æ”¾å¼ƒäº‹åŠ¡ï¼Œè€Œä¸æ˜¯ç•™ä¸‹åŠæˆå“ã€‚</p><p>ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç³»ç»Ÿéƒ½éµå¾ªè¿™ä¸ªå“²å­¦ã€‚ç‰¹åˆ«æ˜¯å…·æœ‰<a href="/book/ddia/ch5.html#%E6%97%A0%E4%B8%BB%E5%A4%8D%E5%88%B6" class="">æ— ä¸»å¤åˆ¶</a>çš„æ•°æ®å­˜å‚¨ï¼Œä¸»è¦æ˜¯åœ¨â€œå°½åŠ›è€Œä¸ºâ€çš„åŸºç¡€ä¸Šè¿›è¡Œå·¥ä½œã€‚å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œæ•°æ®åº“å°†åšå°½å¯èƒ½å¤šçš„äº‹ï¼Œè¿è¡Œé‡åˆ°é”™è¯¯æ—¶ï¼Œå®ƒä¸ä¼šæ’¤æ¶ˆå®ƒå·²ç»å®Œæˆçš„äº‹æƒ…â€œ â€”â€”æ‰€ä»¥ï¼Œä»é”™è¯¯ä¸­æ¢å¤æ˜¯åº”ç”¨ç¨‹åºçš„è´£ä»»ã€‚</p><p>é”™è¯¯å‘ç”Ÿä¸å¯é¿å…ï¼Œä½†è®¸å¤šè½¯ä»¶å¼€å‘äººå‘˜å€¾å‘äºåªè€ƒè™‘ä¹è§‚æƒ…å†µï¼Œè€Œä¸æ˜¯é”™è¯¯å¤„ç†çš„å¤æ‚æ€§ã€‚ä¾‹å¦‚ï¼ŒåƒRailsçš„ActiveRecordå’ŒDjangoè¿™æ ·çš„<strong>å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORM, object-relation Mappingï¼‰</strong> æ¡†æ¶ä¸ä¼šé‡è¯•ä¸­æ–­çš„äº‹åŠ¡â€”â€” è¿™ä¸ªé”™è¯¯é€šå¸¸ä¼šå¯¼è‡´ä¸€ä¸ªä»å †æ ˆå‘ä¸Šä¼ æ’­çš„å¼‚å¸¸ï¼Œæ‰€ä»¥ä»»ä½•ç”¨æˆ·è¾“å…¥éƒ½ä¼šè¢«ä¸¢å¼ƒï¼Œç”¨æˆ·æ‹¿åˆ°ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ã€‚è¿™å®åœ¨æ˜¯å¤ªè€»è¾±äº†ï¼Œå› ä¸ºä¸­æ­¢çš„é‡ç‚¹å°±æ˜¯å…è®¸å®‰å…¨çš„é‡è¯•ã€‚</p><p>å°½ç®¡é‡è¯•ä¸€ä¸ªä¸­æ­¢çš„äº‹åŠ¡æ˜¯ä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä½†å®ƒå¹¶ä¸å®Œç¾ï¼š</p><ul><li>å¦‚æœäº‹åŠ¡å®é™…ä¸ŠæˆåŠŸäº†ï¼Œä½†æ˜¯åœ¨æœåŠ¡å™¨è¯•å›¾å‘å®¢æˆ·ç«¯ç¡®è®¤æäº¤æˆåŠŸæ—¶ç½‘ç»œå‘ç”Ÿæ•…éšœï¼ˆæ‰€ä»¥å®¢æˆ·ç«¯è®¤ä¸ºæäº¤å¤±è´¥äº†ï¼‰ï¼Œé‚£ä¹ˆé‡è¯•äº‹åŠ¡ä¼šå¯¼è‡´äº‹åŠ¡è¢«æ‰§è¡Œä¸¤æ¬¡â€”â€”é™¤éä½ æœ‰ä¸€ä¸ªé¢å¤–çš„åº”ç”¨çº§é™¤é‡æœºåˆ¶ã€‚</li><li>å¦‚æœé”™è¯¯æ˜¯ç”±äºè´Ÿè½½è¿‡å¤§é€ æˆçš„ï¼Œåˆ™é‡è¯•äº‹åŠ¡å°†ä½¿é—®é¢˜å˜å¾—æ›´ç³Ÿï¼Œè€Œä¸æ˜¯æ›´å¥½ã€‚ä¸ºäº†é¿å…è¿™ç§æ­£åé¦ˆå¾ªç¯ï¼Œå¯ä»¥é™åˆ¶é‡è¯•æ¬¡æ•°ï¼Œä½¿ç”¨æŒ‡æ•°é€€é¿ç®—æ³•ï¼Œå¹¶å•ç‹¬å¤„ç†ä¸è¿‡è½½ç›¸å…³çš„é”™è¯¯ï¼ˆå¦‚æœå…è®¸ï¼‰ã€‚</li><li>ä»…åœ¨ä¸´æ—¶æ€§é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œç”±äºæ­»é”ï¼Œå¼‚å¸¸æƒ…å†µï¼Œä¸´æ—¶æ€§ç½‘ç»œä¸­æ–­å’Œæ•…éšœåˆ‡æ¢ï¼‰åæ‰å€¼å¾—é‡è¯•ã€‚åœ¨å‘ç”Ÿæ°¸ä¹…æ€§é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œè¿åçº¦æŸï¼‰ä¹‹åé‡è¯•æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚</li><li>å¦‚æœäº‹åŠ¡åœ¨æ•°æ®åº“ä¹‹å¤–ä¹Ÿæœ‰å‰¯ä½œç”¨ï¼Œå³ä½¿äº‹åŠ¡è¢«ä¸­æ­¢ï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿè¿™äº›å‰¯ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨å‘é€ç”µå­é‚®ä»¶ï¼Œé‚£ä½ è‚¯å®šä¸å¸Œæœ›æ¯æ¬¡é‡è¯•äº‹åŠ¡æ—¶éƒ½é‡æ–°å‘é€ç”µå­é‚®ä»¶ã€‚å¦‚æœä½ æƒ³ç¡®ä¿å‡ ä¸ªä¸åŒçš„ç³»ç»Ÿä¸€èµ·æäº¤æˆ–æ”¾å¼ƒï¼Œ<strong>ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PC, two-phase commitï¼‰</strong> å¯ä»¥æä¾›å¸®åŠ©ï¼ˆâ€œ<a href="/book/ddia/ch9.html#%E5%8E%9F%E5%AD%90%E6%8F%90%E4%BA%A4%E4%B8%8E%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4" class="">åŸå­æäº¤ä¸ä¸¤é˜¶æ®µæäº¤</a>â€ä¸­å°†è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼‰ã€‚</li><li>å¦‚æœå®¢æˆ·ç«¯è¿›ç¨‹åœ¨é‡è¯•ä¸­å¤±æ•ˆï¼Œä»»ä½•è¯•å›¾å†™å…¥æ•°æ®åº“çš„æ•°æ®éƒ½å°†ä¸¢å¤±ã€‚</li></ul><h2 id="å¼±éš”ç¦»çº§åˆ«" tabindex="-1"><a class="header-anchor" href="#å¼±éš”ç¦»çº§åˆ«" aria-hidden="true">#</a> å¼±éš”ç¦»çº§åˆ«</h2><p>å¦‚æœä¸¤ä¸ªäº‹åŠ¡ä¸è§¦åŠç›¸åŒçš„æ•°æ®ï¼Œå®ƒä»¬å¯ä»¥å®‰å…¨åœ°<strong>å¹¶è¡Œï¼ˆparallelï¼‰</strong> è¿è¡Œï¼Œå› ä¸ºä¸¤è€…éƒ½ä¸ä¾èµ–äºå¦ä¸€ä¸ªã€‚å½“ä¸€ä¸ªäº‹åŠ¡è¯»å–ç”±å¦ä¸€ä¸ªäº‹åŠ¡åŒæ—¶ä¿®æ”¹çš„æ•°æ®æ—¶ï¼Œæˆ–è€…å½“ä¸¤ä¸ªäº‹åŠ¡è¯•å›¾åŒæ—¶ä¿®æ”¹ç›¸åŒçš„æ•°æ®æ—¶ï¼Œå¹¶å‘é—®é¢˜ï¼ˆç«äº‰æ¡ä»¶ï¼‰æ‰ä¼šå‡ºç°ã€‚</p><p>å¹¶å‘BUGå¾ˆéš¾é€šè¿‡æµ‹è¯•æ‰¾åˆ°ï¼Œå› ä¸ºè¿™æ ·çš„é”™è¯¯åªæœ‰åœ¨ç‰¹æ®Šæ—¶åºä¸‹æ‰ä¼šè§¦å‘ã€‚è¿™æ ·çš„æ—¶åºé—®é¢˜å¯èƒ½éå¸¸å°‘å‘ç”Ÿï¼Œé€šå¸¸å¾ˆéš¾é‡ç°<sup class="footnote-ref"><a href="#footnote5">[5]</a><a class="footnote-anchor" id="footnote-ref5"></a></sup>ã€‚å¹¶å‘æ€§ä¹Ÿå¾ˆéš¾æ¨ç†ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œä½ ä¸ä¸€å®šçŸ¥é“å“ªäº›å…¶ä»–ä»£ç æ­£åœ¨è®¿é—®æ•°æ®åº“ã€‚åœ¨ä¸€æ¬¡åªæœ‰ä¸€ä¸ªç”¨æˆ·æ—¶ï¼Œåº”ç”¨å¼€å‘å·²ç»å¾ˆéº»çƒ¦äº†ï¼Œæœ‰è®¸å¤šå¹¶å‘ç”¨æˆ·ä½¿å¾—å®ƒæ›´åŠ å›°éš¾ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ªæ•°æ®éƒ½å¯èƒ½éšæ—¶æ”¹å˜ã€‚</p><p>å‡ºäºè¿™ä¸ªåŸå› ï¼Œæ•°æ®åº“ä¸€ç›´è¯•å›¾é€šè¿‡æä¾›<strong>äº‹åŠ¡éš”ç¦»ï¼ˆtransaction isolationï¼‰</strong> æ¥éšè—åº”ç”¨ç¨‹åºå¼€å‘è€…çš„å¹¶å‘é—®é¢˜ã€‚ä»ç†è®ºä¸Šè®²ï¼Œéš”ç¦»å¯ä»¥é€šè¿‡å‡è£…æ²¡æœ‰å¹¶å‘å‘ç”Ÿï¼Œè®©ä½ çš„ç”Ÿæ´»æ›´åŠ è½»æ¾ï¼š<strong>å¯ä¸²è¡Œçš„ï¼ˆserializableï¼‰</strong> éš”ç¦»ç­‰çº§æ„å‘³ç€æ•°æ®åº“ä¿è¯äº‹åŠ¡çš„æ•ˆæœå¦‚åŒä¸²è¡Œè¿è¡Œï¼ˆå³ä¸€æ¬¡ä¸€ä¸ªï¼Œæ²¡æœ‰ä»»ä½•å¹¶å‘ï¼‰ã€‚</p><p>å®é™…ä¸Šä¸å¹¸çš„æ˜¯ï¼šéš”ç¦»å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚<strong>å¯ä¸²è¡Œçš„éš”ç¦»</strong>ä¼šæœ‰æ€§èƒ½æŸå¤±ï¼Œè®¸å¤šæ•°æ®åº“ä¸æ„¿æ„æ”¯ä»˜è¿™ä¸ªä»£ä»·ã€8ã€‘ã€‚å› æ­¤ï¼Œç³»ç»Ÿé€šå¸¸ä½¿ç”¨è¾ƒå¼±çš„éš”ç¦»çº§åˆ«æ¥é˜²æ­¢ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯å…¨éƒ¨çš„å¹¶å‘é—®é¢˜ã€‚è¿™äº›éš”ç¦»çº§åˆ«éš¾ä»¥ç†è§£ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´å¾®å¦™çš„é”™è¯¯ï¼Œä½†æ˜¯å®ƒä»¬ä»ç„¶åœ¨å®è·µä¸­è¢«ä½¿ç”¨ã€23ã€‘ã€‚</p><p>å¼±äº‹åŠ¡éš”ç¦»çº§åˆ«å¯¼è‡´çš„å¹¶å‘æ€§é”™è¯¯ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç†è®ºé—®é¢˜ã€‚å®ƒä»¬é€ æˆäº†å¾ˆå¤šçš„èµ„é‡‘æŸå¤±ã€24,25ã€‘ï¼Œè€—è´¹äº†è´¢åŠ¡å®¡è®¡äººå‘˜çš„è°ƒæŸ¥ã€26ã€‘ï¼Œå¹¶å¯¼è‡´å®¢æˆ·æ•°æ®è¢«ç ´åã€27ã€‘ã€‚å…³äºè¿™ç±»é—®é¢˜çš„ä¸€ä¸ªæµè¡Œçš„è¯„è®ºæ˜¯â€œå¦‚æœä½ æ­£åœ¨å¤„ç†è´¢åŠ¡æ•°æ®ï¼Œè¯·ä½¿ç”¨ACIDæ•°æ®åº“ï¼â€ â€”â€” ä½†æ˜¯è¿™ä¸€ç‚¹æ²¡æœ‰æåˆ°ã€‚å³ä½¿æ˜¯å¾ˆå¤šæµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿï¼ˆé€šå¸¸è¢«è®¤ä¸ºæ˜¯â€œACIDâ€ï¼‰ä¹Ÿä½¿ç”¨å¼±éš”ç¦»çº§åˆ«ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿä¸ä¸€å®šèƒ½é˜²æ­¢è¿™äº›é”™è¯¯çš„å‘ç”Ÿã€‚</p><p>æ¯”èµ·ç›²ç›®åœ°ä¾èµ–å·¥å…·ï¼Œæˆ‘ä»¬åº”è¯¥å¯¹å­˜åœ¨çš„å¹¶å‘é—®é¢˜çš„ç§ç±»ï¼Œä»¥åŠå¦‚ä½•é˜²æ­¢è¿™äº›é—®é¢˜æœ‰æ·±å…¥çš„ç†è§£ã€‚ç„¶åå°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬æ‰€æŒæ¡çš„å·¥å…·æ¥æ„å»ºå¯é å’Œæ­£ç¡®çš„åº”ç”¨ç¨‹åºã€‚</p><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹å‡ ä¸ªåœ¨å®è·µä¸­ä½¿ç”¨çš„å¼±ï¼ˆ<strong>éä¸²è¡Œçš„ï¼ˆnonserializableï¼‰</strong>ï¼‰éš”ç¦»çº§åˆ«ï¼Œå¹¶è¯¦ç»†è®¨è®ºå“ªç§ç«äº‰æ¡ä»¶å¯èƒ½å‘ç”Ÿä¹Ÿå¯èƒ½ä¸å‘ç”Ÿï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å†³å®šä»€ä¹ˆçº§åˆ«é€‚åˆæ‚¨çš„åº”ç”¨ç¨‹åºã€‚ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªå·¥ä½œï¼Œæˆ‘ä»¬å°†è¯¦ç»†è®¨è®ºå¯ä¸²è¡ŒåŒ–ï¼ˆè¯·å‚é˜…â€œ<a href="#%E5%8F%AF%E4%B8%B2%E8%A1%8C%E5%8C%96">å¯ä¸²è¡ŒåŒ–</a>â€ï¼‰ã€‚æˆ‘ä»¬è®¨è®ºçš„éš”ç¦»çº§åˆ«å°†æ˜¯éæ­£å¼çš„ï¼Œé€šè¿‡ç¤ºä¾‹æ¥è¿›è¡Œã€‚å¦‚æœä½ éœ€è¦ä¸¥æ ¼çš„å®šä¹‰å’Œåˆ†æå®ƒä»¬çš„å±æ€§ï¼Œä½ å¯ä»¥åœ¨å­¦æœ¯æ–‡çŒ®ä¸­æ‰¾åˆ°å®ƒä»¬[28,29,30]ã€‚</p><h3 id="è¯»å·²æäº¤" tabindex="-1"><a class="header-anchor" href="#è¯»å·²æäº¤" aria-hidden="true">#</a> è¯»å·²æäº¤</h3><p>æœ€åŸºæœ¬çš„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯<strong>è¯»å·²æäº¤ï¼ˆRead Committedï¼‰</strong><sup class="footnote-ref"><a href="#footnote6">[6]</a><a class="footnote-anchor" id="footnote-ref6"></a></sup>ï¼Œå®ƒæä¾›äº†ä¸¤ä¸ªä¿è¯ï¼š</p><ol><li>ä»æ•°æ®åº“è¯»æ—¶ï¼Œåªèƒ½çœ‹åˆ°å·²æäº¤çš„æ•°æ®ï¼ˆæ²¡æœ‰<strong>è„è¯»ï¼ˆdirty readsï¼‰</strong>ï¼‰ã€‚</li><li>å†™å…¥æ•°æ®åº“æ—¶ï¼Œåªä¼šè¦†ç›–å·²ç»å†™å…¥çš„æ•°æ®ï¼ˆæ²¡æœ‰<strong>è„å†™ï¼ˆdirty writesï¼‰</strong>ï¼‰ã€‚</li></ol><p>æˆ‘ä»¬æ¥æ›´è¯¦ç»†åœ°è®¨è®ºè¿™ä¸¤ä¸ªä¿è¯ã€‚</p><h4 id="æ²¡æœ‰è„è¯»" tabindex="-1"><a class="header-anchor" href="#æ²¡æœ‰è„è¯»" aria-hidden="true">#</a> æ²¡æœ‰è„è¯»</h4><p>è®¾æƒ³ä¸€ä¸ªäº‹åŠ¡å·²ç»å°†ä¸€äº›æ•°æ®å†™å…¥æ•°æ®åº“ï¼Œä½†äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤æˆ–ä¸­æ­¢ã€‚å¦ä¸€ä¸ªäº‹åŠ¡å¯ä»¥çœ‹åˆ°æœªæäº¤çš„æ•°æ®å—ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œé‚£å°±å«åš<strong>è„è¯»ï¼ˆdirty readsï¼‰</strong>ã€2ã€‘ã€‚</p><p>åœ¨<strong>è¯»å·²æäº¤</strong>éš”ç¦»çº§åˆ«è¿è¡Œçš„äº‹åŠ¡å¿…é¡»é˜²æ­¢è„è¯»ã€‚è¿™æ„å‘³ç€äº‹åŠ¡çš„ä»»ä½•å†™å…¥æ“ä½œåªæœ‰åœ¨è¯¥äº‹åŠ¡æäº¤æ—¶æ‰èƒ½è¢«å…¶ä»–äººçœ‹åˆ°ï¼ˆç„¶åæ‰€æœ‰çš„å†™å…¥æ“ä½œéƒ½ä¼šç«‹å³å˜å¾—å¯è§ï¼‰ã€‚å¦‚<a href="./img/fig7-4.png">å›¾7-4</a>æ‰€ç¤ºï¼Œç”¨æˆ·1 è®¾ç½®äº†<code>x = 3</code>ï¼Œä½†ç”¨æˆ·2 çš„ <code>get x </code>ä»æ—§è¿”å›æ—§å€¼2 ï¼ˆå½“ç”¨æˆ·1 å°šæœªæäº¤æ—¶ï¼‰ã€‚</p><figure><img src="/assets/fig7-4-adJSsit8.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-4 æ²¡æœ‰è„è¯»ï¼šç”¨æˆ·2åªæœ‰åœ¨ç”¨æˆ·1çš„äº‹åŠ¡å·²ç»æäº¤åæ‰èƒ½çœ‹åˆ°xçš„æ–°å€¼ã€‚</strong></p><p>ä¸ºä»€ä¹ˆè¦é˜²æ­¢è„è¯»ï¼Œæœ‰å‡ ä¸ªåŸå› ï¼š</p><ul><li>å¦‚æœäº‹åŠ¡éœ€è¦æ›´æ–°å¤šä¸ªå¯¹è±¡ï¼Œè„è¯»å–æ„å‘³ç€å¦ä¸€ä¸ªäº‹åŠ¡å¯èƒ½ä¼šåªçœ‹åˆ°ä¸€éƒ¨åˆ†æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œåœ¨<a href="./img/fig7-2.png">å›¾7-2</a>ä¸­ï¼Œç”¨æˆ·çœ‹åˆ°æ–°çš„æœªè¯»ç”µå­é‚®ä»¶ï¼Œä½†çœ‹ä¸åˆ°æ›´æ–°çš„è®¡æ•°å™¨ã€‚è¿™å°±æ˜¯ç”µå­é‚®ä»¶çš„è„è¯»ã€‚çœ‹åˆ°å¤„äºéƒ¨åˆ†æ›´æ–°çŠ¶æ€çš„æ•°æ®åº“ä¼šè®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ï¼Œå¹¶å¯èƒ½å¯¼è‡´å…¶ä»–äº‹åŠ¡åšå‡ºé”™è¯¯çš„å†³å®šã€‚</li><li>å¦‚æœäº‹åŠ¡ä¸­æ­¢ï¼Œåˆ™æ‰€æœ‰å†™å…¥æ“ä½œéƒ½éœ€è¦å›æ»šï¼ˆå¦‚<a href="./img/fig7-3.png">å›¾7-3</a>æ‰€ç¤ºï¼‰ã€‚å¦‚æœæ•°æ®åº“å…è®¸è„è¯»ï¼Œé‚£å°±æ„å‘³ç€ä¸€ä¸ªäº‹åŠ¡å¯èƒ½ä¼šçœ‹åˆ°ç¨åéœ€è¦å›æ»šçš„æ•°æ®ï¼Œå³ä»æœªå®é™…æäº¤ç»™æ•°æ®åº“çš„æ•°æ®ã€‚æƒ³æƒ³åæœå°±è®©äººå¤´å¤§ã€‚</li></ul><h4 id="æ²¡æœ‰è„å†™" tabindex="-1"><a class="header-anchor" href="#æ²¡æœ‰è„å†™" aria-hidden="true">#</a> æ²¡æœ‰è„å†™</h4><p>å¦‚æœä¸¤ä¸ªäº‹åŠ¡åŒæ—¶å°è¯•æ›´æ–°æ•°æ®åº“ä¸­çš„ç›¸åŒå¯¹è±¡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿæˆ‘ä»¬ä¸çŸ¥é“å†™å…¥çš„é¡ºåºæ˜¯æ€æ ·çš„ï¼Œä½†æ˜¯æˆ‘ä»¬é€šå¸¸è®¤ä¸ºåé¢çš„å†™å…¥ä¼šè¦†ç›–å‰é¢çš„å†™å…¥ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœå…ˆå‰çš„å†™å…¥æ˜¯å°šæœªæäº¤äº‹åŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œåˆä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œåé¢çš„å†™å…¥ä¼šè¦†ç›–ä¸€ä¸ªå°šæœªæäº¤çš„å€¼ï¼Ÿè¿™è¢«ç§°ä½œ<strong>è„å†™ï¼ˆdirty writeï¼‰</strong>ã€28ã€‘ã€‚åœ¨<strong>è¯»å·²æäº¤</strong>çš„éš”ç¦»çº§åˆ«ä¸Šè¿è¡Œçš„äº‹åŠ¡å¿…é¡»é˜²æ­¢è„å†™ï¼Œé€šå¸¸æ˜¯å»¶è¿Ÿç¬¬äºŒæ¬¡å†™å…¥ï¼Œç›´åˆ°ç¬¬ä¸€æ¬¡å†™å…¥äº‹åŠ¡æäº¤æˆ–ä¸­æ­¢ä¸ºæ­¢ã€‚</p><p>é€šè¿‡é˜²æ­¢è„å†™ï¼Œè¿™ä¸ªéš”ç¦»çº§åˆ«é¿å…äº†ä¸€äº›å¹¶å‘é—®é¢˜ï¼š</p><ul><li>å¦‚æœäº‹åŠ¡æ›´æ–°å¤šä¸ªå¯¹è±¡ï¼Œè„å†™ä¼šå¯¼è‡´ä¸å¥½çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ <a href="./img/fig7-5.png">å›¾7-5</a>ï¼Œä»¥ä¸€ä¸ªäºŒæ‰‹è½¦é”€å”®ç½‘ç«™ä¸ºä¾‹ï¼ŒAliceå’ŒBobä¸¤ä¸ªäººåŒæ—¶è¯•å›¾è´­ä¹°åŒä¸€è¾†è½¦ã€‚è´­ä¹°æ±½è½¦éœ€è¦ä¸¤æ¬¡æ•°æ®åº“å†™å…¥ï¼šç½‘ç«™ä¸Šçš„å•†å“åˆ—è¡¨éœ€è¦æ›´æ–°ï¼Œä»¥åæ˜ ä¹°å®¶çš„è´­ä¹°ï¼Œé”€å”®å‘ç¥¨éœ€è¦å‘é€ç»™ä¹°å®¶ã€‚åœ¨<a href="./img/fig7-5.png">å›¾7-5</a>çš„æƒ…å†µä¸‹ï¼Œé”€å”®æ˜¯å±äºBobçš„ï¼ˆå› ä¸ºä»–æˆåŠŸæ›´æ–°äº†å•†å“åˆ—è¡¨ï¼‰ï¼Œä½†å‘ç¥¨å´å¯„é€ç»™äº†çˆ±ä¸½ä¸ï¼ˆå› ä¸ºå¥¹æˆåŠŸæ›´æ–°äº†å‘ç¥¨è¡¨ï¼‰ã€‚è¯»å·²æäº¤ä¼šé˜»æ­¢è¿™æ ·çš„äº‹æ•…ã€‚</li><li>ä½†æ˜¯ï¼Œè¯»å·²æäº¤å¹¶ä¸èƒ½é˜²æ­¢<a href="./img/fig7-1.png">å›¾7-1</a>ä¸­ä¸¤ä¸ªè®¡æ•°å™¨å¢é‡ä¹‹é—´çš„ç«äº‰çŠ¶æ€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬äºŒæ¬¡å†™å…¥å‘ç”Ÿåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡æäº¤åï¼Œæ‰€ä»¥å®ƒä¸æ˜¯ä¸€ä¸ªè„å†™ã€‚è¿™ä»ç„¶æ˜¯ä¸æ­£ç¡®çš„ï¼Œä½†æ˜¯å‡ºäºä¸åŒçš„åŸå› ï¼Œåœ¨â€œ<a href="#%E9%98%B2%E6%AD%A2%E4%B8%A2%E5%A4%B1%E6%9B%B4%E6%96%B0">é˜²æ­¢æ›´æ–°ä¸¢å¤±</a>â€ä¸­å°†è®¨è®ºå¦‚ä½•ä½¿è¿™ç§è®¡æ•°å™¨å¢é‡å®‰å…¨ã€‚</li></ul><figure><img src="/assets/fig7-5-gsgnBAU1.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-5 å¦‚æœå­˜åœ¨è„å†™ï¼Œæ¥è‡ªä¸åŒäº‹åŠ¡çš„å†²çªå†™å…¥å¯èƒ½ä¼šæ··æ·†åœ¨ä¸€èµ·</strong></p><h4 id="å®ç°è¯»å·²æäº¤" tabindex="-1"><a class="header-anchor" href="#å®ç°è¯»å·²æäº¤" aria-hidden="true">#</a> å®ç°è¯»å·²æäº¤</h4><p><strong>è¯»å·²æäº¤</strong>æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„éš”ç¦»çº§åˆ«ã€‚è¿™æ˜¯Oracle 11gï¼ŒPostgreSQLï¼ŒSQL Server 2012ï¼ŒMemSQLå’Œå…¶ä»–è®¸å¤šæ•°æ®åº“çš„é»˜è®¤è®¾ç½®ã€8ã€‘ã€‚</p><p>æœ€å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œæ•°æ®åº“é€šè¿‡ä½¿ç”¨<strong>è¡Œé”ï¼ˆrow-level lockï¼‰</strong> æ¥é˜²æ­¢è„å†™ï¼šå½“äº‹åŠ¡æƒ³è¦ä¿®æ”¹ç‰¹å®šå¯¹è±¡ï¼ˆè¡Œæˆ–æ–‡æ¡£ï¼‰æ—¶ï¼Œå®ƒå¿…é¡»é¦–å…ˆè·å¾—è¯¥å¯¹è±¡çš„é”ã€‚ç„¶åå¿…é¡»æŒæœ‰è¯¥é”ç›´åˆ°äº‹åŠ¡è¢«æäº¤æˆ–ä¸­æ­¢ã€‚ä¸€æ¬¡åªæœ‰ä¸€ä¸ªäº‹åŠ¡å¯æŒæœ‰ä»»ä½•ç»™å®šå¯¹è±¡çš„é”ï¼›å¦‚æœå¦ä¸€ä¸ªäº‹åŠ¡è¦å†™å…¥åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¿…é¡»ç­‰åˆ°ç¬¬ä¸€ä¸ªäº‹åŠ¡æäº¤æˆ–ä¸­æ­¢åï¼Œæ‰èƒ½è·å–è¯¥é”å¹¶ç»§ç»­ã€‚è¿™ç§é”å®šæ˜¯è¯»å·²æäº¤æ¨¡å¼ï¼ˆæˆ–æ›´å¼ºçš„éš”ç¦»çº§åˆ«ï¼‰çš„æ•°æ®åº“è‡ªåŠ¨å®Œæˆçš„ã€‚</p><p>å¦‚ä½•é˜²æ­¢è„è¯»ï¼Ÿä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨ç›¸åŒçš„é”ï¼Œå¹¶è¦æ±‚ä»»ä½•æƒ³è¦è¯»å–å¯¹è±¡çš„äº‹åŠ¡æ¥ç®€å•åœ°è·å–è¯¥é”ï¼Œç„¶ååœ¨è¯»å–ä¹‹åç«‹å³å†æ¬¡é‡Šæ”¾è¯¥é”ã€‚è¿™èƒ½ç¡®ä¿åœ¨è¯»å–è¿›è¡Œæ—¶ï¼Œå¯¹è±¡ä¸ä¼šåœ¨è„çš„ã€æœ‰æœªæäº¤çš„å€¼çš„çŠ¶æ€ï¼ˆå› ä¸ºåœ¨é‚£æ®µæ—¶é—´é”ä¼šè¢«å†™å…¥è¯¥å¯¹è±¡çš„äº‹åŠ¡æŒæœ‰ï¼‰ã€‚</p><p>ä½†æ˜¯è¦æ±‚è¯»é”çš„åŠæ³•åœ¨å®è·µä¸­æ•ˆæœå¹¶ä¸å¥½ã€‚å› ä¸ºä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„å†™å…¥äº‹åŠ¡ä¼šè¿«ä½¿è®¸å¤šåªè¯»äº‹åŠ¡ç­‰åˆ°è¿™ä¸ªæ…¢å†™å…¥äº‹åŠ¡å®Œæˆã€‚è¿™ä¼šæŸå¤±åªè¯»äº‹åŠ¡çš„å“åº”æ—¶é—´ï¼Œå¹¶ä¸”ä¸åˆ©äºå¯æ“ä½œæ€§ï¼šå› ä¸ºç­‰å¾…é”ï¼Œåº”ç”¨æŸä¸ªéƒ¨åˆ†çš„è¿Ÿç¼“å¯èƒ½ç”±äºè¿é”æ•ˆåº”ï¼Œå¯¼è‡´å…¶ä»–éƒ¨åˆ†å‡ºç°é—®é¢˜ã€‚</p><p>å‡ºäºè¿™ä¸ªåŸå› ï¼Œå¤§å¤šæ•°æ•°æ®åº“<sup class="footnote-ref"><a href="#footnote7">[7]</a><a class="footnote-anchor" id="footnote-ref7"></a></sup>ä½¿ç”¨<a href="./img/fig7-4.png">å›¾7-4</a>çš„æ–¹å¼é˜²æ­¢è„è¯»ï¼šå¯¹äºå†™å…¥çš„æ¯ä¸ªå¯¹è±¡ï¼Œæ•°æ®åº“éƒ½ä¼šè®°ä½æ—§çš„å·²æäº¤å€¼ï¼Œå’Œç”±å½“å‰æŒæœ‰å†™å…¥é”çš„äº‹åŠ¡è®¾ç½®çš„æ–°å€¼ã€‚å½“äº‹åŠ¡æ­£åœ¨è¿›è¡Œæ—¶ï¼Œä»»ä½•å…¶ä»–è¯»å–å¯¹è±¡çš„äº‹åŠ¡éƒ½ä¼šæ‹¿åˆ°æ—§å€¼ã€‚ åªæœ‰å½“æ–°å€¼æäº¤åï¼Œäº‹åŠ¡æ‰ä¼šåˆ‡æ¢åˆ°è¯»å–æ–°å€¼ã€‚</p><h3 id="å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»" tabindex="-1"><a class="header-anchor" href="#å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»" aria-hidden="true">#</a> å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»</h3><p>å¦‚æœåªä»è¡¨é¢ä¸Šçœ‹è¯»å·²æäº¤éš”ç¦»çº§åˆ«ä½ å°±è®¤ä¸ºå®ƒå®Œæˆäº†äº‹åŠ¡æ‰€éœ€çš„ä¸€åˆ‡ï¼Œé‚£æ˜¯å¯ä»¥åŸè°…çš„ã€‚å®ƒå…è®¸<strong>ä¸­æ­¢</strong>ï¼ˆåŸå­æ€§çš„è¦æ±‚ï¼‰ï¼›å®ƒé˜²æ­¢è¯»å–ä¸å®Œæ•´çš„äº‹åŠ¡ç»“æœï¼Œå¹¶ä¸”é˜²æ­¢å¹¶å‘å†™å…¥é€ æˆçš„æ··ä¹±ã€‚äº‹å®ä¸Šè¿™äº›åŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œæ¯”èµ·æ²¡æœ‰äº‹åŠ¡çš„ç³»ç»Ÿæ¥ï¼Œå¯ä»¥æä¾›æ›´å¤šçš„ä¿è¯ã€‚</p><p>ä½†æ˜¯åœ¨ä½¿ç”¨æ­¤éš”ç¦»çº§åˆ«æ—¶ï¼Œä»ç„¶æœ‰å¾ˆå¤šåœ°æ–¹å¯èƒ½ä¼šäº§ç”Ÿå¹¶å‘é”™è¯¯ã€‚ä¾‹å¦‚<a href="./img/fig7-6.png">å›¾7-6</a>è¯´æ˜äº†è¯»å·²æäº¤æ—¶å¯èƒ½å‘ç”Ÿçš„é—®é¢˜ã€‚</p><figure><img src="/assets/fig7-6-NnJw1Z7Z.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-6 è¯»å–åå·®ï¼šAliceè§‚å¯Ÿæ•°æ®åº“å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€</strong></p><p>çˆ±ä¸½ä¸åœ¨é“¶è¡Œæœ‰1000ç¾å…ƒçš„å‚¨è“„ï¼Œåˆ†ä¸ºä¸¤ä¸ªè´¦æˆ·ï¼Œæ¯ä¸ª500ç¾å…ƒã€‚ç°åœ¨ä¸€ç¬”äº‹åŠ¡ä»å¥¹çš„ä¸€ä¸ªè´¦æˆ·è½¬ç§»äº†100ç¾å…ƒåˆ°å¦ä¸€ä¸ªè´¦æˆ·ã€‚å¦‚æœå¥¹åœ¨äº‹åŠ¡å¤„ç†çš„åŒæ—¶æŸ¥çœ‹å…¶è´¦æˆ·ä½™é¢åˆ—è¡¨ï¼Œå¥¹å¯èƒ½ä¼šç¢°å·§åœ¨æ”¶æ¬¾åˆ°è¾¾å‰çœ‹åˆ°æ”¶æ¬¾è´¦æˆ·çš„ä½™é¢ä»ç„¶æ˜¯500ç¾å…ƒï¼Œè€Œåœ¨ä»˜æ¬¾äº§ç”Ÿåçœ‹åˆ°ä»˜æ¬¾è´¦æˆ·çš„ä½™é¢å·²ç»æ˜¯400ç¾å…ƒã€‚å¯¹çˆ±ä¸½ä¸æ¥è¯´ï¼Œç°åœ¨å¥¹çš„è´¦æˆ·ä¼¼ä¹æ€»å…±åªæœ‰900ç¾å…ƒâ€”â€”çœ‹èµ·æ¥æœ‰100ç¾å…ƒå·²ç»å‡­ç©ºæ¶ˆå¤±äº†ã€‚</p><p>è¿™ç§å¼‚å¸¸è¢«ç§°ä¸º<strong>ä¸å¯é‡å¤è¯»ï¼ˆnonrepeatable readï¼‰</strong> æˆ–<strong>è¯»å–åå·®ï¼ˆread skewï¼‰</strong>ï¼šå¦‚æœAliceåœ¨äº‹åŠ¡ç»“æŸæ—¶å†æ¬¡è¯»å–è´¦æˆ·1çš„ä½™é¢ï¼Œå¥¹å°†çœ‹åˆ°ä¸å¥¹ä¹‹å‰çš„æŸ¥è¯¢ä¸­çœ‹åˆ°çš„ä¸åŒçš„å€¼ï¼ˆ600ç¾å…ƒï¼‰ã€‚åœ¨è¯»å·²æäº¤çš„éš”ç¦»æ¡ä»¶ä¸‹ï¼Œ<strong>ä¸å¯é‡å¤è¯»</strong>è¢«è®¤ä¸ºæ˜¯å¯æ¥å—çš„ï¼šAliceçœ‹åˆ°çš„å¸æˆ·ä½™é¢æ—¶ç¡®å®åœ¨é˜…è¯»æ—¶å·²ç»æäº¤äº†ã€‚</p><blockquote><p>ä¸å¹¸çš„æ˜¯ï¼Œæœ¯è¯­<strong>åå·®ï¼ˆskewï¼‰</strong> è¿™ä¸ªè¯æ˜¯è¿‡è½½çš„ï¼šä»¥å‰ä½¿ç”¨å®ƒæ˜¯å› ä¸ºçƒ­ç‚¹çš„ä¸å¹³è¡¡å·¥ä½œé‡ï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch6.html#%E8%B4%9F%E8%BD%BD%E5%81%8F%E6%96%9C%E4%B8%8E%E7%83%AD%E7%82%B9%E6%B6%88%E9%99%A4" class="">è´Ÿè½½åæ–œä¸çƒ­ç‚¹æ¶ˆé™¤</a>â€ï¼‰ï¼Œè€Œè¿™é‡Œåå·®æ„å‘³ç€å¼‚å¸¸çš„æ—¶åºã€‚</p></blockquote><p>å¯¹äºAliceçš„æƒ…å†µï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªé•¿æœŸæŒç»­çš„é—®é¢˜ã€‚å› ä¸ºå¦‚æœå¥¹å‡ ç§’é’Ÿååˆ·æ–°é“¶è¡Œç½‘ç«™çš„é¡µé¢ï¼Œå¥¹å¾ˆå¯èƒ½ä¼šçœ‹åˆ°ä¸€è‡´çš„å¸æˆ·ä½™é¢ã€‚ä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹ï¼Œä¸èƒ½å®¹å¿è¿™ç§æš‚æ—¶çš„ä¸ä¸€è‡´ï¼š</p><p><em><strong>å¤‡ä»½</strong></em></p><p>â€‹ è¿›è¡Œå¤‡ä»½éœ€è¦å¤åˆ¶æ•´ä¸ªæ•°æ®åº“ï¼Œå¯¹å¤§å‹æ•°æ®åº“è€Œè¨€å¯èƒ½éœ€è¦èŠ±è´¹æ•°å°æ—¶æ‰èƒ½å®Œæˆã€‚å¤‡ä»½è¿›ç¨‹è¿è¡Œæ—¶ï¼Œæ•°æ®åº“ä»ç„¶ä¼šæ¥å—å†™å…¥æ“ä½œã€‚å› æ­¤å¤‡ä»½å¯èƒ½ä¼šåŒ…å«ä¸€äº›æ—§çš„éƒ¨åˆ†å’Œä¸€äº›æ–°çš„éƒ¨åˆ†ã€‚å¦‚æœä»è¿™æ ·çš„å¤‡ä»½ä¸­æ¢å¤ï¼Œé‚£ä¹ˆä¸ä¸€è‡´ï¼ˆå¦‚æ¶ˆå¤±çš„é’±ï¼‰å°±ä¼šå˜æˆæ°¸ä¹…çš„ã€‚</p><p><em><strong>åˆ†ææŸ¥è¯¢å’Œå®Œæ•´æ€§æ£€æŸ¥</strong></em></p><p>â€‹ æœ‰æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œä¸€ä¸ªæŸ¥è¯¢ï¼Œæ‰«æå¤§éƒ¨åˆ†çš„æ•°æ®åº“ã€‚è¿™æ ·çš„æŸ¥è¯¢åœ¨åˆ†æä¸­å¾ˆå¸¸è§ï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch3.html#%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E8%BF%98%E6%98%AF%E5%88%86%E6%9E%90%EF%BC%9F" class="">äº‹åŠ¡å¤„ç†è¿˜æ˜¯åˆ†æï¼Ÿ</a>â€ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯å®šæœŸå®Œæ•´æ€§æ£€æŸ¥ï¼ˆå³ç›‘è§†æ•°æ®æŸåï¼‰çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœè¿™äº›æŸ¥è¯¢åœ¨ä¸åŒæ—¶é—´ç‚¹è§‚å¯Ÿæ•°æ®åº“çš„ä¸åŒéƒ¨åˆ†ï¼Œåˆ™å¯èƒ½ä¼šè¿”å›æ¯«æ— æ„ä¹‰çš„ç»“æœã€‚</p><p><strong>å¿«ç…§éš”ç¦»ï¼ˆsnapshot isolationï¼‰</strong>ã€28ã€‘æ˜¯è¿™ä¸ªé—®é¢˜æœ€å¸¸è§çš„è§£å†³æ–¹æ¡ˆã€‚æƒ³æ³•æ˜¯ï¼Œæ¯ä¸ªäº‹åŠ¡éƒ½ä»æ•°æ®åº“çš„<strong>ä¸€è‡´å¿«ç…§ï¼ˆconsistent snapshotï¼‰</strong> ä¸­è¯»å–â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹åŠ¡å¯ä»¥çœ‹åˆ°äº‹åŠ¡å¼€å§‹æ—¶åœ¨æ•°æ®åº“ä¸­æäº¤çš„æ‰€æœ‰æ•°æ®ã€‚å³ä½¿è¿™äº›æ•°æ®éšåè¢«å¦ä¸€ä¸ªäº‹åŠ¡æ›´æ”¹ï¼Œæ¯ä¸ªäº‹åŠ¡ä¹Ÿåªèƒ½çœ‹åˆ°è¯¥ç‰¹å®šæ—¶é—´ç‚¹çš„æ—§æ•°æ®ã€‚</p><p>å¿«ç…§éš”ç¦»å¯¹é•¿æ—¶é—´è¿è¡Œçš„åªè¯»æŸ¥è¯¢ï¼ˆå¦‚å¤‡ä»½å’Œåˆ†æï¼‰éå¸¸æœ‰ç”¨ã€‚å¦‚æœæŸ¥è¯¢çš„æ•°æ®åœ¨æŸ¥è¯¢æ‰§è¡Œçš„åŒæ—¶å‘ç”Ÿå˜åŒ–ï¼Œåˆ™å¾ˆéš¾ç†è§£æŸ¥è¯¢çš„å«ä¹‰ã€‚å½“ä¸€ä¸ªäº‹åŠ¡å¯ä»¥çœ‹åˆ°æ•°æ®åº“åœ¨æŸä¸ªç‰¹å®šæ—¶é—´ç‚¹å†»ç»“æ—¶çš„ä¸€è‡´å¿«ç…§ï¼Œç†è§£èµ·æ¥å°±å¾ˆå®¹æ˜“äº†ã€‚</p><p>å¿«ç…§éš”ç¦»æ˜¯ä¸€ä¸ªæµè¡Œçš„åŠŸèƒ½ï¼šPostgreSQLï¼Œä½¿ç”¨InnoDBå¼•æ“çš„MySQLï¼ŒOracleï¼ŒSQL Serverç­‰éƒ½æ”¯æŒã€23,31,32ã€‘ã€‚</p><h4 id="å®ç°å¿«ç…§éš”ç¦»" tabindex="-1"><a class="header-anchor" href="#å®ç°å¿«ç…§éš”ç¦»" aria-hidden="true">#</a> å®ç°å¿«ç…§éš”ç¦»</h4><p>ä¸è¯»å–æäº¤çš„éš”ç¦»ç±»ä¼¼ï¼Œå¿«ç…§éš”ç¦»çš„å®ç°é€šå¸¸ä½¿ç”¨å†™é”æ¥é˜²æ­¢è„å†™ï¼ˆè¯·å‚é˜…â€œ<a href="#%E8%AF%BB%E5%B7%B2%E6%8F%90%E4%BA%A4">è¯»å·²æäº¤</a>â€ï¼‰ï¼Œè¿™æ„å‘³ç€è¿›è¡Œå†™å…¥çš„äº‹åŠ¡ä¼šé˜»æ­¢å¦ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹åŒä¸€ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯è¯»å–ä¸éœ€è¦ä»»ä½•é”å®šã€‚ä»æ€§èƒ½çš„è§’åº¦æ¥çœ‹ï¼Œå¿«ç…§éš”ç¦»çš„ä¸€ä¸ªå…³é”®åŸåˆ™æ˜¯ï¼š<strong>è¯»ä¸é˜»å¡å†™ï¼Œå†™ä¸é˜»å¡è¯»</strong>ã€‚è¿™å…è®¸æ•°æ®åº“åœ¨å¤„ç†ä¸€è‡´æ€§å¿«ç…§ä¸Šçš„é•¿æ—¶é—´æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥æ­£å¸¸åœ°åŒæ—¶å¤„ç†å†™å…¥æ“ä½œã€‚ä¸”ä¸¤è€…é—´æ²¡æœ‰ä»»ä½•é”å®šäº‰ç”¨ã€‚</p><p>ä¸ºäº†å®ç°å¿«ç…§éš”ç¦»ï¼Œæ•°æ®åº“ä½¿ç”¨äº†æˆ‘ä»¬çœ‹åˆ°çš„ç”¨äºé˜²æ­¢<a href="./img/fig7-4.png">å›¾7-4</a>ä¸­çš„è„è¯»çš„æœºåˆ¶çš„ä¸€èˆ¬åŒ–ã€‚æ•°æ®åº“å¿…é¡»å¯èƒ½ä¿ç•™ä¸€ä¸ªå¯¹è±¡çš„å‡ ä¸ªä¸åŒçš„æäº¤ç‰ˆæœ¬ï¼Œå› ä¸ºå„ç§æ­£åœ¨è¿›è¡Œçš„äº‹åŠ¡å¯èƒ½éœ€è¦çœ‹åˆ°æ•°æ®åº“åœ¨ä¸åŒçš„æ—¶é—´ç‚¹çš„çŠ¶æ€ã€‚å› ä¸ºå®ƒåŒæ—¶ç»´æŠ¤ç€å•ä¸ªå¯¹è±¡çš„å¤šä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥è¿™ç§æŠ€æœ¯è¢«ç§°ä¸º<strong>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCC, multi-version concurrency controlï¼‰</strong>ã€‚</p><p>å¦‚æœä¸€ä¸ªæ•°æ®åº“åªéœ€è¦æä¾›<strong>è¯»å·²æäº¤</strong>çš„éš”ç¦»çº§åˆ«ï¼Œè€Œä¸æä¾›<strong>å¿«ç…§éš”ç¦»</strong>ï¼Œé‚£ä¹ˆä¿ç•™ä¸€ä¸ªå¯¹è±¡çš„ä¸¤ä¸ªç‰ˆæœ¬å°±è¶³å¤Ÿäº†ï¼šæäº¤çš„ç‰ˆæœ¬å’Œè¢«è¦†ç›–ä½†å°šæœªæäº¤çš„ç‰ˆæœ¬ã€‚æ”¯æŒå¿«ç…§éš”ç¦»çš„å­˜å‚¨å¼•æ“é€šå¸¸ä¹Ÿä½¿ç”¨MVCCæ¥å®ç°<strong>è¯»å·²æäº¤</strong>éš”ç¦»çº§åˆ«ã€‚ä¸€ç§å…¸å‹çš„æ–¹æ³•æ˜¯<strong>è¯»å·²æäº¤</strong>ä¸ºæ¯ä¸ªæŸ¥è¯¢ä½¿ç”¨å•ç‹¬çš„å¿«ç…§ï¼Œè€Œ<strong>å¿«ç…§éš”ç¦»</strong>å¯¹æ•´ä¸ªäº‹åŠ¡ä½¿ç”¨ç›¸åŒçš„å¿«ç…§ã€‚</p><p><a href="./img/fig7-7.png">å›¾7-7</a>è¯´æ˜äº†å¦‚ä½•åœ¨PostgreSQLä¸­å®ç°åŸºäºMVCCçš„å¿«ç…§éš”ç¦»ã€31ã€‘ï¼ˆå…¶ä»–å®ç°ç±»ä¼¼ï¼‰ã€‚å½“ä¸€ä¸ªäº‹åŠ¡å¼€å§‹æ—¶ï¼Œå®ƒè¢«èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„ï¼Œæ°¸è¿œå¢é•¿<sup class="footnote-ref"><a href="#footnote8">[8]</a><a class="footnote-anchor" id="footnote-ref8"></a></sup>çš„äº‹åŠ¡IDï¼ˆ<code>txid</code>ï¼‰ã€‚æ¯å½“äº‹åŠ¡å‘æ•°æ®åº“å†™å…¥ä»»ä½•å†…å®¹æ—¶ï¼Œå®ƒæ‰€å†™å…¥çš„æ•°æ®éƒ½ä¼šè¢«æ ‡è®°ä¸Šå†™å…¥è€…çš„äº‹åŠ¡IDã€‚</p><figure><img src="/assets/fig7-7-EzWOam-4.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-7 ä½¿ç”¨å¤šç‰ˆæœ¬å¯¹è±¡å®ç°å¿«ç…§éš”ç¦»</strong></p><p>è¡¨ä¸­çš„æ¯ä¸€è¡Œéƒ½æœ‰ä¸€ä¸ª <code>created_by</code> å­—æ®µï¼Œå…¶ä¸­åŒ…å«å°†è¯¥è¡Œæ’å…¥åˆ°è¡¨ä¸­çš„çš„äº‹åŠ¡IDã€‚æ­¤å¤–ï¼Œæ¯è¡Œéƒ½æœ‰ä¸€ä¸ª <code>deleted_by</code> å­—æ®µï¼Œæœ€åˆæ˜¯ç©ºçš„ã€‚å¦‚æœæŸä¸ªäº‹åŠ¡åˆ é™¤äº†ä¸€è¡Œï¼Œé‚£ä¹ˆè¯¥è¡Œå®é™…ä¸Šå¹¶æœªä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œè€Œæ˜¯é€šè¿‡å°† <code>deleted_by</code> å­—æ®µè®¾ç½®ä¸ºè¯·æ±‚åˆ é™¤çš„äº‹åŠ¡çš„IDæ¥æ ‡è®°ä¸ºåˆ é™¤ã€‚åœ¨ç¨åçš„æ—¶é—´ï¼Œå½“ç¡®å®šæ²¡æœ‰äº‹åŠ¡å¯ä»¥å†è®¿é—®å·²åˆ é™¤çš„æ•°æ®æ—¶ï¼Œæ•°æ®åº“ä¸­çš„åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¼šå°†æ‰€æœ‰å¸¦æœ‰åˆ é™¤æ ‡è®°çš„è¡Œç§»é™¤ï¼Œå¹¶é‡Šæ”¾å…¶ç©ºé—´ã€‚<sup class="footnote-ref"><a href="#footnote9">[9]</a><a class="footnote-anchor" id="footnote-ref9"></a></sup></p><p><code>UPDATE</code> æ“ä½œåœ¨å†…éƒ¨ç¿»è¯‘ä¸º <code>DELETE</code> å’Œ <code>INSERT</code> ã€‚ä¾‹å¦‚ï¼Œåœ¨<a href="./img/fig7-7.png">å›¾7-7</a>ä¸­ï¼Œäº‹åŠ¡13 ä»è´¦æˆ·2 ä¸­æ‰£é™¤100ç¾å…ƒï¼Œå°†ä½™é¢ä»500ç¾å…ƒæ”¹ä¸º400ç¾å…ƒã€‚å®é™…ä¸ŠåŒ…å«ä¸¤æ¡è´¦æˆ·2 çš„è®°å½•ï¼šä½™é¢ä¸º $500 çš„è¡Œè¢«æ ‡è®°ä¸º<strong>è¢«äº‹åŠ¡13åˆ é™¤</strong>ï¼Œä½™é¢ä¸º $400 çš„è¡Œ<strong>ç”±äº‹åŠ¡13åˆ›å»º</strong>ã€‚</p><h4 id="è§‚å¯Ÿä¸€è‡´æ€§å¿«ç…§çš„å¯è§æ€§è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#è§‚å¯Ÿä¸€è‡´æ€§å¿«ç…§çš„å¯è§æ€§è§„åˆ™" aria-hidden="true">#</a> è§‚å¯Ÿä¸€è‡´æ€§å¿«ç…§çš„å¯è§æ€§è§„åˆ™</h4><p>å½“ä¸€ä¸ªäº‹åŠ¡ä»æ•°æ®åº“ä¸­è¯»å–æ—¶ï¼Œäº‹åŠ¡IDç”¨äºå†³å®šå®ƒå¯ä»¥çœ‹è§å“ªäº›å¯¹è±¡ï¼Œçœ‹ä¸è§å“ªäº›å¯¹è±¡ã€‚é€šè¿‡ä»”ç»†å®šä¹‰å¯è§æ€§è§„åˆ™ï¼Œæ•°æ®åº“å¯ä»¥å‘åº”ç”¨ç¨‹åºå‘ˆç°ä¸€è‡´çš„æ•°æ®åº“å¿«ç…§ã€‚å·¥ä½œå¦‚ä¸‹ï¼š</p><ol><li>åœ¨æ¯æ¬¡äº‹åŠ¡å¼€å§‹æ—¶ï¼Œæ•°æ®åº“åˆ—å‡ºå½“æ—¶æ‰€æœ‰å…¶ä»–ï¼ˆå°šæœªæäº¤æˆ–å°šæœªä¸­æ­¢ï¼‰çš„äº‹åŠ¡æ¸…å•ï¼Œå³ä½¿ä¹‹åæäº¤äº†ï¼Œè¿™äº›äº‹åŠ¡å·²æ‰§è¡Œçš„ä»»ä½•å†™å…¥ä¹Ÿéƒ½ä¼šè¢«å¿½ç•¥ã€‚</li><li>è¢«ä¸­æ­¢äº‹åŠ¡æ‰€æ‰§è¡Œçš„ä»»ä½•å†™å…¥éƒ½å°†è¢«å¿½ç•¥ã€‚</li><li>ç”±å…·æœ‰è¾ƒæ™šäº‹åŠ¡IDï¼ˆå³ï¼Œåœ¨å½“å‰äº‹åŠ¡å¼€å§‹ä¹‹åå¼€å§‹çš„ï¼‰çš„äº‹åŠ¡æ‰€åšçš„ä»»ä½•å†™å…¥éƒ½è¢«å¿½ç•¥ï¼Œè€Œä¸ç®¡è¿™äº›äº‹åŠ¡æ˜¯å¦å·²ç»æäº¤ã€‚</li><li>æ‰€æœ‰å…¶ä»–å†™å…¥ï¼Œå¯¹åº”ç”¨éƒ½æ˜¯å¯è§çš„ã€‚</li></ol><p>è¿™äº›è§„åˆ™é€‚ç”¨äºåˆ›å»ºå’Œåˆ é™¤å¯¹è±¡ã€‚åœ¨<a href="./img/fig7-7.png">å›¾7-7</a>ä¸­ï¼Œå½“äº‹åŠ¡12 ä»è´¦æˆ·2 è¯»å–æ—¶ï¼Œå®ƒä¼šçœ‹åˆ° $500 çš„ä½™é¢ï¼Œå› ä¸º $500 ä½™é¢çš„åˆ é™¤æ˜¯ç”±äº‹åŠ¡13 å®Œæˆçš„ï¼ˆæ ¹æ®è§„åˆ™3ï¼Œäº‹åŠ¡12 çœ‹ä¸åˆ°äº‹åŠ¡13 æ‰§è¡Œçš„åˆ é™¤ï¼‰ï¼Œä¸”400ç¾å…ƒè®°å½•çš„åˆ›å»ºä¹Ÿæ˜¯ä¸å¯è§çš„ï¼ˆæŒ‰ç…§ç›¸åŒçš„è§„åˆ™ï¼‰ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œå¦‚æœä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œåˆ™å¯è§ä¸€ä¸ªå¯¹è±¡ï¼š</p><ul><li>è¯»äº‹åŠ¡å¼€å§‹æ—¶ï¼Œåˆ›å»ºè¯¥å¯¹è±¡çš„äº‹åŠ¡å·²ç»æäº¤ã€‚</li><li>å¯¹è±¡æœªè¢«æ ‡è®°ä¸ºåˆ é™¤ï¼Œæˆ–å¦‚æœè¢«æ ‡è®°ä¸ºåˆ é™¤ï¼Œè¯·æ±‚åˆ é™¤çš„äº‹åŠ¡åœ¨è¯»äº‹åŠ¡å¼€å§‹æ—¶å°šæœªæäº¤ã€‚</li></ul><p>é•¿æ—¶é—´è¿è¡Œçš„äº‹åŠ¡å¯èƒ½ä¼šé•¿æ—¶é—´ä½¿ç”¨å¿«ç…§ï¼Œå¹¶ç»§ç»­è¯»å–ï¼ˆä»å…¶ä»–äº‹åŠ¡çš„è§’åº¦æ¥çœ‹ï¼‰æ—©å·²è¢«è¦†ç›–æˆ–åˆ é™¤çš„å€¼ã€‚ç”±äºä»æ¥ä¸åŸåœ°æ›´æ–°å€¼ï¼Œè€Œæ˜¯æ¯æ¬¡å€¼æ”¹å˜æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œæ•°æ®åº“å¯ä»¥åœ¨æä¾›ä¸€è‡´å¿«ç…§çš„åŒæ—¶åªäº§ç”Ÿå¾ˆå°çš„é¢å¤–å¼€é”€ã€‚</p><h4 id="ç´¢å¼•å’Œå¿«ç…§éš”ç¦»" tabindex="-1"><a class="header-anchor" href="#ç´¢å¼•å’Œå¿«ç…§éš”ç¦»" aria-hidden="true">#</a> ç´¢å¼•å’Œå¿«ç…§éš”ç¦»</h4><p>ç´¢å¼•å¦‚ä½•åœ¨å¤šç‰ˆæœ¬æ•°æ®åº“ä¸­å·¥ä½œï¼Ÿä¸€ç§é€‰æ‹©æ˜¯ä½¿ç´¢å¼•ç®€å•åœ°æŒ‡å‘å¯¹è±¡çš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œå¹¶ä¸”éœ€è¦ç´¢å¼•æŸ¥è¯¢æ¥è¿‡æ»¤æ‰å½“å‰äº‹åŠ¡ä¸å¯è§çš„ä»»ä½•å¯¹è±¡ç‰ˆæœ¬ã€‚å½“åƒåœ¾æ”¶é›†åˆ é™¤ä»»ä½•äº‹åŠ¡ä¸å†å¯è§çš„æ—§å¯¹è±¡ç‰ˆæœ¬æ—¶ï¼Œç›¸åº”çš„ç´¢å¼•æ¡ç›®ä¹Ÿå¯ä»¥è¢«åˆ é™¤ã€‚</p><p>åœ¨å®è·µä¸­ï¼Œè®¸å¤šå®ç°ç»†èŠ‚å†³å®šäº†å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶çš„æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåŒä¸€å¯¹è±¡çš„ä¸åŒç‰ˆæœ¬å¯ä»¥æ”¾å…¥åŒä¸€ä¸ªé¡µé¢ä¸­ï¼ŒPostgreSQLçš„ä¼˜åŒ–å¯ä»¥é¿å…æ›´æ–°ç´¢å¼•ã€31ã€‘ã€‚</p><p>åœ¨CouchDBï¼ŒDatomicå’ŒLMDBä¸­ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•ã€‚è™½ç„¶å®ƒä»¬ä¹Ÿä½¿ç”¨<a href="/book/ddia/ch3.html#B%E6%A0%91" class="">Bæ ‘</a>ï¼Œä½†å®ƒä»¬ä½¿ç”¨çš„æ˜¯ä¸€ç§<strong>ä»…è¿½åŠ /å†™æ—¶æ‹·è´ï¼ˆappend-only/copy-on-writeï¼‰</strong> çš„å˜ä½“ï¼Œå®ƒä»¬åœ¨æ›´æ–°æ—¶ä¸è¦†ç›–æ ‘çš„é¡µé¢ï¼Œè€Œä¸ºæ¯ä¸ªä¿®æ”¹é¡µé¢åˆ›å»ºä¸€ä»½å‰¯æœ¬ã€‚ä»çˆ¶é¡µé¢ç›´åˆ°æ ‘æ ¹éƒ½ä¼šçº§è”æ›´æ–°ï¼Œä»¥æŒ‡å‘å®ƒä»¬å­é¡µé¢çš„æ–°ç‰ˆæœ¬ã€‚ä»»ä½•ä¸å—å†™å…¥å½±å“çš„é¡µé¢éƒ½ä¸éœ€è¦è¢«å¤åˆ¶ï¼Œå¹¶ä¸”ä¿æŒä¸å˜ã€33,34,35ã€‘ã€‚</p><p>ä½¿ç”¨ä»…è¿½åŠ çš„Bæ ‘ï¼Œæ¯ä¸ªå†™å…¥äº‹åŠ¡ï¼ˆæˆ–ä¸€æ‰¹äº‹åŠ¡ï¼‰éƒ½ä¼šåˆ›å»ºä¸€é¢—æ–°çš„Bæ ‘ï¼Œå½“åˆ›å»ºæ—¶ï¼Œä»è¯¥ç‰¹å®šæ ‘æ ¹ç”Ÿé•¿çš„æ ‘å°±æ˜¯æ•°æ®åº“çš„ä¸€ä¸ªä¸€è‡´æ€§å¿«ç…§ã€‚æ²¡å¿…è¦æ ¹æ®äº‹åŠ¡IDè¿‡æ»¤æ‰å¯¹è±¡ï¼Œå› ä¸ºåç»­å†™å…¥ä¸èƒ½ä¿®æ”¹ç°æœ‰çš„Bæ ‘ï¼›å®ƒä»¬åªèƒ½åˆ›å»ºæ–°çš„æ ‘æ ¹ã€‚ä½†è¿™ç§æ–¹æ³•ä¹Ÿéœ€è¦ä¸€ä¸ªè´Ÿè´£å‹ç¼©å’Œåƒåœ¾æ”¶é›†çš„åå°è¿›ç¨‹ã€‚</p><h4 id="å¯é‡å¤è¯»ä¸å‘½åæ··æ·†" tabindex="-1"><a class="header-anchor" href="#å¯é‡å¤è¯»ä¸å‘½åæ··æ·†" aria-hidden="true">#</a> å¯é‡å¤è¯»ä¸å‘½åæ··æ·†</h4><p>å¿«ç…§éš”ç¦»æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„éš”ç¦»çº§åˆ«ï¼Œç‰¹åˆ«å¯¹äºåªè¯»äº‹åŠ¡è€Œè¨€ã€‚ä½†æ˜¯ï¼Œè®¸å¤šæ•°æ®åº“å®ç°äº†å®ƒï¼Œå´ç”¨ä¸åŒçš„åå­—æ¥ç§°å‘¼ã€‚åœ¨Oracleä¸­ç§°ä¸º<strong>å¯ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</strong> çš„ï¼Œåœ¨PostgreSQLå’ŒMySQLä¸­ç§°ä¸º<strong>å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰</strong>ã€23ã€‘ã€‚</p><p>è¿™ç§å‘½åæ··æ·†çš„åŸå› æ˜¯SQLæ ‡å‡†æ²¡æœ‰<strong>å¿«ç…§éš”ç¦»</strong>çš„æ¦‚å¿µï¼Œå› ä¸ºæ ‡å‡†æ˜¯åŸºäºSystem R 1975å¹´å®šä¹‰çš„éš”ç¦»çº§åˆ«ã€2ã€‘ï¼Œé‚£æ—¶å€™<strong>å¿«ç…§éš”ç¦»</strong>å°šæœªå‘æ˜ã€‚ç›¸åï¼Œå®ƒå®šä¹‰äº†<strong>å¯é‡å¤è¯»</strong>ï¼Œè¡¨é¢ä¸Šçœ‹èµ·æ¥ä¸å¿«ç…§éš”ç¦»å¾ˆç›¸ä¼¼ã€‚ PostgreSQLå’ŒMySQLç§°å…¶<strong>å¿«ç…§éš”ç¦»</strong>çº§åˆ«ä¸º<strong>å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰</strong>ï¼Œå› ä¸ºè¿™æ ·ç¬¦åˆæ ‡å‡†è¦æ±‚ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥å£°ç§°è‡ªå·±â€œæ ‡å‡†å…¼å®¹â€ã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼ŒSQLæ ‡å‡†å¯¹éš”ç¦»çº§åˆ«çš„å®šä¹‰æ˜¯æœ‰ç¼ºé™·çš„â€”â€”æ¨¡ç³Šï¼Œä¸ç²¾ç¡®ï¼Œå¹¶ä¸åƒæ ‡å‡†åº”æœ‰çš„æ ·å­ç‹¬ç«‹äºå®ç°ã€28ã€‘ã€‚æœ‰å‡ ä¸ªæ•°æ®åº“å®ç°äº†å¯é‡å¤è¯»ï¼Œä½†å®ƒä»¬å®é™…æä¾›çš„ä¿è¯å­˜åœ¨å¾ˆå¤§çš„å·®å¼‚ï¼Œå°½ç®¡è¡¨é¢ä¸Šæ˜¯æ ‡å‡†åŒ–çš„ã€23ã€‘ã€‚åœ¨ç ”ç©¶æ–‡çŒ®ã€29,30ã€‘ä¸­å·²ç»æœ‰äº†å¯é‡å¤è¯»çš„æ­£å¼å®šä¹‰ï¼Œä½†å¤§å¤šæ•°çš„å®ç°å¹¶ä¸èƒ½æ»¡è¶³è¿™ä¸ªæ­£å¼å®šä¹‰ã€‚æœ€åï¼ŒIBM DB2ä½¿ç”¨â€œå¯é‡å¤è¯»â€æ¥å¼•ç”¨å¯ä¸²è¡ŒåŒ–ã€8ã€‘ã€‚</p><p>ç»“æœï¼Œæ²¡æœ‰äººçœŸæ­£çŸ¥é“<strong>å¯é‡å¤è¯»</strong>çš„æ„æ€ã€‚</p><h3 id="é˜²æ­¢ä¸¢å¤±æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#é˜²æ­¢ä¸¢å¤±æ›´æ–°" aria-hidden="true">#</a> é˜²æ­¢ä¸¢å¤±æ›´æ–°</h3><p>åˆ°ç›®å‰ä¸ºæ­¢å·²ç»è®¨è®ºçš„<strong>è¯»å·²æäº¤</strong>å’Œ<strong>å¿«ç…§éš”ç¦»</strong>çº§åˆ«ï¼Œä¸»è¦ä¿è¯äº†<strong>åªè¯»äº‹åŠ¡åœ¨å¹¶å‘å†™å…¥æ—¶</strong>å¯ä»¥çœ‹åˆ°ä»€ä¹ˆã€‚å´å¿½ç•¥äº†ä¸¤ä¸ªäº‹åŠ¡å¹¶å‘å†™å…¥çš„é—®é¢˜â€”â€”æˆ‘ä»¬åªè®¨è®ºäº†è„å†™ï¼ˆè¯·å‚é˜…â€œ<a href="#%E6%B2%A1%E6%9C%89%E8%84%8F%E5%86%99">æ²¡æœ‰è„å†™</a>â€ï¼‰ï¼Œä¸€ç§ç‰¹å®šç±»å‹çš„å†™-å†™å†²çªæ˜¯å¯èƒ½å‡ºç°çš„ã€‚</p><p>å¹¶å‘çš„å†™å…¥äº‹åŠ¡ä¹‹é—´è¿˜æœ‰å…¶ä»–å‡ ç§æœ‰è¶£çš„å†²çªã€‚å…¶ä¸­æœ€ç€åçš„æ˜¯<strong>ä¸¢å¤±æ›´æ–°ï¼ˆlost updateï¼‰</strong> é—®é¢˜ï¼Œå¦‚<a href="./img/fig7-1.png">å›¾7-1</a>æ‰€ç¤ºï¼Œä»¥ä¸¤ä¸ªå¹¶å‘è®¡æ•°å™¨å¢é‡ä¸ºä¾‹ã€‚</p><p>å¦‚æœåº”ç”¨ä»æ•°æ®åº“ä¸­è¯»å–ä¸€äº›å€¼ï¼Œä¿®æ”¹å®ƒå¹¶å†™å›ä¿®æ”¹çš„å€¼ï¼ˆè¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—ï¼‰ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿä¸¢å¤±æ›´æ–°çš„é—®é¢˜ã€‚å¦‚æœä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ‰§è¡Œï¼Œåˆ™å…¶ä¸­ä¸€ä¸ªçš„ä¿®æ”¹å¯èƒ½ä¼šä¸¢å¤±ï¼Œå› ä¸ºç¬¬äºŒä¸ªå†™å…¥çš„å†…å®¹å¹¶æ²¡æœ‰åŒ…æ‹¬ç¬¬ä¸€ä¸ªäº‹åŠ¡çš„ä¿®æ”¹ï¼ˆæœ‰æ—¶ä¼šè¯´åé¢å†™å…¥<strong>ç‹ æï¼ˆclobberï¼‰</strong> äº†å‰é¢çš„å†™å…¥ï¼‰è¿™ç§æ¨¡å¼å‘ç”Ÿåœ¨å„ç§ä¸åŒçš„æƒ…å†µä¸‹ï¼š</p><ul><li>å¢åŠ è®¡æ•°å™¨æˆ–æ›´æ–°è´¦æˆ·ä½™é¢ï¼ˆéœ€è¦è¯»å–å½“å‰å€¼ï¼Œè®¡ç®—æ–°å€¼å¹¶å†™å›æ›´æ–°åçš„å€¼ï¼‰</li><li>åœ¨å¤æ‚å€¼ä¸­è¿›è¡Œæœ¬åœ°ä¿®æ”¹ï¼šä¾‹å¦‚ï¼Œå°†å…ƒç´ æ·»åŠ åˆ°JSONæ–‡æ¡£ä¸­çš„ä¸€ä¸ªåˆ—è¡¨ï¼ˆéœ€è¦è§£ææ–‡æ¡£ï¼Œè¿›è¡Œæ›´æ”¹å¹¶å†™å›ä¿®æ”¹çš„æ–‡æ¡£ï¼‰</li><li>ä¸¤ä¸ªç”¨æˆ·åŒæ—¶ç¼–è¾‘wikié¡µé¢ï¼Œæ¯ä¸ªç”¨æˆ·é€šè¿‡å°†æ•´ä¸ªé¡µé¢å†…å®¹å‘é€åˆ°æœåŠ¡å™¨æ¥ä¿å­˜å…¶æ›´æ”¹ï¼Œè¦†å†™æ•°æ®åº“ä¸­å½“å‰çš„ä»»ä½•å†…å®¹ã€‚</li></ul><p>è¿™æ˜¯ä¸€ä¸ªæ™®éçš„é—®é¢˜ï¼Œæ‰€ä»¥å·²ç»å¼€å‘äº†å„ç§è§£å†³æ–¹æ¡ˆã€‚</p><h4 id="åŸå­å†™" tabindex="-1"><a class="header-anchor" href="#åŸå­å†™" aria-hidden="true">#</a> åŸå­å†™</h4><p>è®¸å¤šæ•°æ®åº“æä¾›äº†åŸå­æ›´æ–°æ“ä½œï¼Œä»è€Œæ¶ˆé™¤äº†åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­æ‰§è¡Œè¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—çš„éœ€è¦ã€‚å¦‚æœä½ çš„ä»£ç å¯ä»¥ç”¨è¿™äº›æ“ä½œæ¥è¡¨è¾¾ï¼Œé‚£è¿™é€šå¸¸æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„æŒ‡ä»¤åœ¨å¤§å¤šæ•°å…³ç³»æ•°æ®åº“ä¸­æ˜¯å¹¶å‘å®‰å…¨çš„ï¼š</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> counters <span class="token keyword">SET</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token keyword">WHERE</span> <span class="token keyword">key</span> <span class="token operator">=</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p>ç±»ä¼¼åœ°ï¼ŒåƒMongoDBè¿™æ ·çš„æ–‡æ¡£æ•°æ®åº“æä¾›äº†å¯¹JSONæ–‡æ¡£çš„ä¸€éƒ¨åˆ†è¿›è¡Œæœ¬åœ°ä¿®æ”¹çš„åŸå­æ“ä½œï¼ŒRedisæä¾›äº†ä¿®æ”¹æ•°æ®ç»“æ„ï¼ˆå¦‚ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰çš„åŸå­æ“ä½œã€‚å¹¶ä¸æ˜¯æ‰€æœ‰çš„å†™æ“ä½œéƒ½å¯ä»¥ç”¨åŸå­æ“ä½œçš„æ–¹å¼æ¥è¡¨è¾¾ï¼Œä¾‹å¦‚ç»´åŸºé¡µé¢çš„æ›´æ–°æ¶‰åŠåˆ°ä»»æ„æ–‡æœ¬ç¼–è¾‘<sup class="footnote-ref"><a href="#footnote10">[10]</a><a class="footnote-anchor" id="footnote-ref10"></a></sup>ï¼Œä½†æ˜¯åœ¨å¯ä»¥ä½¿ç”¨åŸå­æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå®ƒä»¬é€šå¸¸æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p><p>åŸå­æ“ä½œé€šå¸¸é€šè¿‡åœ¨è¯»å–å¯¹è±¡æ—¶ï¼Œè·å–å…¶ä¸Šçš„æ’å®ƒé”æ¥å®ç°ã€‚ä»¥ä¾¿æ›´æ–°å®Œæˆä¹‹å‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡å¯ä»¥è¯»å–å®ƒã€‚è¿™ç§æŠ€æœ¯æœ‰æ—¶è¢«ç§°ä¸º<strong>æ¸¸æ ‡ç¨³å®šæ€§ï¼ˆcursor stabilityï¼‰</strong>ã€36,37ã€‘ã€‚å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ç®€å•åœ°å¼ºåˆ¶æ‰€æœ‰çš„åŸå­æ“ä½œåœ¨å•ä¸€çº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼ŒORMæ¡†æ¶å¾ˆå®¹æ˜“æ„å¤–åœ°æ‰§è¡Œä¸å®‰å…¨çš„è¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ•°æ®åº“æä¾›çš„åŸå­æ“ä½œã€38ã€‘ã€‚å¦‚æœä½ çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆé‚£å½“ç„¶ä¸æ˜¯é—®é¢˜ï¼Œä½†å®ƒç»å¸¸äº§ç”Ÿé‚£ç§å¾ˆéš¾æµ‹å‡ºæ¥çš„å¾®å¦™Bugã€‚</p><h4 id="æ˜¾å¼é”å®š" tabindex="-1"><a class="header-anchor" href="#æ˜¾å¼é”å®š" aria-hidden="true">#</a> æ˜¾å¼é”å®š</h4><p>å¦‚æœæ•°æ®åº“çš„å†…ç½®åŸå­æ“ä½œæ²¡æœ‰æä¾›å¿…è¦çš„åŠŸèƒ½ï¼Œé˜²æ­¢ä¸¢å¤±æ›´æ–°çš„å¦ä¸€ä¸ªé€‰æ‹©æ˜¯è®©åº”ç”¨ç¨‹åºæ˜¾å¼åœ°é”å®šå°†è¦æ›´æ–°çš„å¯¹è±¡ã€‚ç„¶ååº”ç”¨ç¨‹åºå¯ä»¥æ‰§è¡Œè¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—ï¼Œå¦‚æœä»»ä½•å…¶ä»–äº‹åŠ¡å°è¯•åŒæ—¶è¯»å–åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¼ºåˆ¶ç­‰å¾…ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ª<strong>è¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—</strong>å®Œæˆã€‚</p><p>ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªå¤šäººæ¸¸æˆï¼Œå…¶ä¸­å‡ ä¸ªç©å®¶å¯ä»¥åŒæ—¶ç§»åŠ¨ç›¸åŒçš„æ£‹å­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªåŸå­æ“ä½œå¯èƒ½æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºè¿˜éœ€è¦ç¡®ä¿ç©å®¶çš„ç§»åŠ¨ç¬¦åˆæ¸¸æˆè§„åˆ™ï¼Œè¿™å¯èƒ½æ¶‰åŠåˆ°ä¸€äº›ä¸èƒ½åˆç†åœ°ç”¨æ•°æ®åº“æŸ¥è¯¢å®ç°çš„é€»è¾‘ã€‚ä½†ä½ å¯ä»¥ä½¿ç”¨é”æ¥é˜²æ­¢ä¸¤åç©å®¶åŒæ—¶ç§»åŠ¨ç›¸åŒçš„æ£‹å­ï¼Œå¦‚ä¾‹7-1æ‰€ç¤ºã€‚</p><p><strong>ä¾‹7-1 æ˜¾å¼é”å®šè¡Œä»¥é˜²æ­¢ä¸¢å¤±æ›´æ–°</strong></p><div class="language-plsql" data-ext="plsql"><pre class="language-plsql"><code><span class="token keyword">BEGIN</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> figures
	<span class="token keyword">WHERE</span> <span class="token keyword">name</span> <span class="token operator">=</span> <span class="token string">&#39;robot&#39;</span> <span class="token keyword">AND</span> game_id <span class="token operator">=</span> <span class="token number">222</span>
<span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span>

<span class="token comment">-- æ£€æŸ¥ç©å®¶çš„æ“ä½œæ˜¯å¦æœ‰æ•ˆï¼Œç„¶åæ›´æ–°å…ˆå‰SELECTè¿”å›æ£‹å­çš„ä½ç½®ã€‚</span>
<span class="token keyword">UPDATE</span> figures <span class="token keyword">SET</span> position <span class="token operator">=</span> <span class="token string">&#39;c4&#39;</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>FOR UPDATE</code>å­å¥å‘Šè¯‰æ•°æ®åº“åº”è¯¥å¯¹è¯¥æŸ¥è¯¢è¿”å›çš„æ‰€æœ‰è¡ŒåŠ é”ã€‚</li></ul><p>è¿™æ˜¯æœ‰æ•ˆçš„ï¼Œä½†è¦åšå¯¹ï¼Œä½ éœ€è¦ä»”ç»†è€ƒè™‘åº”ç”¨é€»è¾‘ã€‚å¿˜è®°åœ¨ä»£ç æŸå¤„åŠ é”å¾ˆå®¹æ˜“å¼•å…¥ç«äº‰æ¡ä»¶ã€‚</p><h4 id="è‡ªåŠ¨æ£€æµ‹ä¸¢å¤±çš„æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨æ£€æµ‹ä¸¢å¤±çš„æ›´æ–°" aria-hidden="true">#</a> è‡ªåŠ¨æ£€æµ‹ä¸¢å¤±çš„æ›´æ–°</h4><p>åŸå­æ“ä½œå’Œé”æ˜¯é€šè¿‡å¼ºåˆ¶<strong>è¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—</strong>æŒ‰é¡ºåºå‘ç”Ÿï¼Œæ¥é˜²æ­¢ä¸¢å¤±æ›´æ–°çš„æ–¹æ³•ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯å…è®¸å®ƒä»¬å¹¶è¡Œæ‰§è¡Œï¼Œå¦‚æœäº‹åŠ¡ç®¡ç†å™¨æ£€æµ‹åˆ°ä¸¢å¤±æ›´æ–°ï¼Œåˆ™ä¸­æ­¢äº‹åŠ¡å¹¶å¼ºåˆ¶å®ƒä»¬é‡è¯•å…¶<strong>è¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—</strong>ã€‚</p><p>è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œæ•°æ®åº“å¯ä»¥ç»“åˆå¿«ç…§éš”ç¦»é«˜æ•ˆåœ°æ‰§è¡Œæ­¤æ£€æŸ¥ã€‚äº‹å®ä¸Šï¼ŒPostgreSQLçš„å¯é‡å¤è¯»ï¼ŒOracleçš„å¯ä¸²è¡ŒåŒ–å’ŒSQL Serverçš„å¿«ç…§éš”ç¦»çº§åˆ«ï¼Œéƒ½ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ä¸¢å¤±æ›´æ–°ï¼Œå¹¶ä¸­æ­¢æƒ¹éº»çƒ¦çš„äº‹åŠ¡ã€‚ä½†æ˜¯ï¼ŒMySQL/InnoDBçš„å¯é‡å¤è¯»å¹¶ä¸ä¼šæ£€æµ‹<strong>ä¸¢å¤±æ›´æ–°</strong>ã€23ã€‘ã€‚ä¸€äº›ä½œè€…ã€28,30ã€‘è®¤ä¸ºï¼Œæ•°æ®åº“å¿…é¡»èƒ½é˜²æ­¢ä¸¢å¤±æ›´æ–°æ‰ç§°å¾—ä¸Šæ˜¯æä¾›äº†<strong>å¿«ç…§éš”ç¦»</strong>ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªå®šä¹‰ä¸‹ï¼ŒMySQLä¸‹ä¸æä¾›å¿«ç…§éš”ç¦»ã€‚</p><p>ä¸¢å¤±æ›´æ–°æ£€æµ‹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åŠŸèƒ½ï¼Œå› ä¸ºå®ƒä¸éœ€è¦åº”ç”¨ä»£ç ä½¿ç”¨ä»»ä½•ç‰¹æ®Šçš„æ•°æ®åº“åŠŸèƒ½ï¼Œä½ å¯èƒ½ä¼šå¿˜è®°ä½¿ç”¨é”æˆ–åŸå­æ“ä½œï¼Œä»è€Œå¼•å…¥é”™è¯¯ï¼›ä½†ä¸¢å¤±æ›´æ–°çš„æ£€æµ‹æ˜¯è‡ªåŠ¨å‘ç”Ÿçš„ï¼Œå› æ­¤ä¸å¤ªå®¹æ˜“å‡ºé”™ã€‚</p><h4 id="æ¯”è¾ƒå¹¶è®¾ç½®-cas" tabindex="-1"><a class="header-anchor" href="#æ¯”è¾ƒå¹¶è®¾ç½®-cas" aria-hidden="true">#</a> æ¯”è¾ƒå¹¶è®¾ç½®ï¼ˆCASï¼‰</h4><p>åœ¨ä¸æä¾›äº‹åŠ¡çš„æ•°æ®åº“ä¸­ï¼Œæœ‰æ—¶ä¼šå‘ç°ä¸€ç§åŸå­æ“ä½œï¼š<strong>æ¯”è¾ƒå¹¶è®¾ç½®ï¼ˆCAS, Compare And Setï¼‰</strong>ï¼ˆå…ˆå‰åœ¨â€œ<a href="#%E5%8D%95%E5%AF%B9%E8%B1%A1%E5%86%99%E5%85%A5">å•å¯¹è±¡å†™å…¥</a>â€ä¸­æåˆ°ï¼‰ã€‚æ­¤æ“ä½œçš„ç›®çš„æ˜¯ä¸ºäº†é¿å…ä¸¢å¤±æ›´æ–°ï¼šåªæœ‰å½“å‰å€¼ä»ä¸Šæ¬¡è¯»å–æ—¶ä¸€ç›´æœªæ”¹å˜ï¼Œæ‰å…è®¸æ›´æ–°å‘ç”Ÿã€‚å¦‚æœå½“å‰å€¼ä¸å…ˆå‰è¯»å–çš„å€¼ä¸åŒ¹é…ï¼Œåˆ™æ›´æ–°ä¸èµ·ä½œç”¨ï¼Œä¸”å¿…é¡»é‡è¯•è¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸ºäº†é˜²æ­¢ä¸¤ä¸ªç”¨æˆ·åŒæ—¶æ›´æ–°åŒä¸€ä¸ªwikié¡µé¢ï¼Œå¯ä»¥å°è¯•ç±»ä¼¼è¿™æ ·çš„æ–¹å¼ï¼Œåªæœ‰å½“ç”¨æˆ·å¼€å§‹ç¼–è¾‘é¡µé¢å†…å®¹æ—¶ï¼Œæ‰ä¼šå‘ç”Ÿæ›´æ–°ï¼š</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- æ ¹æ®æ•°æ®åº“çš„å®ç°æƒ…å†µï¼Œè¿™å¯èƒ½å®‰å…¨ä¹Ÿå¯èƒ½ä¸å®‰å…¨</span>
<span class="token keyword">UPDATE</span> wiki_pages <span class="token keyword">SET</span> content <span class="token operator">=</span> <span class="token string">&#39;æ–°å†…å®¹&#39;</span>
  <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1234</span> <span class="token operator">AND</span> content <span class="token operator">=</span> <span class="token string">&#39;æ—§å†…å®¹&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p>å¦‚æœå†…å®¹å·²ç»æ›´æ”¹å¹¶ä¸”ä¸å†ä¸â€œæ—§å†…å®¹â€ç›¸åŒ¹é…ï¼Œåˆ™æ­¤æ›´æ–°å°†ä¸èµ·ä½œç”¨ï¼Œå› æ­¤æ‚¨éœ€è¦æ£€æŸ¥æ›´æ–°æ˜¯å¦ç”Ÿæ•ˆï¼Œå¿…è¦æ—¶é‡è¯•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ•°æ®åº“å…è®¸<code>WHERE</code>å­å¥ä»æ—§å¿«ç…§ä¸­è¯»å–ï¼Œåˆ™æ­¤è¯­å¥å¯èƒ½æ— æ³•é˜²æ­¢ä¸¢å¤±æ›´æ–°ï¼Œå› ä¸ºå³ä½¿å‘ç”Ÿäº†å¦ä¸€ä¸ªå¹¶å‘å†™å…¥ï¼Œ<code>WHERE</code>æ¡ä»¶ä¹Ÿå¯èƒ½ä¸ºçœŸã€‚åœ¨ä¾èµ–æ•°æ®åº“çš„CASæ“ä½œå‰è¦æ£€æŸ¥å…¶æ˜¯å¦å®‰å…¨ã€‚</p><h4 id="å†²çªè§£å†³å’Œå¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#å†²çªè§£å†³å’Œå¤åˆ¶" aria-hidden="true">#</a> å†²çªè§£å†³å’Œå¤åˆ¶</h4><p>åœ¨å¤åˆ¶æ•°æ®åº“ä¸­ï¼ˆè¯·å‚é˜…<a href="/book/ddia/ch5.html" class="">ç¬¬äº”ç« </a>ï¼‰ï¼Œé˜²æ­¢ä¸¢å¤±çš„æ›´æ–°éœ€è¦è€ƒè™‘å¦ä¸€ä¸ªç»´åº¦ï¼šç”±äºåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šå­˜åœ¨æ•°æ®å‰¯æœ¬ï¼Œå¹¶ä¸”åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„æ•°æ®å¯èƒ½è¢«å¹¶å‘åœ°ä¿®æ”¹ï¼Œå› æ­¤éœ€è¦é‡‡å–ä¸€äº›é¢å¤–çš„æ­¥éª¤æ¥é˜²æ­¢ä¸¢å¤±æ›´æ–°ã€‚</p><p>é”å’ŒCASæ“ä½œå‡å®šåªæœ‰ä¸€ä¸ªæœ€æ–°çš„æ•°æ®å‰¯æœ¬ã€‚ä½†æ˜¯å¤šä¸»æˆ–æ— ä¸»å¤åˆ¶çš„æ•°æ®åº“é€šå¸¸å…è®¸å¤šä¸ªå†™å…¥å¹¶å‘æ‰§è¡Œï¼Œå¹¶å¼‚æ­¥å¤åˆ¶åˆ°å‰¯æœ¬ä¸Šï¼Œå› æ­¤æ— æ³•ä¿è¯åªæœ‰ä¸€ä¸ªæœ€æ–°æ•°æ®çš„å‰¯æœ¬ã€‚æ‰€ä»¥åŸºäºé”æˆ–CASæ“ä½œçš„æŠ€æœ¯ä¸é€‚ç”¨äºè¿™ç§æƒ…å†µã€‚ ï¼ˆæˆ‘ä»¬å°†åœ¨â€œ<a href="/book/ddia/ch9.html#%E7%BA%BF%E6%80%A7%E4%B8%80%E8%87%B4%E6%80%A7" class="">çº¿æ€§ä¸€è‡´æ€§</a>â€ä¸­æ›´è¯¦ç»†åœ°è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚ï¼‰</p><p>ç›¸åï¼Œå¦‚â€œ<a href="/book/ddia/ch5.html#%E6%A3%80%E6%B5%8B%E5%B9%B6%E5%8F%91%E5%86%99%E5%85%A5" class="">æ£€æµ‹å¹¶å‘å†™å…¥</a>â€ä¸€èŠ‚æ‰€è¿°ï¼Œè¿™ç§å¤åˆ¶æ•°æ®åº“ä¸­çš„ä¸€ç§å¸¸è§æ–¹æ³•æ˜¯å…è®¸å¹¶å‘å†™å…¥åˆ›å»ºå¤šä¸ªå†²çªç‰ˆæœ¬çš„å€¼ï¼ˆä¹Ÿç§°ä¸ºå…„å¼Ÿï¼‰ï¼Œå¹¶ä½¿ç”¨åº”ç”¨ä»£ç æˆ–ç‰¹æ®Šæ•°æ®ç»“æ„åœ¨äº‹å®å‘ç”Ÿä¹‹åè§£å†³å’Œåˆå¹¶è¿™äº›ç‰ˆæœ¬ã€‚</p><p>åŸå­æ“ä½œå¯ä»¥åœ¨å¤åˆ¶çš„ä¸Šä¸‹æ–‡ä¸­å¾ˆå¥½åœ°å·¥ä½œï¼Œå°¤å…¶å½“å®ƒä»¬å…·æœ‰å¯äº¤æ¢æ€§æ—¶ï¼ˆå³ï¼Œå¯ä»¥åœ¨ä¸åŒçš„å‰¯æœ¬ä¸Šä»¥ä¸åŒçš„é¡ºåºåº”ç”¨å®ƒä»¬ï¼Œä¸”ä»ç„¶å¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼‰ã€‚ä¾‹å¦‚ï¼Œé€’å¢è®¡æ•°å™¨æˆ–å‘é›†åˆæ·»åŠ å…ƒç´ æ˜¯å¯äº¤æ¢çš„æ“ä½œã€‚è¿™æ˜¯Riak 2.0æ•°æ®ç±»å‹èƒŒåçš„æ€æƒ³ï¼Œå®ƒå¯ä»¥é˜²æ­¢å¤åˆ¶å‰¯æœ¬ä¸¢å¤±æ›´æ–°ã€‚å½“ä¸åŒçš„å®¢æˆ·ç«¯åŒæ—¶æ›´æ–°ä¸€ä¸ªå€¼æ—¶ï¼ŒRiakè‡ªåŠ¨å°†æ›´æ–°åˆå¹¶åœ¨ä¸€èµ·ï¼Œä»¥å…ä¸¢å¤±æ›´æ–°ã€39ã€‘ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œæœ€åå†™å…¥èƒœåˆ©ï¼ˆLWWï¼‰çš„å†²çªè§£å†³æ–¹æ³•å¾ˆå®¹æ˜“ä¸¢å¤±æ›´æ–°ï¼Œå¦‚â€œ<a href="/book/ddia/ch5.html#%E6%9C%80%E5%90%8E%E5%86%99%E5%85%A5%E8%83%9C%E5%88%A9%EF%BC%88%E4%B8%A2%E5%BC%83%E5%B9%B6%E5%8F%91%E5%86%99%E5%85%A5%EF%BC%89" class="">æœ€åå†™å…¥èƒœåˆ©ï¼ˆä¸¢å¼ƒå¹¶å‘å†™å…¥ï¼‰</a>â€ä¸­æ‰€è¿°ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒLWWæ˜¯è®¸å¤šå¤åˆ¶æ•°æ®åº“ä¸­çš„é»˜è®¤æ–¹æ¡ˆã€‚</p><h3 id="å†™å…¥åæ–œä¸å¹»è¯»" tabindex="-1"><a class="header-anchor" href="#å†™å…¥åæ–œä¸å¹»è¯»" aria-hidden="true">#</a> å†™å…¥åæ–œä¸å¹»è¯»</h3><p>å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†<strong>è„å†™</strong>å’Œ<strong>ä¸¢å¤±æ›´æ–°</strong>ï¼Œå½“ä¸åŒçš„äº‹åŠ¡å¹¶å‘åœ°å°è¯•å†™å…¥ç›¸åŒçš„å¯¹è±¡æ—¶ï¼Œä¼šå‡ºç°è¿™ä¸¤ç§ç«äº‰æ¡ä»¶ã€‚ä¸ºäº†é¿å…æ•°æ®æŸåï¼Œè¿™äº›ç«äº‰æ¡ä»¶éœ€è¦è¢«é˜»æ­¢â€”â€”æ—¢å¯ä»¥ç”±æ•°æ®åº“è‡ªåŠ¨æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡é”å’ŒåŸå­å†™æ“ä½œè¿™ç±»æ‰‹åŠ¨å®‰å…¨æªæ–½æ¥é˜²æ­¢ã€‚</p><p>ä½†æ˜¯ï¼Œå¹¶å‘å†™å…¥é—´å¯èƒ½å‘ç”Ÿçš„ç«äº‰æ¡ä»¶è¿˜æ²¡æœ‰å®Œã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€äº›æ›´å¾®å¦™çš„å†²çªä¾‹å­ã€‚</p><p>é¦–å…ˆï¼Œæƒ³è±¡ä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼šä½ æ­£åœ¨ä¸ºåŒ»é™¢å†™ä¸€ä¸ªåŒ»ç”Ÿè½®ç­ç®¡ç†ç¨‹åºã€‚åŒ»é™¢é€šå¸¸ä¼šåŒæ—¶è¦æ±‚å‡ ä½åŒ»ç”Ÿå¾…å‘½ï¼Œä½†åº•çº¿æ˜¯è‡³å°‘æœ‰ä¸€ä½åŒ»ç”Ÿåœ¨å¾…å‘½ã€‚åŒ»ç”Ÿå¯ä»¥æ”¾å¼ƒä»–ä»¬çš„ç­æ¬¡ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä»–ä»¬è‡ªå·±ç”Ÿç—…äº†ï¼‰ï¼Œåªè¦è‡³å°‘æœ‰ä¸€ä¸ªåŒäº‹åœ¨è¿™ä¸€ç­ä¸­ç»§ç»­å·¥ä½œã€40,41ã€‘ã€‚</p><p>ç°åœ¨æƒ³è±¡ä¸€ä¸‹ï¼ŒAliceå’ŒBobæ˜¯ä¸¤ä½å€¼ç­åŒ»ç”Ÿã€‚ä¸¤äººéƒ½æ„Ÿåˆ°ä¸é€‚ï¼Œæ‰€ä»¥ä»–ä»¬éƒ½å†³å®šè¯·å‡ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä»–ä»¬æ°å¥½åœ¨åŒä¸€æ—¶é—´ç‚¹å‡»æŒ‰é’®ä¸‹ç­ã€‚<a href="./img/fig7-8.png">å›¾7-8</a>è¯´æ˜äº†æ¥ä¸‹æ¥çš„äº‹æƒ…ã€‚</p><figure><img src="/assets/fig7-8-76t7iVoU.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-8 å†™å…¥åå·®å¯¼è‡´åº”ç”¨ç¨‹åºé”™è¯¯çš„ç¤ºä¾‹</strong></p><p>åœ¨ä¸¤ä¸ªäº‹åŠ¡ä¸­ï¼Œåº”ç”¨é¦–å…ˆæ£€æŸ¥æ˜¯å¦æœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„åŒ»ç”Ÿæ­£åœ¨å€¼ç­ï¼›å¦‚æœæ˜¯çš„è¯ï¼Œå®ƒå°±å‡å®šä¸€ååŒ»ç”Ÿå¯ä»¥å®‰å…¨åœ°ä¼‘ç­ã€‚ç”±äºæ•°æ®åº“ä½¿ç”¨å¿«ç…§éš”ç¦»ï¼Œä¸¤æ¬¡æ£€æŸ¥éƒ½è¿”å› 2 ï¼Œæ‰€ä»¥ä¸¤ä¸ªäº‹åŠ¡éƒ½è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚Aliceæ›´æ–°è‡ªå·±çš„è®°å½•ä¼‘ç­äº†ï¼Œè€ŒBobä¹Ÿåšäº†ä¸€æ ·çš„äº‹æƒ…ã€‚ä¸¤ä¸ªäº‹åŠ¡éƒ½æˆåŠŸæäº¤äº†ï¼Œç°åœ¨æ²¡æœ‰åŒ»ç”Ÿå€¼ç­äº†ã€‚è¿åäº†è‡³å°‘æœ‰ä¸€ååŒ»ç”Ÿåœ¨å€¼ç­çš„è¦æ±‚ã€‚</p><h4 id="å†™åå·®çš„ç‰¹å¾" tabindex="-1"><a class="header-anchor" href="#å†™åå·®çš„ç‰¹å¾" aria-hidden="true">#</a> å†™åå·®çš„ç‰¹å¾</h4><p>è¿™ç§å¼‚å¸¸ç§°ä¸º<strong>å†™åå·®</strong>ã€28ã€‘ã€‚å®ƒæ—¢ä¸æ˜¯<strong>è„å†™</strong>ï¼Œä¹Ÿä¸æ˜¯<strong>ä¸¢å¤±æ›´æ–°</strong>ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªäº‹åŠ¡æ­£åœ¨æ›´æ–°ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼ˆAliceå’ŒBobå„è‡ªçš„å¾…å‘½è®°å½•ï¼‰ã€‚åœ¨è¿™é‡Œå‘ç”Ÿçš„å†²çªå¹¶ä¸æ˜¯é‚£ä¹ˆæ˜æ˜¾ï¼Œä½†æ˜¯è¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªç«äº‰æ¡ä»¶ï¼šå¦‚æœä¸¤ä¸ªäº‹åŠ¡ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¿è¡Œï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªåŒ»ç”Ÿå°±ä¸èƒ½æ­‡ç­äº†ã€‚å¼‚å¸¸è¡Œä¸ºåªæœ‰åœ¨äº‹åŠ¡å¹¶å‘è¿›è¡Œæ—¶æ‰æœ‰å¯èƒ½ã€‚</p><p>å¯ä»¥å°†å†™å…¥åå·®è§†ä¸ºä¸¢å¤±æ›´æ–°é—®é¢˜çš„ä¸€èˆ¬åŒ–ã€‚å¦‚æœä¸¤ä¸ªäº‹åŠ¡è¯»å–ç›¸åŒçš„å¯¹è±¡ï¼Œç„¶åæ›´æ–°å…¶ä¸­ä¸€äº›å¯¹è±¡ï¼ˆä¸åŒçš„äº‹åŠ¡å¯èƒ½æ›´æ–°ä¸åŒçš„å¯¹è±¡ï¼‰ï¼Œåˆ™å¯èƒ½å‘ç”Ÿå†™å…¥åå·®ã€‚åœ¨å¤šä¸ªäº‹åŠ¡æ›´æ–°åŒä¸€ä¸ªå¯¹è±¡çš„ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå°±ä¼šå‘ç”Ÿè„å†™æˆ–ä¸¢å¤±æ›´æ–°ï¼ˆå–å†³äºæ—¶åºï¼‰ã€‚</p><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œæœ‰å„ç§ä¸åŒçš„æ–¹æ³•æ¥é˜²æ­¢ä¸¢å¤±çš„æ›´æ–°ã€‚ä½†å¯¹äºå†™åå·®ï¼Œæˆ‘ä»¬çš„é€‰æ‹©æ›´å—é™åˆ¶ï¼š</p><ul><li>ç”±äºæ¶‰åŠå¤šä¸ªå¯¹è±¡ï¼Œå•å¯¹è±¡çš„åŸå­æ“ä½œä¸èµ·ä½œç”¨ã€‚</li><li>ä¸å¹¸çš„æ˜¯ï¼Œåœ¨ä¸€äº›å¿«ç…§éš”ç¦»çš„å®ç°ä¸­ï¼Œè‡ªåŠ¨æ£€æµ‹ä¸¢å¤±æ›´æ–°å¯¹æ­¤å¹¶æ²¡æœ‰å¸®åŠ©ã€‚åœ¨PostgreSQLçš„å¯é‡å¤è¯»ï¼ŒMySQL/InnoDBçš„å¯é‡å¤è¯»ï¼ŒOracleå¯ä¸²è¡ŒåŒ–æˆ–SQL Serverçš„å¿«ç…§éš”ç¦»çº§åˆ«ä¸­ï¼Œéƒ½ä¸ä¼šè‡ªåŠ¨æ£€æµ‹å†™å…¥åå·®ã€23ã€‘ã€‚è‡ªåŠ¨é˜²æ­¢å†™å…¥åå·®éœ€è¦çœŸæ­£çš„å¯ä¸²è¡ŒåŒ–éš”ç¦»ï¼ˆè¯·å‚é˜…â€œ<a href="#%E5%8F%AF%E4%B8%B2%E8%A1%8C%E5%8C%96">å¯ä¸²è¡ŒåŒ–</a>â€ï¼‰ã€‚</li><li>æŸäº›æ•°æ®åº“å…è®¸é…ç½®çº¦æŸï¼Œç„¶åç”±æ•°æ®åº“å¼ºåˆ¶æ‰§è¡Œï¼ˆä¾‹å¦‚ï¼Œå”¯ä¸€æ€§ï¼Œå¤–é”®çº¦æŸæˆ–ç‰¹å®šå€¼é™åˆ¶ï¼‰ã€‚ä½†æ˜¯ä¸ºäº†æŒ‡å®šè‡³å°‘æœ‰ä¸€ååŒ»ç”Ÿå¿…é¡»åœ¨çº¿ï¼Œéœ€è¦ä¸€ä¸ªæ¶‰åŠå¤šä¸ªå¯¹è±¡çš„çº¦æŸã€‚å¤§å¤šæ•°æ•°æ®åº“æ²¡æœ‰å†…ç½®å¯¹è¿™ç§çº¦æŸçš„æ”¯æŒï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨è§¦å‘å™¨ï¼Œæˆ–è€…ç‰©åŒ–è§†å›¾æ¥å®ç°å®ƒä»¬ï¼Œè¿™å–å†³äºä¸åŒçš„æ•°æ®åº“ã€42ã€‘ã€‚</li><li>å¦‚æœæ— æ³•ä½¿ç”¨å¯ä¸²è¡ŒåŒ–çš„éš”ç¦»çº§åˆ«ï¼Œåˆ™æ­¤æƒ…å†µä¸‹çš„æ¬¡ä¼˜é€‰é¡¹å¯èƒ½æ˜¯æ˜¾å¼é”å®šäº‹åŠ¡æ‰€ä¾èµ–çš„è¡Œã€‚åœ¨ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥å†™ä¸‹å¦‚ä¸‹çš„ä»£ç ï¼š</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">BEGIN</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> doctors
  <span class="token keyword">WHERE</span> on_call <span class="token operator">=</span> <span class="token boolean">TRUE</span> 
  <span class="token operator">AND</span> shift_id <span class="token operator">=</span> <span class="token number">1234</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span>

<span class="token keyword">UPDATE</span> doctors
  <span class="token keyword">SET</span> on_call <span class="token operator">=</span> <span class="token boolean">FALSE</span>
  <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">&#39;Alice&#39;</span> 
  <span class="token operator">AND</span> shift_id <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
  
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å’Œä»¥å‰ä¸€æ ·ï¼Œ<code>FOR UPDATE</code>å‘Šè¯‰æ•°æ®åº“é”å®šè¿”å›çš„æ‰€æœ‰è¡Œä»¥ç”¨äºæ›´æ–°ã€‚</li></ul><h4 id="å†™åå·®çš„æ›´å¤šä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å†™åå·®çš„æ›´å¤šä¾‹å­" aria-hidden="true">#</a> å†™åå·®çš„æ›´å¤šä¾‹å­</h4><p>å†™åå·®ä¹çœ‹åƒæ˜¯ä¸€ä¸ªæ·±å¥¥çš„é—®é¢˜ï¼Œä½†ä¸€æ—¦æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œå¾ˆå®¹æ˜“ä¼šæ³¨æ„åˆ°æ›´å¤šå¯èƒ½çš„æƒ…å†µã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š</p><p><em><strong>ä¼šè®®å®¤é¢„è®¢ç³»ç»Ÿ</strong></em></p><p>æ¯”å¦‚ä½ æƒ³è¦è§„å®šä¸èƒ½åœ¨åŒä¸€æ—¶é—´å¯¹åŒä¸€ä¸ªä¼šè®®å®¤è¿›è¡Œå¤šæ¬¡çš„é¢„è®¢ã€43ã€‘ã€‚å½“æœ‰äººæƒ³è¦é¢„è®¢æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨ç›¸äº’å†²çªçš„é¢„è®¢ï¼ˆå³é¢„è®¢æ—¶é—´èŒƒå›´é‡å çš„åŒä¸€æˆ¿é—´ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åˆ›å»ºä¼šè®®ï¼ˆè¯·å‚é˜…ç¤ºä¾‹7-2ï¼‰<sup class="footnote-ref"><a href="#footnote11">[11]</a><a class="footnote-anchor" id="footnote-ref11"></a></sup>ã€‚</p><p><strong>ä¾‹7-2 ä¼šè®®å®¤é¢„è®¢ç³»ç»Ÿè¯•å›¾é¿å…é‡å¤é¢„è®¢ï¼ˆåœ¨å¿«ç…§éš”ç¦»ä¸‹ä¸å®‰å…¨ï¼‰</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">BEGIN</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>

<span class="token comment">-- æ£€æŸ¥æ‰€æœ‰ç°å­˜çš„ä¸12:00~13:00é‡å çš„é¢„å®š</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> bookings
<span class="token keyword">WHERE</span> room_id <span class="token operator">=</span> <span class="token number">123</span> <span class="token operator">AND</span> 
	end_time <span class="token operator">&gt;</span> <span class="token string">&#39;2015-01-01 12:00&#39;</span> <span class="token operator">AND</span> start_time <span class="token operator">&lt;</span> <span class="token string">&#39;2015-01-01 13:00&#39;</span><span class="token punctuation">;</span>

<span class="token comment">-- å¦‚æœä¹‹å‰çš„æŸ¥è¯¢è¿”å›0</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> bookings<span class="token punctuation">(</span>room_id<span class="token punctuation">,</span> start_time<span class="token punctuation">,</span> end_time<span class="token punctuation">,</span> user_id<span class="token punctuation">)</span>
  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span> <span class="token string">&#39;2015-01-01 12:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2015-01-01 13:00&#39;</span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸å¹¸çš„æ˜¯ï¼Œå¿«ç…§éš”ç¦»å¹¶ä¸èƒ½é˜²æ­¢å¦ä¸€ä¸ªç”¨æˆ·åŒæ—¶æ’å…¥å†²çªçš„ä¼šè®®ã€‚ä¸ºäº†ç¡®ä¿ä¸ä¼šé‡åˆ°è°ƒåº¦å†²çªï¼Œä½ åˆéœ€è¦å¯ä¸²è¡ŒåŒ–çš„éš”ç¦»çº§åˆ«äº†ã€‚</p><p><em><strong>å¤šäººæ¸¸æˆ</strong></em></p><p>åœ¨<a href="">ä¾‹7-1</a>ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªé”æ¥é˜²æ­¢ä¸¢å¤±æ›´æ–°ï¼ˆä¹Ÿå°±æ˜¯ç¡®ä¿ä¸¤ä¸ªç©å®¶ä¸èƒ½åŒæ—¶ç§»åŠ¨åŒä¸€ä¸ªæ£‹å­ï¼‰ã€‚ä½†æ˜¯é”å®šå¹¶ä¸å¦¨ç¢ç©å®¶å°†ä¸¤ä¸ªä¸åŒçš„æ£‹å­ç§»åŠ¨åˆ°æ£‹ç›˜ä¸Šçš„ç›¸åŒä½ç½®ï¼Œæˆ–è€…é‡‡å–å…¶ä»–è¿åæ¸¸æˆè§„åˆ™çš„è¡Œä¸ºã€‚æŒ‰ç…§æ‚¨æ­£åœ¨æ‰§è¡Œçš„è§„åˆ™ç±»å‹ï¼Œä¹Ÿè®¸å¯ä»¥ä½¿ç”¨å”¯ä¸€çº¦æŸï¼ˆunique constraintï¼‰ï¼Œå¦åˆ™æ‚¨å¾ˆå®¹æ˜“å‘ç”Ÿå†™å…¥åå·®ã€‚</p><p><em><strong>æŠ¢æ³¨ç”¨æˆ·å</strong></em></p><p>åœ¨æ¯ä¸ªç”¨æˆ·æ‹¥æœ‰å”¯ä¸€ç”¨æˆ·åçš„ç½‘ç«™ä¸Šï¼Œä¸¤ä¸ªç”¨æˆ·å¯èƒ½ä¼šå°è¯•åŒæ—¶åˆ›å»ºå…·æœ‰ç›¸åŒç”¨æˆ·åçš„å¸æˆ·ã€‚å¯ä»¥åœ¨äº‹åŠ¡æ£€æŸ¥åç§°æ˜¯å¦è¢«æŠ¢å ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨è¯¥åç§°åˆ›å»ºè´¦æˆ·ã€‚ä½†æ˜¯åƒåœ¨å‰é¢çš„ä¾‹å­ä¸­é‚£æ ·ï¼Œåœ¨å¿«ç…§éš”ç¦»ä¸‹è¿™æ˜¯ä¸å®‰å…¨çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œå”¯ä¸€çº¦æŸæ˜¯ä¸€ä¸ªç®€å•çš„è§£å†³åŠæ³•ï¼ˆç¬¬äºŒä¸ªäº‹åŠ¡åœ¨æäº¤æ—¶ä¼šå› ä¸ºè¿åç”¨æˆ·åå”¯ä¸€çº¦æŸè€Œè¢«ä¸­æ­¢ï¼‰ã€‚</p><p><em><strong>é˜²æ­¢åŒé‡å¼€æ”¯</strong></em></p><p>å…è®¸ç”¨æˆ·èŠ±é’±æˆ–ç§¯åˆ†çš„æœåŠ¡ï¼Œéœ€è¦æ£€æŸ¥ç”¨æˆ·çš„æ”¯ä»˜æ•°é¢ä¸è¶…è¿‡å…¶ä½™é¢ã€‚å¯ä»¥é€šè¿‡åœ¨ç”¨æˆ·çš„å¸æˆ·ä¸­æ’å…¥ä¸€ä¸ªè¯•æ¢æ€§çš„æ¶ˆè´¹é¡¹ç›®æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œåˆ—å‡ºå¸æˆ·ä¸­çš„æ‰€æœ‰é¡¹ç›®ï¼Œå¹¶æ£€æŸ¥æ€»å’Œæ˜¯å¦ä¸ºæ­£å€¼ã€44ã€‘ã€‚æœ‰äº†å†™å…¥åå·®ï¼Œå¯èƒ½ä¼šå‘ç”Ÿä¸¤ä¸ªæ”¯å‡ºé¡¹ç›®åŒæ—¶æ’å…¥ï¼Œä¸€èµ·å¯¼è‡´ä½™é¢å˜ä¸ºè´Ÿå€¼ï¼Œä½†è¿™ä¸¤ä¸ªäº‹åŠ¡éƒ½ä¸ä¼šæ³¨æ„åˆ°å¦ä¸€ä¸ªã€‚</p><h4 id="å¯¼è‡´å†™å…¥åå·®çš„å¹»è¯»" tabindex="-1"><a class="header-anchor" href="#å¯¼è‡´å†™å…¥åå·®çš„å¹»è¯»" aria-hidden="true">#</a> å¯¼è‡´å†™å…¥åå·®çš„å¹»è¯»</h4><p>æ‰€æœ‰è¿™äº›ä¾‹å­éƒ½éµå¾ªç±»ä¼¼çš„æ¨¡å¼ï¼š</p><ol><li><p>ä¸€ä¸ª<code>SELECT</code>æŸ¥è¯¢æ‰¾å‡ºç¬¦åˆæ¡ä»¶çš„è¡Œï¼Œå¹¶æ£€æŸ¥æ˜¯å¦ç¬¦åˆä¸€äº›è¦æ±‚ã€‚ï¼ˆä¾‹å¦‚ï¼šè‡³å°‘æœ‰ä¸¤ååŒ»ç”Ÿåœ¨å€¼ç­ï¼›ä¸å­˜åœ¨å¯¹è¯¥ä¼šè®®å®¤åŒä¸€æ—¶æ®µçš„é¢„å®šï¼›æ£‹ç›˜ä¸Šçš„ä½ç½®æ²¡æœ‰è¢«å…¶ä»–æ£‹å­å æ®ï¼›ç”¨æˆ·åè¿˜æ²¡æœ‰è¢«æŠ¢æ³¨ï¼›è´¦æˆ·é‡Œè¿˜æœ‰è¶³å¤Ÿä½™é¢ï¼‰</p></li><li><p>æŒ‰ç…§ç¬¬ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœï¼Œåº”ç”¨ä»£ç å†³å®šæ˜¯å¦ç»§ç»­ã€‚ï¼ˆå¯èƒ½ä¼šç»§ç»­æ“ä½œï¼Œä¹Ÿå¯èƒ½ä¸­æ­¢å¹¶æŠ¥é”™ï¼‰</p></li><li><p>å¦‚æœåº”ç”¨å†³å®šç»§ç»­æ“ä½œï¼Œå°±æ‰§è¡Œå†™å…¥ï¼ˆæ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤ï¼‰ï¼Œå¹¶æäº¤äº‹åŠ¡ã€‚</p><p>è¿™ä¸ªå†™å…¥çš„æ•ˆæœæ”¹å˜äº†æ­¥éª¤2 ä¸­çš„å…ˆå†³æ¡ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœåœ¨æäº¤å†™å…¥åï¼Œé‡å¤æ‰§è¡Œä¸€æ¬¡æ­¥éª¤1 çš„SELECTæŸ¥è¯¢ï¼Œå°†ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚å› ä¸ºå†™å…¥æ”¹å˜äº†ç¬¦åˆæœç´¢æ¡ä»¶çš„è¡Œé›†ï¼ˆç°åœ¨å°‘äº†ä¸€ä¸ªåŒ»ç”Ÿå€¼ç­ï¼Œé‚£æ—¶å€™çš„ä¼šè®®å®¤ç°åœ¨å·²ç»è¢«é¢„è®¢äº†ï¼Œæ£‹ç›˜ä¸Šçš„è¿™ä¸ªä½ç½®å·²ç»è¢«å æ®äº†ï¼Œç”¨æˆ·åå·²ç»è¢«æŠ¢æ³¨ï¼Œè´¦æˆ·ä½™é¢ä¸å¤Ÿäº†ï¼‰ã€‚</p></li></ol><p>è¿™äº›æ­¥éª¤å¯èƒ½ä»¥ä¸åŒçš„é¡ºåºå‘ç”Ÿã€‚ä¾‹å¦‚å¯ä»¥é¦–å…ˆè¿›è¡Œå†™å…¥ï¼Œç„¶åè¿›è¡ŒSELECTæŸ¥è¯¢ï¼Œæœ€åæ ¹æ®æŸ¥è¯¢ç»“æœå†³å®šæ˜¯æ”¾å¼ƒè¿˜æ˜¯æäº¤ã€‚</p><p>åœ¨åŒ»ç”Ÿå€¼ç­çš„ä¾‹å­ä¸­ï¼Œåœ¨æ­¥éª¤3ä¸­ä¿®æ”¹çš„è¡Œï¼Œæ˜¯æ­¥éª¤1ä¸­è¿”å›çš„è¡Œä¹‹ä¸€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡é”å®šæ­¥éª¤1 ä¸­çš„è¡Œï¼ˆ<code>SELECT FOR UPDATE</code>ï¼‰æ¥ä½¿äº‹åŠ¡å®‰å…¨å¹¶é¿å…å†™å…¥åå·®ã€‚ä½†æ˜¯å…¶ä»–å››ä¸ªä¾‹å­æ˜¯ä¸åŒçš„ï¼šå®ƒä»¬æ£€æŸ¥æ˜¯å¦<strong>ä¸å­˜åœ¨</strong>æŸäº›æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œå†™å…¥ä¼š<strong>æ·»åŠ </strong>ä¸€ä¸ªåŒ¹é…ç›¸åŒæ¡ä»¶çš„è¡Œã€‚å¦‚æœæ­¥éª¤1ä¸­çš„æŸ¥è¯¢æ²¡æœ‰è¿”å›ä»»ä½•è¡Œï¼Œåˆ™<code>SELECT FOR UPDATE</code>é”ä¸äº†ä»»ä½•ä¸œè¥¿ã€‚</p><p>è¿™ç§æ•ˆåº”ï¼šä¸€ä¸ªäº‹åŠ¡ä¸­çš„å†™å…¥æ”¹å˜å¦ä¸€ä¸ªäº‹åŠ¡çš„æœç´¢æŸ¥è¯¢çš„ç»“æœï¼Œè¢«ç§°ä¸º<strong>å¹»è¯»</strong>ã€3ã€‘ã€‚å¿«ç…§éš”ç¦»é¿å…äº†åªè¯»æŸ¥è¯¢ä¸­å¹»è¯»ï¼Œä½†æ˜¯åœ¨åƒæˆ‘ä»¬è®¨è®ºçš„ä¾‹å­é‚£æ ·çš„è¯»å†™äº‹åŠ¡ä¸­ï¼Œå¹»è¯»ä¼šå¯¼è‡´ç‰¹åˆ«æ£˜æ‰‹çš„å†™å…¥åå·®æƒ…å†µã€‚</p><h4 id="ç‰©åŒ–å†²çª" tabindex="-1"><a class="header-anchor" href="#ç‰©åŒ–å†²çª" aria-hidden="true">#</a> ç‰©åŒ–å†²çª</h4><p>å¦‚æœå¹»è¯»çš„é—®é¢˜æ˜¯æ²¡æœ‰å¯¹è±¡å¯ä»¥åŠ é”ï¼Œä¹Ÿè®¸å¯ä»¥äººä¸ºåœ°åœ¨æ•°æ®åº“ä¸­å¼•å…¥ä¸€ä¸ªé”å¯¹è±¡ï¼Ÿ</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¼šè®®å®¤é¢„è®¢çš„åœºæ™¯ä¸­ï¼Œå¯ä»¥æƒ³è±¡åˆ›å»ºä¸€ä¸ªå…³äºæ—¶é—´æ§½å’Œæˆ¿é—´çš„è¡¨ã€‚æ­¤è¡¨ä¸­çš„æ¯ä¸€è¡Œå¯¹åº”äºç‰¹å®šæ—¶é—´æ®µï¼ˆä¾‹å¦‚15åˆ†é’Ÿï¼‰çš„ç‰¹å®šæˆ¿é—´ã€‚å¯ä»¥æå‰æ’å…¥æˆ¿é—´å’Œæ—¶é—´çš„æ‰€æœ‰å¯èƒ½ç»„åˆè¡Œï¼ˆä¾‹å¦‚æ¥ä¸‹æ¥çš„å…­ä¸ªæœˆï¼‰ã€‚</p><p>ç°åœ¨ï¼Œè¦åˆ›å»ºé¢„è®¢çš„äº‹åŠ¡å¯ä»¥é”å®šï¼ˆ<code>SELECT FOR UPDATE</code>ï¼‰è¡¨ä¸­ä¸æ‰€éœ€æˆ¿é—´å’Œæ—¶é—´æ®µå¯¹åº”çš„è¡Œã€‚åœ¨è·å¾—é”å®šä¹‹åï¼Œå®ƒå¯ä»¥æ£€æŸ¥é‡å çš„é¢„è®¢å¹¶åƒä»¥å‰ä¸€æ ·æ’å…¥æ–°çš„é¢„è®¢ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªè¡¨å¹¶ä¸æ˜¯ç”¨æ¥å­˜å‚¨é¢„è®¢ç›¸å…³çš„ä¿¡æ¯â€”â€”å®ƒå®Œå…¨å°±æ˜¯ä¸€ç»„é”ï¼Œç”¨äºé˜²æ­¢åŒæ—¶ä¿®æ”¹åŒä¸€æˆ¿é—´å’Œæ—¶é—´èŒƒå›´å†…çš„é¢„è®¢ã€‚</p><p>è¿™ç§æ–¹æ³•è¢«ç§°ä¸º<strong>ç‰©åŒ–å†²çªï¼ˆmaterializing conflictsï¼‰</strong>ï¼Œå› ä¸ºå®ƒå°†å¹»è¯»å˜ä¸ºæ•°æ®åº“ä¸­ä¸€ç»„å…·ä½“è¡Œä¸Šçš„é”å†²çªã€11ã€‘ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¼„æ¸…æ¥šå¦‚ä½•ç‰©åŒ–å†²çªå¯èƒ½å¾ˆéš¾ï¼Œä¹Ÿå¾ˆå®¹æ˜“å‡ºé”™ï¼Œè€Œè®©å¹¶å‘æ§åˆ¶æœºåˆ¶æ³„æ¼åˆ°åº”ç”¨æ•°æ®æ¨¡å‹æ˜¯å¾ˆä¸‘é™‹çš„åšæ³•ã€‚å‡ºäºè¿™äº›åŸå› ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–åŠæ³•å¯ä»¥å®ç°ï¼Œç‰©åŒ–å†²çªåº”è¢«è§†ä¸ºæœ€åçš„æ‰‹æ®µã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ã€‚<strong>å¯ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</strong> çš„éš”ç¦»çº§åˆ«æ˜¯æ›´å¯å–çš„ã€‚</p><h2 id="å¯ä¸²è¡ŒåŒ–" tabindex="-1"><a class="header-anchor" href="#å¯ä¸²è¡ŒåŒ–" aria-hidden="true">#</a> å¯ä¸²è¡ŒåŒ–</h2><p>åœ¨æœ¬ç« ä¸­ï¼Œå·²ç»çœ‹åˆ°äº†å‡ ä¸ªæ˜“äºå‡ºç°ç«äº‰æ¡ä»¶çš„äº‹åŠ¡ä¾‹å­ã€‚<strong>è¯»å·²æäº¤</strong>å’Œ<strong>å¿«ç…§éš”ç¦»</strong>çº§åˆ«ä¼šé˜»æ­¢æŸäº›ç«äº‰æ¡ä»¶ï¼Œä½†ä¸ä¼šé˜»æ­¢å¦ä¸€äº›ã€‚æˆ‘ä»¬é‡åˆ°äº†ä¸€äº›ç‰¹åˆ«æ£˜æ‰‹çš„ä¾‹å­ï¼Œ<strong>å†™å…¥åå·®</strong>å’Œ<strong>å¹»è¯»</strong>ã€‚è¿™æ˜¯ä¸€ä¸ªå¯æ‚²çš„æƒ…å†µï¼š</p><ul><li>éš”ç¦»çº§åˆ«éš¾ä»¥ç†è§£ï¼Œå¹¶ä¸”åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­å®ç°çš„ä¸ä¸€è‡´ï¼ˆä¾‹å¦‚ï¼Œâ€œå¯é‡å¤è¯»â€çš„å«ä¹‰å¤©å·®åœ°åˆ«ï¼‰ã€‚</li><li>å…‰æ£€æŸ¥åº”ç”¨ä»£ç å¾ˆéš¾åˆ¤æ–­åœ¨ç‰¹å®šçš„éš”ç¦»çº§åˆ«è¿è¡Œæ˜¯å¦å®‰å…¨ã€‚ ç‰¹åˆ«æ˜¯åœ¨å¤§å‹åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨å¯èƒ½å¹¶ä¸çŸ¥é“å¹¶å‘å‘ç”Ÿçš„æ‰€æœ‰äº‹æƒ…ã€‚</li><li>æ²¡æœ‰æ£€æµ‹ç«äº‰æ¡ä»¶çš„å¥½å·¥å…·ã€‚åŸåˆ™ä¸Šæ¥è¯´ï¼Œé™æ€åˆ†æå¯èƒ½ä¼šæœ‰å¸®åŠ©ã€26ã€‘ï¼Œä½†ç ”ç©¶ä¸­çš„æŠ€æœ¯è¿˜æ²¡æ³•å®é™…åº”ç”¨ã€‚å¹¶å‘é—®é¢˜çš„æµ‹è¯•æ˜¯å¾ˆéš¾çš„ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æ˜¯éç¡®å®šæ€§çš„ â€”â€” åªæœ‰åœ¨å€’éœ‰çš„æ—¶åºä¸‹æ‰ä¼šå‡ºç°é—®é¢˜ã€‚</li></ul><p>è¿™ä¸æ˜¯ä¸€ä¸ªæ–°é—®é¢˜ï¼Œä»20ä¸–çºª70å¹´ä»£ä»¥æ¥å°±ä¸€ç›´æ˜¯è¿™æ ·äº†ï¼Œå½“æ—¶é¦–å…ˆå¼•å…¥äº†è¾ƒå¼±çš„éš”ç¦»çº§åˆ«ã€2ã€‘ã€‚ä¸€ç›´ä»¥æ¥ï¼Œç ”ç©¶äººå‘˜çš„ç­”æ¡ˆéƒ½å¾ˆç®€å•ï¼šä½¿ç”¨<strong>å¯ä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰</strong> çš„éš”ç¦»çº§åˆ«ï¼</p><p><strong>å¯ä¸²è¡ŒåŒ–ï¼ˆSerializabilityï¼‰</strong> éš”ç¦»é€šå¸¸è¢«è®¤ä¸ºæ˜¯æœ€å¼ºçš„éš”ç¦»çº§åˆ«ã€‚å®ƒä¿è¯å³ä½¿äº‹åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæœ€ç»ˆçš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå°±å¥½åƒå®ƒä»¬æ²¡æœ‰ä»»ä½•å¹¶å‘æ€§ï¼Œè¿ç»­æŒ¨ä¸ªæ‰§è¡Œä¸€æ ·ã€‚å› æ­¤æ•°æ®åº“ä¿è¯ï¼Œå¦‚æœäº‹åŠ¡åœ¨å•ç‹¬è¿è¡Œæ—¶æ­£å¸¸è¿è¡Œï¼Œåˆ™å®ƒä»¬åœ¨å¹¶å‘è¿è¡Œæ—¶ç»§ç»­ä¿æŒæ­£ç¡® â€”â€” æ¢å¥è¯è¯´ï¼Œæ•°æ®åº“å¯ä»¥é˜²æ­¢<strong>æ‰€æœ‰</strong>å¯èƒ½çš„ç«äº‰æ¡ä»¶ã€‚</p><p>ä½†å¦‚æœå¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«æ¯”å¼±éš”ç¦»çº§åˆ«çš„çƒ‚æ‘Šå­è¦å¥½å¾—å¤šï¼Œé‚£ä¸ºä»€ä¹ˆæ²¡æœ‰äººè§äººçˆ±ï¼Ÿä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦çœ‹çœ‹å®ç°å¯ä¸²è¡ŒåŒ–çš„é€‰é¡¹ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•æ‰§è¡Œã€‚ç›®å‰å¤§å¤šæ•°æä¾›å¯ä¸²è¡ŒåŒ–çš„æ•°æ®åº“éƒ½ä½¿ç”¨äº†ä¸‰ç§æŠ€æœ¯ä¹‹ä¸€ï¼Œæœ¬ç« çš„å‰©ä½™éƒ¨åˆ†å°†ä¼šä»‹ç»è¿™äº›æŠ€æœ¯ï¼š</p><ul><li>å­—é¢æ„ä¹‰ä¸Šåœ°ä¸²è¡Œé¡ºåºæ‰§è¡Œäº‹åŠ¡ï¼ˆè¯·å‚é˜…â€œ<a href="#%E7%9C%9F%E7%9A%84%E4%B8%B2%E8%A1%8C%E6%89%A7%E8%A1%8C">çœŸçš„ä¸²è¡Œæ‰§è¡Œ</a>â€ï¼‰</li><li><strong>ä¸¤é˜¶æ®µé”å®šï¼ˆ2PL, two-phase lockingï¼‰</strong>ï¼Œå‡ åå¹´æ¥å”¯ä¸€å¯è¡Œçš„é€‰æ‹©ï¼ˆè¯·å‚é˜…â€œ<a href="#%E4%B8%A4%E9%98%B6%E6%AE%B5%E9%94%81%E5%AE%9A">ä¸¤é˜¶æ®µé”å®š</a>â€ï¼‰</li><li>ä¹è§‚å¹¶å‘æ§åˆ¶æŠ€æœ¯ï¼Œä¾‹å¦‚<strong>å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»ï¼ˆserializable snapshot isolationï¼‰</strong>ï¼ˆè¯·å‚é˜…â€œ<a href="#%E5%8F%AF%E4%B8%B2%E8%A1%8C%E5%8C%96%E5%BF%AB%E7%85%A7%E9%9A%94%E7%A6%BB">å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»</a>â€ï¼‰</li></ul><p>ç°åœ¨å°†ä¸»è¦åœ¨å•èŠ‚ç‚¹æ•°æ®åº“çš„èƒŒæ™¯ä¸‹è®¨è®ºè¿™äº›æŠ€æœ¯ï¼›åœ¨<a href="/book/ddia/ch9.html" class="">ç¬¬ä¹ç« </a>ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•å°†å®ƒä»¬æ¨å¹¿åˆ°æ¶‰åŠåˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¤šä¸ªèŠ‚ç‚¹çš„äº‹åŠ¡ã€‚</p><h3 id="çœŸçš„ä¸²è¡Œæ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#çœŸçš„ä¸²è¡Œæ‰§è¡Œ" aria-hidden="true">#</a> çœŸçš„ä¸²è¡Œæ‰§è¡Œ</h3><p>é¿å…å¹¶å‘é—®é¢˜çš„æœ€ç®€å•æ–¹æ³•å°±æ˜¯å®Œå…¨ä¸è¦å¹¶å‘ï¼šåœ¨å•ä¸ªçº¿ç¨‹ä¸ŠæŒ‰é¡ºåºä¸€æ¬¡åªæ‰§è¡Œä¸€ä¸ªäº‹åŠ¡ã€‚è¿™æ ·åšå°±å®Œå…¨ç»•å¼€äº†æ£€æµ‹/é˜²æ­¢äº‹åŠ¡é—´å†²çªçš„é—®é¢˜ï¼Œç”±æ­¤äº§ç”Ÿçš„éš”ç¦»ï¼Œæ­£æ˜¯å¯ä¸²è¡ŒåŒ–çš„å®šä¹‰ã€‚</p><p>å°½ç®¡è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„ä¸»æ„ï¼Œä½†æ•°æ®åº“è®¾è®¡äººå‘˜åªæ˜¯åœ¨2007å¹´å·¦å³æ‰å†³å®šï¼Œå•çº¿ç¨‹å¾ªç¯æ‰§è¡Œäº‹åŠ¡æ˜¯å¯è¡Œçš„ã€45ã€‘ã€‚å¦‚æœå¤šçº¿ç¨‹å¹¶å‘åœ¨è¿‡å»çš„30å¹´ä¸­è¢«è®¤ä¸ºæ˜¯è·å¾—è‰¯å¥½æ€§èƒ½çš„å…³é”®æ‰€åœ¨ï¼Œé‚£ä¹ˆç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ”¹å˜è‡´ä½¿å•çº¿ç¨‹æ‰§è¡Œå˜ä¸ºå¯èƒ½å‘¢ï¼Ÿ</p><p>ä¸¤ä¸ªè¿›å±•å¼•å‘äº†è¿™ä¸ªåæ€ï¼š</p><ul><li>RAMè¶³å¤Ÿä¾¿å®œäº†ï¼Œè®¸å¤šåœºæ™¯ç°åœ¨éƒ½å¯ä»¥å°†å®Œæ•´çš„æ´»è·ƒæ•°æ®é›†ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch3.html#%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%AD%98%E5%82%A8%E4%B8%80%E5%88%87" class="">åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€åˆ‡</a>â€ï¼‰ã€‚å½“äº‹åŠ¡éœ€è¦è®¿é—®çš„æ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­æ—¶ï¼Œäº‹åŠ¡å¤„ç†çš„æ‰§è¡Œé€Ÿåº¦è¦æ¯”ç­‰å¾…æ•°æ®ä»ç£ç›˜åŠ è½½æ—¶å¿«å¾—å¤šã€‚</li><li>æ•°æ®åº“è®¾è®¡äººå‘˜æ„è¯†åˆ°OLTPäº‹åŠ¡é€šå¸¸å¾ˆçŸ­ï¼Œè€Œä¸”åªè¿›è¡Œå°‘é‡çš„è¯»å†™æ“ä½œï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch3.html#%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E8%BF%98%E6%98%AF%E5%88%86%E6%9E%90%EF%BC%9F" class="">äº‹åŠ¡å¤„ç†è¿˜æ˜¯åˆ†æï¼Ÿ</a>â€ï¼‰ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œé•¿æ—¶é—´è¿è¡Œçš„åˆ†ææŸ¥è¯¢é€šå¸¸æ˜¯åªè¯»çš„ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥åœ¨ä¸²è¡Œæ‰§è¡Œå¾ªç¯ä¹‹å¤–çš„ä¸€è‡´å¿«ç…§ï¼ˆä½¿ç”¨å¿«ç…§éš”ç¦»ï¼‰ä¸Šè¿è¡Œã€‚</li></ul><p>ä¸²è¡Œæ‰§è¡Œäº‹åŠ¡çš„æ–¹æ³•åœ¨VoltDB/H-Storeï¼ŒRediså’ŒDatomicä¸­å®ç°ã€46,47,48ã€‘ã€‚è®¾è®¡ç”¨äºå•çº¿ç¨‹æ‰§è¡Œçš„ç³»ç»Ÿæœ‰æ—¶å¯ä»¥æ¯”æ”¯æŒå¹¶å‘çš„ç³»ç»Ÿæ›´å¥½ï¼Œå› ä¸ºå®ƒå¯ä»¥é¿å…é”çš„åè°ƒå¼€é”€ã€‚ä½†æ˜¯å…¶ååé‡ä»…é™äºå•ä¸ªCPUæ ¸çš„ååé‡ã€‚ä¸ºäº†å……åˆ†åˆ©ç”¨å•ä¸€çº¿ç¨‹ï¼Œéœ€è¦ä¸ä¼ ç»Ÿå½¢å¼çš„äº‹åŠ¡ä¸åŒçš„ç»“æ„ã€‚</p><h4 id="åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­å°è£…äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­å°è£…äº‹åŠ¡" aria-hidden="true">#</a> åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­å°è£…äº‹åŠ¡</h4><p>â€‹ åœ¨æ•°æ®åº“çš„æ—©æœŸé˜¶æ®µï¼Œæ„å›¾æ˜¯æ•°æ®åº“äº‹åŠ¡å¯ä»¥åŒ…å«æ•´ä¸ªç”¨æˆ·æ´»åŠ¨æµç¨‹ã€‚ä¾‹å¦‚ï¼Œé¢„è®¢æœºç¥¨æ˜¯ä¸€ä¸ªå¤šé˜¶æ®µçš„è¿‡ç¨‹ï¼ˆæœç´¢è·¯çº¿ï¼Œç¥¨ä»·å’Œå¯ç”¨åº§ä½ï¼Œå†³å®šè¡Œç¨‹ï¼Œåœ¨æ¯æ®µè¡Œç¨‹çš„èˆªç­ä¸Šè®¢åº§ï¼Œè¾“å…¥ä¹˜å®¢ä¿¡æ¯ï¼Œä»˜æ¬¾ï¼‰ã€‚æ•°æ®åº“è®¾è®¡è€…è®¤ä¸ºï¼Œå¦‚æœæ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥è¢«åŸå­åŒ–åœ°æ‰§è¡Œã€‚</p><p>â€‹ ä¸å¹¸çš„æ˜¯ï¼Œäººç±»åšå‡ºå†³å®šå’Œå›åº”çš„é€Ÿåº¦éå¸¸ç¼“æ…¢ã€‚å¦‚æœæ•°æ®åº“äº‹åŠ¡éœ€è¦ç­‰å¾…æ¥è‡ªç”¨æˆ·çš„è¾“å…¥ï¼Œåˆ™æ•°æ®åº“éœ€è¦æ”¯æŒæ½œåœ¨çš„å¤§é‡å¹¶å‘äº‹åŠ¡ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ˜¯ç©ºé—²çš„ã€‚å¤§å¤šæ•°æ•°æ®åº“ä¸èƒ½é«˜æ•ˆå®Œæˆè¿™é¡¹å·¥ä½œï¼Œå› æ­¤å‡ ä¹æ‰€æœ‰çš„OLTPåº”ç”¨ç¨‹åºéƒ½é¿å…åœ¨äº‹åŠ¡ä¸­ç­‰å¾…äº¤äº’å¼çš„ç”¨æˆ·è¾“å…¥ï¼Œä»¥æ­¤æ¥ä¿æŒäº‹åŠ¡çš„ç®€çŸ­ã€‚åœ¨Webä¸Šï¼Œè¿™æ„å‘³ç€äº‹åŠ¡åœ¨åŒä¸€ä¸ªHTTPè¯·æ±‚ä¸­è¢«æäº¤â€”â€”ä¸€ä¸ªäº‹åŠ¡ä¸ä¼šè·¨è¶Šå¤šä¸ªè¯·æ±‚ã€‚ä¸€ä¸ªæ–°çš„HTTPè¯·æ±‚å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</p><p>â€‹ å³ä½¿å·²ç»å°†äººç±»ä»å…³é”®è·¯å¾„ä¸­æ’é™¤ï¼Œäº‹åŠ¡ä»ç„¶ä»¥äº¤äº’å¼çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨é£æ ¼æ‰§è¡Œï¼Œä¸€æ¬¡ä¸€ä¸ªè¯­å¥ã€‚åº”ç”¨ç¨‹åºè¿›è¡ŒæŸ¥è¯¢ï¼Œè¯»å–ç»“æœï¼Œå¯èƒ½æ ¹æ®ç¬¬ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœè¿›è¡Œå¦ä¸€ä¸ªæŸ¥è¯¢ï¼Œä¾æ­¤ç±»æ¨ã€‚æŸ¥è¯¢å’Œç»“æœåœ¨åº”ç”¨ç¨‹åºä»£ç ï¼ˆåœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼‰å’Œæ•°æ®åº“æœåŠ¡å™¨ï¼ˆåœ¨å¦ä¸€å°æœºå™¨ä¸Šï¼‰ä¹‹é—´æ¥å›å‘é€ã€‚</p><p>â€‹ åœ¨è¿™ç§äº¤äº’å¼çš„äº‹åŠ¡æ–¹å¼ä¸­ï¼Œåº”ç”¨ç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´çš„ç½‘ç»œé€šä¿¡è€—è´¹äº†å¤§é‡çš„æ—¶é—´ã€‚å¦‚æœä¸å…è®¸åœ¨æ•°æ®åº“ä¸­è¿›è¡Œå¹¶å‘å¤„ç†ï¼Œä¸”ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªäº‹åŠ¡ï¼Œåˆ™ååé‡å°†ä¼šéå¸¸ç³Ÿç³•ï¼Œå› ä¸ºæ•°æ®åº“å¤§éƒ¨åˆ†çš„æ—¶é—´éƒ½èŠ±è´¹åœ¨ç­‰å¾…åº”ç”¨ç¨‹åºå‘å‡ºå½“å‰äº‹åŠ¡çš„ä¸‹ä¸€ä¸ªæŸ¥è¯¢ã€‚åœ¨è¿™ç§æ•°æ®åº“ä¸­ï¼Œä¸ºäº†è·å¾—åˆç†çš„æ€§èƒ½ï¼Œéœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªäº‹åŠ¡ã€‚</p><p>â€‹ å‡ºäºè¿™ä¸ªåŸå› ï¼Œå…·æœ‰å•çº¿ç¨‹ä¸²è¡Œäº‹åŠ¡å¤„ç†çš„ç³»ç»Ÿä¸å…è®¸äº¤äº’å¼çš„å¤šè¯­å¥äº‹åŠ¡ã€‚å–è€Œä»£ä¹‹ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»æå‰å°†æ•´ä¸ªäº‹åŠ¡ä»£ç ä½œä¸ºå­˜å‚¨è¿‡ç¨‹æäº¤ç»™æ•°æ®åº“ã€‚è¿™äº›æ–¹æ³•ä¹‹é—´çš„å·®å¼‚å¦‚<a href="./img/fig7-9.png">å›¾7-9</a> æ‰€ç¤ºã€‚å¦‚æœäº‹åŠ¡æ‰€éœ€çš„æ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œåˆ™å­˜å‚¨è¿‡ç¨‹å¯ä»¥éå¸¸å¿«åœ°æ‰§è¡Œï¼Œè€Œä¸ç”¨ç­‰å¾…ä»»ä½•ç½‘ç»œæˆ–ç£ç›˜I/Oã€‚</p><figure><img src="/assets/fig7-9-O4jkqpzF.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-9 äº¤äº’å¼äº‹åŠ¡å’Œå­˜å‚¨è¿‡ç¨‹ä¹‹é—´çš„åŒºåˆ«ï¼ˆä½¿ç”¨å›¾7-8çš„ç¤ºä¾‹äº‹åŠ¡ï¼‰</strong></p><h4 id="å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç‚¹å’Œç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç‚¹å’Œç¼ºç‚¹" aria-hidden="true">#</a> å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç‚¹å’Œç¼ºç‚¹</h4><p>å­˜å‚¨è¿‡ç¨‹åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´äº†ï¼Œè‡ª1999å¹´ä»¥æ¥å®ƒä»¬ä¸€ç›´æ˜¯SQLæ ‡å‡†ï¼ˆSQL/PSMï¼‰çš„ä¸€éƒ¨åˆ†ã€‚å‡ºäºå„ç§åŸå› ï¼Œå®ƒä»¬çš„åå£°æœ‰ç‚¹ä¸å¤ªå¥½ï¼š</p><ul><li>æ¯ä¸ªæ•°æ®åº“å‚å•†éƒ½æœ‰è‡ªå·±çš„å­˜å‚¨è¿‡ç¨‹è¯­è¨€ï¼ˆOracleæœ‰PL/SQLï¼ŒSQL Serveræœ‰T-SQLï¼ŒPostgreSQLæœ‰PL/pgSQLç­‰ï¼‰ã€‚è¿™äº›è¯­è¨€å¹¶æ²¡æœ‰è·Ÿä¸Šé€šç”¨ç¼–ç¨‹è¯­è¨€çš„å‘å±•ï¼Œæ‰€ä»¥ä»ä»Šå¤©çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒä»¬çœ‹èµ·æ¥ç›¸å½“ä¸‘é™‹å’Œé™ˆæ—§ï¼Œè€Œä¸”ç¼ºä¹å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­èƒ½æ‰¾åˆ°çš„åº“çš„ç”Ÿæ€ç³»ç»Ÿã€‚</li><li>ä¸åº”ç”¨æœåŠ¡å™¨ç›¸æ¯”ï¼Œåœ¨æ•°æ®åº“ä¸­è¿è¡Œçš„ä»£ç ç®¡ç†å›°éš¾ï¼Œè°ƒè¯•å›°éš¾ï¼Œç‰ˆæœ¬æ§åˆ¶å’Œéƒ¨ç½²èµ·æ¥ä¹Ÿæ›´ä¸ºå°´å°¬ï¼Œæ›´éš¾æµ‹è¯•ï¼Œæ›´éš¾å’Œç”¨äºç›‘æ§çš„æŒ‡æ ‡æ”¶é›†ç³»ç»Ÿç›¸é›†æˆã€‚</li><li>æ•°æ®åº“é€šå¸¸æ¯”åº”ç”¨æœåŠ¡å™¨å¯¹æ€§èƒ½æ•æ„Ÿçš„å¤šï¼Œå› ä¸ºå•ä¸ªæ•°æ®åº“å®ä¾‹é€šå¸¸ç”±è®¸å¤šåº”ç”¨æœåŠ¡å™¨å…±äº«ã€‚æ•°æ®åº“ä¸­ä¸€ä¸ªå†™å¾—ä¸å¥½çš„å­˜å‚¨è¿‡ç¨‹ï¼ˆä¾‹å¦‚ï¼Œå ç”¨å¤§é‡å†…å­˜æˆ–CPUæ—¶é—´ï¼‰ä¼šæ¯”åœ¨åº”ç”¨æœåŠ¡å™¨ä¸­ç›¸åŒçš„ä»£ç é€ æˆæ›´å¤šçš„éº»çƒ¦ã€‚</li></ul><p>ä½†æ˜¯è¿™äº›é—®é¢˜éƒ½æ˜¯å¯ä»¥å…‹æœçš„ã€‚ç°ä»£çš„å­˜å‚¨è¿‡ç¨‹å®ç°æ”¾å¼ƒäº†PL/SQLï¼Œè€Œæ˜¯ä½¿ç”¨ç°æœ‰çš„é€šç”¨ç¼–ç¨‹è¯­è¨€ï¼šVoltDBä½¿ç”¨Javaæˆ–Groovyï¼ŒDatomicä½¿ç”¨Javaæˆ–Clojureï¼Œè€ŒRedisä½¿ç”¨Luaã€‚</p><p><strong>å­˜å‚¨è¿‡ç¨‹ä¸å†…å­˜å­˜å‚¨</strong>ï¼Œä½¿å¾—åœ¨å•ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œæ‰€æœ‰äº‹åŠ¡å˜å¾—å¯è¡Œã€‚ç”±äºä¸éœ€è¦ç­‰å¾…I/Oï¼Œä¸”é¿å…äº†å¹¶å‘æ§åˆ¶æœºåˆ¶çš„å¼€é”€ï¼Œå®ƒä»¬å¯ä»¥åœ¨å•ä¸ªçº¿ç¨‹ä¸Šå®ç°ç›¸å½“å¥½çš„ååé‡ã€‚</p><p>VoltDBè¿˜ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹è¿›è¡Œå¤åˆ¶ï¼šä½†ä¸æ˜¯å°†äº‹åŠ¡çš„å†™å…¥ç»“æœä»ä¸€ä¸ªèŠ‚ç‚¹å¤åˆ¶åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œæ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œç›¸åŒçš„å­˜å‚¨è¿‡ç¨‹ã€‚å› æ­¤VoltDBè¦æ±‚å­˜å‚¨è¿‡ç¨‹æ˜¯<strong>ç¡®å®šæ€§çš„</strong>ï¼ˆåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šè¿è¡Œæ—¶ï¼Œå®ƒä»¬å¿…é¡»äº§ç”Ÿç›¸åŒçš„ç»“æœï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœäº‹åŠ¡éœ€è¦ä½¿ç”¨å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ï¼Œåˆ™å¿…é¡»é€šè¿‡ç‰¹æ®Šçš„ç¡®å®šæ€§APIæ¥å®ç°ã€‚</p><h4 id="åˆ†åŒº" tabindex="-1"><a class="header-anchor" href="#åˆ†åŒº" aria-hidden="true">#</a> åˆ†åŒº</h4><p>é¡ºåºæ‰§è¡Œæ‰€æœ‰äº‹åŠ¡ä½¿å¹¶å‘æ§åˆ¶ç®€å•å¤šäº†ï¼Œä½†æ•°æ®åº“çš„äº‹åŠ¡ååé‡è¢«é™åˆ¶ä¸ºå•æœºå•æ ¸çš„é€Ÿåº¦ã€‚åªè¯»äº‹åŠ¡å¯ä»¥ä½¿ç”¨å¿«ç…§éš”ç¦»åœ¨å…¶å®ƒåœ°æ–¹æ‰§è¡Œï¼Œä½†å¯¹äºå†™å…¥ååé‡è¾ƒé«˜çš„åº”ç”¨ï¼Œå•çº¿ç¨‹äº‹åŠ¡å¤„ç†å™¨å¯èƒ½æˆä¸ºä¸€ä¸ªä¸¥é‡çš„ç“¶é¢ˆã€‚</p><p>ä¸ºäº†ä¼¸ç¼©è‡³å¤šä¸ªCPUæ ¸å¿ƒå’Œå¤šä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºï¼ˆè¯·å‚é˜…<a href="/book/ddia/ch6.html" class="">ç¬¬å…­ç« </a>ï¼‰ï¼Œåœ¨VoltDBä¸­æ”¯æŒè¿™æ ·åšã€‚å¦‚æœä½ å¯ä»¥æ‰¾åˆ°ä¸€ç§å¯¹æ•°æ®é›†è¿›è¡Œåˆ†åŒºçš„æ–¹æ³•ï¼Œä»¥ä¾¿æ¯ä¸ªäº‹åŠ¡åªéœ€è¦åœ¨å•ä¸ªåˆ†åŒºä¸­è¯»å†™æ•°æ®ï¼Œé‚£ä¹ˆæ¯ä¸ªåˆ†åŒºå°±å¯ä»¥æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹è¿è¡Œçš„äº‹åŠ¡å¤„ç†çº¿ç¨‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä¸ºæ¯ä¸ªåˆ†åŒºæŒ‡æ´¾ä¸€ä¸ªç‹¬ç«‹çš„CPUæ ¸ï¼Œäº‹åŠ¡ååé‡å°±å¯ä»¥ä¸CPUæ ¸æ•°ä¿æŒçº¿æ€§ä¼¸ç¼©ã€47ã€‘ã€‚</p><p>ä½†æ˜¯ï¼Œå¯¹äºéœ€è¦è®¿é—®å¤šä¸ªåˆ†åŒºçš„ä»»ä½•äº‹åŠ¡ï¼Œæ•°æ®åº“å¿…é¡»åœ¨è§¦åŠçš„æ‰€æœ‰åˆ†åŒºä¹‹é—´åè°ƒäº‹åŠ¡ã€‚å­˜å‚¨è¿‡ç¨‹éœ€è¦è·¨è¶Šæ‰€æœ‰åˆ†åŒºé”å®šæ‰§è¡Œï¼Œä»¥ç¡®ä¿æ•´ä¸ªç³»ç»Ÿçš„å¯ä¸²è¡Œæ€§ã€‚</p><p>ç”±äºè·¨åˆ†åŒºäº‹åŠ¡å…·æœ‰é¢å¤–çš„åè°ƒå¼€é”€ï¼Œæ‰€ä»¥å®ƒä»¬æ¯”å•åˆ†åŒºäº‹åŠ¡æ…¢å¾—å¤šã€‚ VoltDBæŠ¥å‘Šçš„ååé‡å¤§çº¦æ˜¯æ¯ç§’1000ä¸ªè·¨åˆ†åŒºå†™å…¥ï¼Œæ¯”å•åˆ†åŒºååé‡ä½å‡ ä¸ªæ•°é‡çº§ï¼Œå¹¶ä¸”ä¸èƒ½é€šè¿‡å¢åŠ æ›´å¤šçš„æœºå™¨æ¥å¢åŠ ã€49ã€‘ã€‚</p><p>äº‹åŠ¡æ˜¯å¦å¯ä»¥æ˜¯åˆ’åˆ†è‡³å•ä¸ªåˆ†åŒºå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºåº”ç”¨æ•°æ®çš„ç»“æ„ã€‚ç®€å•çš„é”®å€¼æ•°æ®é€šå¸¸å¯ä»¥éå¸¸å®¹æ˜“åœ°è¿›è¡Œåˆ†åŒºï¼Œä½†æ˜¯å…·æœ‰å¤šä¸ªæ¬¡çº§ç´¢å¼•çš„æ•°æ®å¯èƒ½éœ€è¦å¤§é‡çš„è·¨åˆ†åŒºåè°ƒï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch6.html#%E5%88%86%E5%8C%BA%E4%B8%8E%E6%AC%A1%E7%BA%A7%E7%B4%A2%E5%BC%95" class="">åˆ†åŒºä¸æ¬¡çº§ç´¢å¼•</a>â€ï¼‰ã€‚</p><h4 id="ä¸²è¡Œæ‰§è¡Œå°ç»“" tabindex="-1"><a class="header-anchor" href="#ä¸²è¡Œæ‰§è¡Œå°ç»“" aria-hidden="true">#</a> ä¸²è¡Œæ‰§è¡Œå°ç»“</h4><p>åœ¨ç‰¹å®šçº¦æŸæ¡ä»¶ä¸‹ï¼ŒçœŸçš„ä¸²è¡Œæ‰§è¡Œäº‹åŠ¡ï¼Œå·²ç»æˆä¸ºä¸€ç§å®ç°å¯ä¸²è¡ŒåŒ–éš”ç¦»ç­‰çº§çš„å¯è¡ŒåŠæ³•ã€‚</p><ul><li>æ¯ä¸ªäº‹åŠ¡éƒ½å¿…é¡»å°è€Œå¿«ï¼Œåªè¦æœ‰ä¸€ä¸ªç¼“æ…¢çš„äº‹åŠ¡ï¼Œå°±ä¼šæ‹–æ…¢æ‰€æœ‰äº‹åŠ¡å¤„ç†ã€‚</li><li>ä»…é™äºæ´»è·ƒæ•°æ®é›†å¯ä»¥æ”¾å…¥å†…å­˜çš„æƒ…å†µã€‚å¾ˆå°‘è®¿é—®çš„æ•°æ®å¯èƒ½ä¼šè¢«ç§»åŠ¨åˆ°ç£ç›˜ï¼Œä½†å¦‚æœéœ€è¦åœ¨å•çº¿ç¨‹æ‰§è¡Œçš„äº‹åŠ¡ä¸­è®¿é—®ï¼Œç³»ç»Ÿå°±ä¼šå˜å¾—éå¸¸æ…¢<sup class="footnote-ref"><a href="#footnote12">[12]</a><a class="footnote-anchor" id="footnote-ref12"></a></sup>ã€‚</li><li>å†™å…¥ååé‡å¿…é¡»ä½åˆ°èƒ½åœ¨å•ä¸ªCPUæ ¸ä¸Šå¤„ç†ï¼Œå¦‚è‹¥ä¸ç„¶ï¼Œäº‹åŠ¡éœ€è¦èƒ½åˆ’åˆ†è‡³å•ä¸ªåˆ†åŒºï¼Œä¸”ä¸éœ€è¦è·¨åˆ†åŒºåè°ƒã€‚</li><li>è·¨åˆ†åŒºäº‹åŠ¡æ˜¯å¯èƒ½çš„ï¼Œä½†æ˜¯å®ƒä»¬èƒ½è¢«ä½¿ç”¨çš„ç¨‹åº¦æœ‰å¾ˆå¤§çš„é™åˆ¶ã€‚</li></ul><h3 id="ä¸¤é˜¶æ®µé”å®š" tabindex="-1"><a class="header-anchor" href="#ä¸¤é˜¶æ®µé”å®š" aria-hidden="true">#</a> ä¸¤é˜¶æ®µé”å®š</h3><p>å¤§çº¦30å¹´æ¥ï¼Œåœ¨æ•°æ®åº“ä¸­åªæœ‰ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„ä¸²è¡ŒåŒ–ç®—æ³•ï¼š<strong>ä¸¤é˜¶æ®µé”å®šï¼ˆ2PLï¼Œtwo-phase lockingï¼‰</strong> <sup class="footnote-ref"><a href="#footnote13">[13]</a><a class="footnote-anchor" id="footnote-ref13"></a></sup></p><blockquote><h4 id="_2plä¸æ˜¯2pc" tabindex="-1"><a class="header-anchor" href="#_2plä¸æ˜¯2pc" aria-hidden="true">#</a> 2PLä¸æ˜¯2PC</h4><p>è¯·æ³¨æ„ï¼Œè™½ç„¶ä¸¤é˜¶æ®µé”å®šï¼ˆ2PLï¼‰å¬èµ·æ¥éå¸¸ç±»ä¼¼äºä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰ï¼Œä½†å®ƒä»¬æ˜¯å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚æˆ‘ä»¬å°†åœ¨<a href="/book/ddia/ch9.html" class="">ç¬¬ä¹ç« </a>è®¨è®º2PCã€‚</p></blockquote><p>ä¹‹å‰æˆ‘ä»¬çœ‹åˆ°é”é€šå¸¸ç”¨äºé˜²æ­¢è„å†™ï¼ˆè¯·å‚é˜…â€œ<a href="#%E6%B2%A1%E6%9C%89%E8%84%8F%E5%86%99">æ²¡æœ‰è„å†™</a>â€ä¸€èŠ‚ï¼‰ï¼šå¦‚æœä¸¤ä¸ªäº‹åŠ¡åŒæ—¶å°è¯•å†™å…¥åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™é”å¯ç¡®ä¿ç¬¬äºŒä¸ªå†™å…¥å¿…é¡»ç­‰åˆ°ç¬¬ä¸€ä¸ªå†™å…¥å®Œæˆäº‹åŠ¡ï¼ˆä¸­æ­¢æˆ–æäº¤ï¼‰ï¼Œç„¶åæ‰èƒ½ç»§ç»­ã€‚</p><p>ä¸¤é˜¶æ®µé”å®šç±»ä¼¼ï¼Œä½†æ˜¯é”çš„è¦æ±‚æ›´å¼ºå¾—å¤šã€‚åªè¦æ²¡æœ‰å†™å…¥ï¼Œå°±å…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€ä¸ªå¯¹è±¡ã€‚ä½†å¯¹è±¡åªè¦æœ‰å†™å…¥ï¼ˆä¿®æ”¹æˆ–åˆ é™¤ï¼‰ï¼Œå°±éœ€è¦<strong>ç‹¬å è®¿é—®ï¼ˆexclusive accessï¼‰</strong> æƒé™ï¼š</p><ul><li>å¦‚æœäº‹åŠ¡Aè¯»å–äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”äº‹åŠ¡Bæƒ³è¦å†™å…¥è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆBå¿…é¡»ç­‰åˆ°Aæäº¤æˆ–ä¸­æ­¢æ‰èƒ½ç»§ç»­ã€‚ ï¼ˆè¿™ç¡®ä¿Bä¸èƒ½åœ¨Aåº•ä¸‹æ„å¤–åœ°æ”¹å˜å¯¹è±¡ã€‚ï¼‰</li><li>å¦‚æœäº‹åŠ¡Aå†™å…¥äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”äº‹åŠ¡Bæƒ³è¦è¯»å–è¯¥å¯¹è±¡ï¼Œåˆ™Bå¿…é¡»ç­‰åˆ°Aæäº¤æˆ–ä¸­æ­¢æ‰èƒ½ç»§ç»­ã€‚ ï¼ˆåƒ<a href="./img/fig7-1.png">å›¾7-1</a>é‚£æ ·è¯»å–æ—§ç‰ˆæœ¬çš„å¯¹è±¡åœ¨2PLä¸‹æ˜¯ä¸å¯æ¥å—çš„ã€‚ï¼‰</li></ul><p>åœ¨2PLä¸­ï¼Œå†™å…¥ä¸ä»…ä¼šé˜»å¡å…¶ä»–å†™å…¥ï¼Œä¹Ÿä¼šé˜»å¡è¯»ï¼Œåä¹‹äº¦ç„¶ã€‚å¿«ç…§éš”ç¦»ä½¿å¾—<strong>è¯»ä¸é˜»å¡å†™ï¼Œå†™ä¹Ÿä¸é˜»å¡è¯»</strong>ï¼ˆè¯·å‚é˜…â€œ<a href="#%E5%AE%9E%E7%8E%B0%E5%BF%AB%E7%85%A7%E9%9A%94%E7%A6%BB">å®ç°å¿«ç…§éš”ç¦»</a>â€ï¼‰ï¼Œè¿™æ˜¯2PLå’Œå¿«ç…§éš”ç¦»ä¹‹é—´çš„å…³é”®åŒºåˆ«ã€‚å¦ä¸€æ–¹é¢ï¼Œå› ä¸º2PLæä¾›äº†å¯ä¸²è¡ŒåŒ–çš„æ€§è´¨ï¼Œå®ƒå¯ä»¥é˜²æ­¢æ—©å…ˆè®¨è®ºçš„æ‰€æœ‰ç«äº‰æ¡ä»¶ï¼ŒåŒ…æ‹¬ä¸¢å¤±æ›´æ–°å’Œå†™å…¥åå·®ã€‚</p><h4 id="å®ç°ä¸¤é˜¶æ®µé”" tabindex="-1"><a class="header-anchor" href="#å®ç°ä¸¤é˜¶æ®µé”" aria-hidden="true">#</a> å®ç°ä¸¤é˜¶æ®µé”</h4><p>2PLç”¨äºMySQLï¼ˆInnoDBï¼‰å’ŒSQL Serverä¸­çš„å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ï¼Œä»¥åŠDB2ä¸­çš„å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ã€23,36ã€‘ã€‚</p><p>è¯»ä¸å†™çš„é˜»å¡æ˜¯é€šè¿‡ä¸ºæ•°æ®åº“ä¸­æ¯ä¸ªå¯¹è±¡æ·»åŠ é”æ¥å®ç°çš„ã€‚é”å¯ä»¥å¤„äº<strong>å…±äº«æ¨¡å¼ï¼ˆshared modeï¼‰</strong> æˆ–<strong>ç‹¬å æ¨¡å¼ï¼ˆexclusive modeï¼‰</strong>ã€‚é”ä½¿ç”¨å¦‚ä¸‹ï¼š</p><ul><li>è‹¥äº‹åŠ¡è¦è¯»å–å¯¹è±¡ï¼Œåˆ™é¡»å…ˆä»¥å…±äº«æ¨¡å¼è·å–é”ã€‚å…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶æŒæœ‰å…±äº«é”ã€‚ä½†å¦‚æœå¦ä¸€ä¸ªäº‹åŠ¡å·²ç»åœ¨å¯¹è±¡ä¸ŠæŒæœ‰æ’å®ƒé”ï¼Œåˆ™è¿™äº›äº‹åŠ¡å¿…é¡»ç­‰å¾…ã€‚</li><li>è‹¥äº‹åŠ¡è¦å†™å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¿…é¡»é¦–å…ˆä»¥ç‹¬å æ¨¡å¼è·å–è¯¥é”ã€‚æ²¡æœ‰å…¶ä»–äº‹åŠ¡å¯ä»¥åŒæ—¶æŒæœ‰é”ï¼ˆæ— è®ºæ˜¯å…±äº«æ¨¡å¼è¿˜æ˜¯ç‹¬å æ¨¡å¼ï¼‰ï¼Œæ‰€ä»¥å¦‚æœå¯¹è±¡ä¸Šå­˜åœ¨ä»»ä½•é”ï¼Œè¯¥äº‹åŠ¡å¿…é¡»ç­‰å¾…ã€‚</li><li>å¦‚æœäº‹åŠ¡å…ˆè¯»å–å†å†™å…¥å¯¹è±¡ï¼Œåˆ™å®ƒå¯èƒ½ä¼šå°†å…¶å…±äº«é”å‡çº§ä¸ºç‹¬å é”ã€‚å‡çº§é”çš„å·¥ä½œä¸ç›´æ¥è·å¾—æ’ä»–é”ç›¸åŒã€‚</li><li>äº‹åŠ¡è·å¾—é”ä¹‹åï¼Œå¿…é¡»ç»§ç»­æŒæœ‰é”ç›´åˆ°äº‹åŠ¡ç»“æŸï¼ˆæäº¤æˆ–ä¸­æ­¢ï¼‰ã€‚è¿™å°±æ˜¯â€œä¸¤é˜¶æ®µâ€è¿™ä¸ªåå­—çš„æ¥æºï¼šç¬¬ä¸€é˜¶æ®µï¼ˆå½“äº‹åŠ¡æ­£åœ¨æ‰§è¡Œæ—¶ï¼‰è·å–é”ï¼Œç¬¬äºŒé˜¶æ®µï¼ˆåœ¨äº‹åŠ¡ç»“æŸæ—¶ï¼‰é‡Šæ”¾æ‰€æœ‰çš„é”ã€‚</li></ul><p>ç”±äºä½¿ç”¨äº†è¿™ä¹ˆå¤šçš„é”ï¼Œå› æ­¤å¾ˆå¯èƒ½ä¼šå‘ç”Ÿï¼šäº‹åŠ¡Aç­‰å¾…äº‹åŠ¡Bé‡Šæ”¾å®ƒçš„é”ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ç§æƒ…å†µå«åš<strong>æ­»é”ï¼ˆDeadlockï¼‰</strong>ã€‚æ•°æ®åº“ä¼šè‡ªåŠ¨æ£€æµ‹äº‹åŠ¡ä¹‹é—´çš„æ­»é”ï¼Œå¹¶ä¸­æ­¢å…¶ä¸­ä¸€ä¸ªï¼Œä»¥ä¾¿å¦ä¸€ä¸ªç»§ç»­æ‰§è¡Œã€‚è¢«ä¸­æ­¢çš„äº‹åŠ¡éœ€è¦ç”±åº”ç”¨ç¨‹åºé‡è¯•ã€‚</p><h4 id="ä¸¤é˜¶æ®µé”å®šçš„æ€§èƒ½" tabindex="-1"><a class="header-anchor" href="#ä¸¤é˜¶æ®µé”å®šçš„æ€§èƒ½" aria-hidden="true">#</a> ä¸¤é˜¶æ®µé”å®šçš„æ€§èƒ½</h4><p>ä¸¤é˜¶æ®µé”å®šçš„å·¨å¤§ç¼ºç‚¹ï¼Œä»¥åŠ70å¹´ä»£ä»¥æ¥æ²¡æœ‰è¢«æ‰€æœ‰äººä½¿ç”¨çš„åŸå› ï¼Œæ˜¯å…¶æ€§èƒ½é—®é¢˜ã€‚ä¸¤é˜¶æ®µé”å®šä¸‹çš„äº‹åŠ¡ååé‡ä¸æŸ¥è¯¢å“åº”æ—¶é—´è¦æ¯”å¼±éš”ç¦»çº§åˆ«ä¸‹è¦å·®å¾—å¤šã€‚</p><p>è¿™ä¸€éƒ¨åˆ†æ˜¯ç”±äºè·å–å’Œé‡Šæ”¾æ‰€æœ‰è¿™äº›é”çš„å¼€é”€ï¼Œä½†æ›´é‡è¦çš„æ˜¯ç”±äºå¹¶å‘æ€§çš„é™ä½ã€‚æŒ‰ç…§è®¾è®¡ï¼Œå¦‚æœä¸¤ä¸ªå¹¶å‘äº‹åŠ¡è¯•å›¾åšä»»ä½•å¯èƒ½å¯¼è‡´ç«äº‰æ¡ä»¶çš„äº‹æƒ…ï¼Œé‚£ä¹ˆå¿…é¡»ç­‰å¾…å¦ä¸€ä¸ªå®Œæˆã€‚</p><p>ä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“ä¸é™åˆ¶äº‹åŠ¡çš„æŒç»­æ—¶é—´ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸ºç­‰å¾…äººç±»è¾“å…¥çš„äº¤äº’å¼åº”ç”¨è€Œè®¾è®¡çš„ã€‚å› æ­¤ï¼Œå½“ä¸€ä¸ªäº‹åŠ¡éœ€è¦ç­‰å¾…å¦ä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œç­‰å¾…çš„æ—¶é•¿å¹¶æ²¡æœ‰é™åˆ¶ã€‚å³ä½¿ä½ ä¿è¯æ‰€æœ‰çš„äº‹åŠ¡éƒ½å¾ˆçŸ­ï¼Œå¦‚æœæœ‰å¤šä¸ªäº‹åŠ¡æƒ³è¦è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå½¢æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ‰€ä»¥äº‹åŠ¡å¯èƒ½éœ€è¦ç­‰å¾…å‡ ä¸ªå…¶ä»–äº‹åŠ¡æ‰èƒ½å®Œæˆã€‚</p><p>å› æ­¤ï¼Œè¿è¡Œ2PLçš„æ•°æ®åº“å¯èƒ½å…·æœ‰ç›¸å½“ä¸ç¨³å®šçš„å»¶è¿Ÿï¼Œå¦‚æœåœ¨å·¥ä½œè´Ÿè½½ä¸­å­˜åœ¨äº‰ç”¨ï¼Œé‚£ä¹ˆå¯èƒ½é«˜ç™¾åˆ†ä½ç‚¹å¤„çš„å“åº”ä¼šéå¸¸çš„æ…¢ï¼ˆè¯·å‚é˜…â€œ<a href="/book/ddia/ch1.html#%E6%8F%8F%E8%BF%B0%E6%80%A7%E8%83%BD" class="">æè¿°æ€§èƒ½</a>â€ï¼‰ã€‚å¯èƒ½åªéœ€è¦ä¸€ä¸ªç¼“æ…¢çš„äº‹åŠ¡ï¼Œæˆ–è€…ä¸€ä¸ªè®¿é—®å¤§é‡æ•°æ®å¹¶è·å–è®¸å¤šé”çš„äº‹åŠ¡ï¼Œå°±èƒ½æŠŠç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†æ‹–æ…¢ï¼Œç”šè‡³è¿«ä½¿ç³»ç»Ÿåœæœºã€‚å½“éœ€è¦ç¨³å¥çš„æ“ä½œæ—¶ï¼Œè¿™ç§ä¸ç¨³å®šæ€§æ˜¯æœ‰é—®é¢˜çš„ã€‚</p><p>åŸºäºé”å®ç°çš„è¯»å·²æäº¤éš”ç¦»çº§åˆ«å¯èƒ½å‘ç”Ÿæ­»é”ï¼Œä½†åœ¨åŸºäº2PLå®ç°çš„å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ä¸­ï¼Œå®ƒä»¬ä¼šå‡ºç°çš„é¢‘ç¹çš„å¤šï¼ˆå–å†³äºäº‹åŠ¡çš„è®¿é—®æ¨¡å¼ï¼‰ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªé¢å¤–çš„æ€§èƒ½é—®é¢˜ï¼šå½“äº‹åŠ¡ç”±äºæ­»é”è€Œè¢«ä¸­æ­¢å¹¶è¢«é‡è¯•æ—¶ï¼Œå®ƒéœ€è¦ä»å¤´é‡åšå®ƒçš„å·¥ä½œã€‚å¦‚æœæ­»é”å¾ˆé¢‘ç¹ï¼Œè¿™å¯èƒ½æ„å‘³ç€å·¨å¤§çš„æµªè´¹ã€‚</p><h4 id="è°“è¯é”" tabindex="-1"><a class="header-anchor" href="#è°“è¯é”" aria-hidden="true">#</a> è°“è¯é”</h4><p>åœ¨å‰é¢å…³äºé”çš„æè¿°ä¸­ï¼Œæˆ‘ä»¬æ©ç›–äº†ä¸€ä¸ªå¾®å¦™è€Œé‡è¦çš„ç»†èŠ‚ã€‚åœ¨â€œ<a href="#%E5%AF%BC%E8%87%B4%E5%86%99%E5%85%A5%E5%81%8F%E5%B7%AE%E7%9A%84%E5%B9%BB%E8%AF%BB">å¯¼è‡´å†™å…¥åå·®çš„å¹»è¯»</a>â€ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†<strong>å¹»è¯»ï¼ˆphantomsï¼‰</strong> çš„é—®é¢˜ã€‚å³ä¸€ä¸ªäº‹åŠ¡æ”¹å˜å¦ä¸€ä¸ªäº‹åŠ¡çš„æœç´¢æŸ¥è¯¢çš„ç»“æœã€‚å…·æœ‰å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«çš„æ•°æ®åº“å¿…é¡»é˜²æ­¢<strong>å¹»è¯»</strong>ã€‚</p><p>åœ¨ä¼šè®®å®¤é¢„è®¢çš„ä¾‹å­ä¸­ï¼Œè¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªäº‹åŠ¡åœ¨æŸä¸ªæ—¶é—´çª—å£å†…æœç´¢äº†ä¸€ä¸ªæˆ¿é—´çš„ç°æœ‰é¢„è®¢ï¼ˆè§<a href="">ä¾‹7-2</a>ï¼‰ï¼Œåˆ™å¦ä¸€ä¸ªäº‹åŠ¡ä¸èƒ½åŒæ—¶æ’å…¥æˆ–æ›´æ–°åŒä¸€æ—¶é—´çª—å£ä¸åŒä¸€æˆ¿é—´çš„å¦ä¸€ä¸ªé¢„è®¢ ï¼ˆå¯ä»¥åŒæ—¶æ’å…¥å…¶ä»–æˆ¿é—´çš„é¢„è®¢ï¼Œæˆ–åœ¨ä¸å½±å“å¦ä¸€ä¸ªé¢„å®šçš„æ¡ä»¶ä¸‹é¢„å®šåŒä¸€æˆ¿é—´çš„å…¶ä»–æ—¶é—´æ®µï¼‰ã€‚</p><p>å¦‚ä½•å®ç°è¿™ä¸€ç‚¹ï¼Ÿä»æ¦‚å¿µä¸Šè®²ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong>è°“è¯é”ï¼ˆpredicate lockï¼‰</strong>ã€3ã€‘ã€‚å®ƒç±»ä¼¼äºå‰é¢æè¿°çš„å…±äº«/æ’å®ƒé”ï¼Œä½†ä¸å±äºç‰¹å®šçš„å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œè¡¨ä¸­çš„ä¸€è¡Œï¼‰ï¼Œå®ƒå±äºæ‰€æœ‰ç¬¦åˆæŸäº›æœç´¢æ¡ä»¶çš„å¯¹è±¡ï¼Œå¦‚ï¼š</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> bookings
<span class="token keyword">WHERE</span> room_id <span class="token operator">=</span> <span class="token number">123</span> <span class="token operator">AND</span>
      end_time <span class="token operator">&gt;</span> <span class="token string">&#39;2018-01-01 12:00&#39;</span> <span class="token operator">AND</span> 
      start_time <span class="token operator">&lt;</span> <span class="token string">&#39;2018-01-01 13:00&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p>è°“è¯é”é™åˆ¶è®¿é—®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>å¦‚æœäº‹åŠ¡Aæƒ³è¦è¯»å–åŒ¹é…æŸäº›æ¡ä»¶çš„å¯¹è±¡ï¼Œå°±åƒåœ¨è¿™ä¸ª <code>SELECT</code> æŸ¥è¯¢ä¸­é‚£æ ·ï¼Œå®ƒå¿…é¡»è·å–æŸ¥è¯¢æ¡ä»¶ä¸Šçš„<strong>å…±äº«è°“è¯é”ï¼ˆshared-mode predicate lockï¼‰</strong>ã€‚å¦‚æœå¦ä¸€ä¸ªäº‹åŠ¡BæŒæœ‰ä»»ä½•æ»¡è¶³è¿™ä¸€æŸ¥è¯¢æ¡ä»¶å¯¹è±¡çš„æ’å®ƒé”ï¼Œé‚£ä¹ˆAå¿…é¡»ç­‰åˆ°Bé‡Šæ”¾å®ƒçš„é”ä¹‹åæ‰å…è®¸è¿›è¡ŒæŸ¥è¯¢ã€‚</li><li>å¦‚æœäº‹åŠ¡Aæƒ³è¦æ’å…¥ï¼Œæ›´æ–°æˆ–åˆ é™¤ä»»ä½•å¯¹è±¡ï¼Œåˆ™å¿…é¡»é¦–å…ˆæ£€æŸ¥æ—§å€¼æˆ–æ–°å€¼æ˜¯å¦ä¸ä»»ä½•ç°æœ‰çš„è°“è¯é”åŒ¹é…ã€‚å¦‚æœäº‹åŠ¡BæŒæœ‰åŒ¹é…çš„è°“è¯é”ï¼Œé‚£ä¹ˆAå¿…é¡»ç­‰åˆ°Bå·²ç»æäº¤æˆ–ä¸­æ­¢åæ‰èƒ½ç»§ç»­ã€‚</li></ul><p>è¿™é‡Œçš„å…³é”®æ€æƒ³æ˜¯ï¼Œè°“è¯é”ç”šè‡³é€‚ç”¨äºæ•°æ®åº“ä¸­å°šä¸å­˜åœ¨ï¼Œä½†å°†æ¥å¯èƒ½ä¼šæ·»åŠ çš„å¯¹è±¡ï¼ˆå¹»è±¡ï¼‰ã€‚å¦‚æœä¸¤é˜¶æ®µé”å®šåŒ…å«è°“è¯é”ï¼Œåˆ™æ•°æ®åº“å°†é˜»æ­¢æ‰€æœ‰å½¢å¼çš„å†™å…¥åå·®å’Œå…¶ä»–ç«äº‰æ¡ä»¶ï¼Œå› æ­¤å…¶éš”ç¦»å®ç°äº†å¯ä¸²è¡ŒåŒ–ã€‚</p><h4 id="ç´¢å¼•èŒƒå›´é”" tabindex="-1"><a class="header-anchor" href="#ç´¢å¼•èŒƒå›´é”" aria-hidden="true">#</a> ç´¢å¼•èŒƒå›´é”</h4><p>ä¸å¹¸çš„æ˜¯è°“è¯é”æ€§èƒ½ä¸ä½³ï¼š<strong>å¦‚æœæ´»è·ƒäº‹åŠ¡æŒæœ‰å¾ˆå¤šé”ï¼Œæ£€æŸ¥åŒ¹é…çš„é”ä¼šéå¸¸è€—æ—¶ã€‚<strong>å› æ­¤ï¼Œå¤§å¤šæ•°ä½¿ç”¨2PLçš„æ•°æ®åº“å®é™…ä¸Šå®ç°äº†ç´¢å¼•èŒƒå›´é”ï¼ˆä¹Ÿç§°ä¸º</strong>é—´éš™é”ï¼ˆnext-key lockingï¼‰</strong>ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„è¿‘ä¼¼ç‰ˆè°“è¯é”ã€41,50ã€‘ã€‚</p><p>é€šè¿‡ä½¿è°“è¯åŒ¹é…åˆ°ä¸€ä¸ªæ›´å¤§çš„é›†åˆæ¥ç®€åŒ–è°“è¯é”æ˜¯å®‰å…¨çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰åœ¨ä¸­åˆå’Œä¸‹åˆ1ç‚¹ä¹‹é—´é¢„è®¢123å·æˆ¿é—´çš„è°“è¯é”ï¼Œåˆ™é”å®š123å·æˆ¿é—´çš„æ‰€æœ‰æ—¶é—´æ®µï¼Œæˆ–è€…é”å®š12:00~13:00æ—¶é—´æ®µçš„æ‰€æœ‰æˆ¿é—´ï¼ˆä¸åªæ˜¯123å·æˆ¿é—´ï¼‰æ˜¯ä¸€ä¸ªå®‰å…¨çš„è¿‘ä¼¼ï¼Œå› ä¸ºä»»ä½•æ»¡è¶³åŸå§‹è°“è¯çš„å†™å…¥ä¹Ÿä¸€å®šä¼šæ»¡è¶³è¿™ç§æ›´æ¾æ•£çš„è¿‘ä¼¼ã€‚</p><p>åœ¨æˆ¿é—´é¢„è®¢æ•°æ®åº“ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šåœ¨<code>room_id</code>åˆ—ä¸Šæœ‰ä¸€ä¸ªç´¢å¼•ï¼Œå¹¶ä¸”/æˆ–è€…åœ¨<code>start_time</code> å’Œ <code>end_time</code>ä¸Šæœ‰ç´¢å¼•ï¼ˆå¦åˆ™å‰é¢çš„æŸ¥è¯¢åœ¨å¤§å‹æ•°æ®åº“ä¸Šçš„é€Ÿåº¦ä¼šéå¸¸æ…¢ï¼‰ï¼š</p><ul><li>å‡è®¾æ‚¨çš„ç´¢å¼•ä½äº<code>room_id</code>ä¸Šï¼Œå¹¶ä¸”æ•°æ®åº“ä½¿ç”¨æ­¤ç´¢å¼•æŸ¥æ‰¾123å·æˆ¿é—´çš„ç°æœ‰é¢„è®¢ã€‚ç°åœ¨æ•°æ®åº“å¯ä»¥ç®€å•åœ°å°†å…±äº«é”é™„åŠ åˆ°è¿™ä¸ªç´¢å¼•é¡¹ä¸Šï¼ŒæŒ‡ç¤ºäº‹åŠ¡å·²æœç´¢123å·æˆ¿é—´ç”¨äºé¢„è®¢ã€‚</li><li>æˆ–è€…ï¼Œå¦‚æœæ•°æ®åº“ä½¿ç”¨åŸºäºæ—¶é—´çš„ç´¢å¼•æ¥æŸ¥æ‰¾ç°æœ‰é¢„è®¢ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å°†å…±äº«é”é™„åŠ åˆ°è¯¥ç´¢å¼•ä¸­çš„ä¸€ç³»åˆ—å€¼ï¼ŒæŒ‡ç¤ºäº‹åŠ¡å·²ç»å°†12:00~13:00æ—¶é—´æ®µæ ‡è®°ä¸ºç”¨äºé¢„å®šã€‚</li></ul><p>æ— è®ºå“ªç§æ–¹å¼ï¼Œæœç´¢æ¡ä»¶çš„è¿‘ä¼¼å€¼éƒ½é™„åŠ åˆ°å…¶ä¸­ä¸€ä¸ªç´¢å¼•ä¸Šã€‚ç°åœ¨ï¼Œå¦‚æœå¦ä¸€ä¸ªäº‹åŠ¡æƒ³è¦æ’å…¥ï¼Œæ›´æ–°æˆ–åˆ é™¤åŒä¸€ä¸ªæˆ¿é—´å’Œ/æˆ–é‡å æ—¶é—´æ®µçš„é¢„è®¢ï¼Œåˆ™å®ƒå°†ä¸å¾—ä¸æ›´æ–°ç´¢å¼•çš„ç›¸åŒéƒ¨åˆ†ã€‚åœ¨è¿™æ ·åšçš„è¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šé‡åˆ°å…±äº«é”ï¼Œå®ƒå°†è¢«è¿«ç­‰åˆ°é”è¢«é‡Šæ”¾ã€‚</p><p>è¿™ç§æ–¹æ³•èƒ½å¤Ÿæœ‰æ•ˆé˜²æ­¢å¹»è¯»å’Œå†™å…¥åå·®ã€‚ç´¢å¼•èŒƒå›´é”å¹¶ä¸åƒè°“è¯é”é‚£æ ·ç²¾ç¡®ï¼ˆå®ƒä»¬å¯èƒ½ä¼šé”å®šæ›´å¤§èŒƒå›´çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç»´æŒå¯ä¸²è¡ŒåŒ–æ‰€å¿…éœ€çš„èŒƒå›´ï¼‰ï¼Œä½†æ˜¯ç”±äºå®ƒä»¬çš„å¼€é”€è¾ƒä½ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŠ˜è¡·ã€‚</p><p>å¦‚æœæ²¡æœ‰å¯ä»¥æŒ‚è½½é—´éš™é”çš„ç´¢å¼•ï¼Œæ•°æ®åº“å¯ä»¥é€€åŒ–åˆ°ä½¿ç”¨æ•´ä¸ªè¡¨ä¸Šçš„å…±äº«é”ã€‚è¿™å¯¹æ€§èƒ½ä¸åˆ©ï¼Œå› ä¸ºå®ƒä¼šé˜»æ­¢æ‰€æœ‰å…¶ä»–äº‹åŠ¡å†™å…¥è¡¨æ ¼ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå®‰å…¨çš„å›é€€ä½ç½®ã€‚</p><h3 id="å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»" tabindex="-1"><a class="header-anchor" href="#å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»" aria-hidden="true">#</a> å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»</h3><p>æœ¬ç« æç»˜äº†æ•°æ®åº“ä¸­å¹¶å‘æ§åˆ¶çš„é»¯æ·¡ç”»é¢ã€‚ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å®ç°äº†æ€§èƒ½ä¸å¥½ï¼ˆ2PLï¼‰æˆ–è€…ä¼¸ç¼©æ€§ä¸å¥½ï¼ˆä¸²è¡Œæ‰§è¡Œï¼‰çš„å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬æœ‰æ€§èƒ½è‰¯å¥½çš„å¼±éš”ç¦»çº§åˆ«ï¼Œä½†å®¹æ˜“å‡ºç°å„ç§ç«äº‰æ¡ä»¶ï¼ˆä¸¢å¤±æ›´æ–°ï¼Œå†™å…¥åå·®ï¼Œå¹»è¯»ç­‰ï¼‰ã€‚ä¸²è¡ŒåŒ–çš„éš”ç¦»çº§åˆ«å’Œé«˜æ€§èƒ½æ˜¯ä»æ ¹æœ¬ä¸Šç›¸äº’çŸ›ç›¾çš„å—ï¼Ÿ</p><p>ä¹Ÿè®¸ä¸æ˜¯ï¼šä¸€ä¸ªç§°ä¸º<strong>å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»ï¼ˆSSI, serializable snapshot isolationï¼‰</strong> çš„ç®—æ³•æ˜¯éå¸¸æœ‰å‰é€”çš„ã€‚å®ƒæä¾›äº†å®Œæ•´çš„å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ï¼Œä½†ä¸å¿«ç…§éš”ç¦»ç›¸æ¯”åªæœ‰å¾ˆå°çš„æ€§èƒ½æŸå¤±ã€‚ SSIæ˜¯ç›¸å½“æ–°çš„ï¼šå®ƒåœ¨2008å¹´é¦–æ¬¡è¢«æè¿°ã€40ã€‘ï¼Œå¹¶ä¸”æ˜¯Michael Cahillçš„åšå£«è®ºæ–‡ã€51ã€‘çš„ä¸»é¢˜ã€‚</p><p>ä»Šå¤©ï¼ŒSSIæ—¢ç”¨äºå•èŠ‚ç‚¹æ•°æ®åº“ï¼ˆPostgreSQL9.1 ä»¥åçš„å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ï¼‰å’Œåˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆFoundationDBä½¿ç”¨ç±»ä¼¼çš„ç®—æ³•ï¼‰ã€‚ç”±äºSSIä¸å…¶ä»–å¹¶å‘æ§åˆ¶æœºåˆ¶ç›¸æ¯”è¿˜å¾ˆå¹´è½»ï¼Œè¿˜å¤„äºåœ¨å®è·µä¸­è¯æ˜è‡ªå·±è¡¨ç°çš„é˜¶æ®µã€‚ä½†å®ƒæœ‰å¯èƒ½å› ä¸ºè¶³å¤Ÿå¿«è€Œåœ¨æœªæ¥æˆä¸ºæ–°çš„é»˜è®¤é€‰é¡¹ã€‚</p><h4 id="æ‚²è§‚ä¸ä¹è§‚çš„å¹¶å‘æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#æ‚²è§‚ä¸ä¹è§‚çš„å¹¶å‘æ§åˆ¶" aria-hidden="true">#</a> æ‚²è§‚ä¸ä¹è§‚çš„å¹¶å‘æ§åˆ¶</h4><p>ä¸¤é˜¶æ®µé”æ˜¯ä¸€ç§æ‰€è°“çš„<strong>æ‚²è§‚å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼ˆpessimisticï¼‰</strong> ï¼šå®ƒæ˜¯åŸºäºè¿™æ ·çš„åŸåˆ™ï¼šå¦‚æœæœ‰äº‹æƒ…å¯èƒ½å‡ºé”™ï¼ˆå¦‚å¦ä¸€ä¸ªäº‹åŠ¡æ‰€æŒæœ‰çš„é”æ‰€è¡¨ç¤ºçš„ï¼‰ï¼Œæœ€å¥½ç­‰åˆ°æƒ…å†µå®‰å…¨åå†åšä»»ä½•äº‹æƒ…ã€‚è¿™å°±åƒäº’æ–¥ï¼Œç”¨äºä¿æŠ¤å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„æ•°æ®ç»“æ„ã€‚</p><p>ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œä¸²è¡Œæ‰§è¡Œå¯ä»¥ç§°ä¸ºæ‚²è§‚åˆ°äº†æè‡´ï¼šåœ¨äº‹åŠ¡æŒç»­æœŸé—´ï¼Œæ¯ä¸ªäº‹åŠ¡å¯¹æ•´ä¸ªæ•°æ®åº“ï¼ˆæˆ–æ•°æ®åº“çš„ä¸€ä¸ªåˆ†åŒºï¼‰å…·æœ‰æ’å®ƒé”ï¼Œä½œä¸ºå¯¹æ‚²è§‚çš„è¡¥å¿ï¼Œæˆ‘ä»¬è®©æ¯ç¬”äº‹åŠ¡æ‰§è¡Œå¾—éå¸¸å¿«ï¼Œæ‰€ä»¥åªéœ€è¦çŸ­æ—¶é—´æŒæœ‰â€œé”â€ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<strong>ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»</strong>æ˜¯ä¸€ç§<strong>ä¹è§‚ï¼ˆoptimisticï¼‰</strong> çš„å¹¶å‘æ§åˆ¶æŠ€æœ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¹è§‚æ„å‘³ç€ï¼Œå¦‚æœå­˜åœ¨æ½œåœ¨çš„å±é™©ä¹Ÿä¸é˜»æ­¢äº‹åŠ¡ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œäº‹åŠ¡ï¼Œå¸Œæœ›ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥ã€‚å½“ä¸€ä¸ªäº‹åŠ¡æƒ³è¦æäº¤æ—¶ï¼Œæ•°æ®åº“æ£€æŸ¥æ˜¯å¦æœ‰ä»€ä¹ˆä¸å¥½çš„äº‹æƒ…å‘ç”Ÿï¼ˆå³éš”ç¦»æ˜¯å¦è¢«è¿åï¼‰ï¼›å¦‚æœæ˜¯çš„è¯ï¼Œäº‹åŠ¡å°†è¢«ä¸­æ­¢ï¼Œå¹¶ä¸”å¿…é¡»é‡è¯•ã€‚åªæœ‰å¯ä¸²è¡ŒåŒ–çš„äº‹åŠ¡æ‰è¢«å…è®¸æäº¤ã€‚</p><p>ä¹è§‚å¹¶å‘æ§åˆ¶æ˜¯ä¸€ä¸ªå¤è€çš„æƒ³æ³•ã€52ã€‘ï¼Œå…¶ä¼˜ç‚¹å’Œç¼ºç‚¹å·²ç»äº‰è®ºäº†å¾ˆé•¿æ—¶é—´ã€53ã€‘ã€‚å¦‚æœå­˜åœ¨å¾ˆå¤š<strong>äº‰ç”¨ï¼ˆcontentionï¼‰</strong>ï¼ˆå¾ˆå¤šäº‹åŠ¡è¯•å›¾è®¿é—®ç›¸åŒçš„å¯¹è±¡ï¼‰ï¼Œåˆ™è¡¨ç°ä¸ä½³ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´å¾ˆå¤§ä¸€éƒ¨åˆ†äº‹åŠ¡éœ€è¦ä¸­æ­¢ã€‚å¦‚æœç³»ç»Ÿå·²ç»æ¥è¿‘æœ€å¤§ååé‡ï¼Œæ¥è‡ªé‡è¯•äº‹åŠ¡çš„é¢å¤–è´Ÿè½½å¯èƒ½ä¼šä½¿æ€§èƒ½å˜å·®ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæœ‰è¶³å¤Ÿçš„å¤‡ç”¨å®¹é‡ï¼Œå¹¶ä¸”äº‹åŠ¡ä¹‹é—´çš„äº‰ç”¨ä¸æ˜¯å¤ªé«˜ï¼Œä¹è§‚çš„å¹¶å‘æ§åˆ¶æŠ€æœ¯å¾€å¾€æ¯”æ‚²è§‚çš„è¦å¥½ã€‚å¯äº¤æ¢çš„åŸå­æ“ä½œå¯ä»¥å‡å°‘äº‰ç”¨ï¼šä¾‹å¦‚ï¼Œå¦‚æœå¤šä¸ªäº‹åŠ¡åŒæ—¶è¦å¢åŠ ä¸€ä¸ªè®¡æ•°å™¨ï¼Œé‚£ä¹ˆåº”ç”¨å¢é‡çš„é¡ºåºï¼ˆåªè¦è®¡æ•°å™¨ä¸åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­è¯»å–ï¼‰å°±æ— å…³ç´§è¦äº†ï¼Œæ‰€ä»¥å¹¶å‘å¢é‡å¯ä»¥å…¨éƒ¨åº”ç”¨ä¸”æ— éœ€å†²çªã€‚</p><p>é¡¾åæ€ä¹‰ï¼ŒSSIåŸºäºå¿«ç…§éš”ç¦»â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹åŠ¡ä¸­çš„æ‰€æœ‰è¯»å–éƒ½æ˜¯æ¥è‡ªæ•°æ®åº“çš„ä¸€è‡´æ€§å¿«ç…§ï¼ˆè¯·å‚é˜…â€œ<a href="#%E5%BF%AB%E7%85%A7%E9%9A%94%E7%A6%BB%E5%92%8C%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB">å¿«ç…§éš”ç¦»å’Œå¯é‡å¤è¯»å–</a>â€ï¼‰ã€‚ä¸æ—©æœŸçš„ä¹è§‚å¹¶å‘æ§åˆ¶æŠ€æœ¯ç›¸æ¯”è¿™æ˜¯ä¸»è¦çš„åŒºåˆ«ã€‚åœ¨å¿«ç…§éš”ç¦»çš„åŸºç¡€ä¸Šï¼ŒSSIæ·»åŠ äº†ä¸€ç§ç®—æ³•æ¥æ£€æµ‹å†™å…¥ä¹‹é—´çš„ä¸²è¡ŒåŒ–å†²çªï¼Œå¹¶ç¡®å®šè¦ä¸­æ­¢å“ªäº›äº‹åŠ¡ã€‚</p><h4 id="åŸºäºè¿‡æ—¶å‰æçš„å†³ç­–" tabindex="-1"><a class="header-anchor" href="#åŸºäºè¿‡æ—¶å‰æçš„å†³ç­–" aria-hidden="true">#</a> åŸºäºè¿‡æ—¶å‰æçš„å†³ç­–</h4><p>å…ˆå‰è®¨è®ºäº†å¿«ç…§éš”ç¦»ä¸­çš„å†™å…¥åå·®ï¼ˆè¯·å‚é˜…â€œ<a href="#%E5%86%99%E5%85%A5%E5%81%8F%E6%96%9C%E4%B8%8E%E5%B9%BB%E8%AF%BB">å†™å…¥åæ–œä¸å¹»è¯»</a>â€ï¼‰æ—¶ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ä¸€ä¸ªå¾ªç¯æ¨¡å¼ï¼šäº‹åŠ¡ä»æ•°æ®åº“è¯»å–ä¸€äº›æ•°æ®ï¼Œæ£€æŸ¥æŸ¥è¯¢çš„ç»“æœï¼Œå¹¶æ ¹æ®å®ƒçœ‹åˆ°çš„ç»“æœå†³å®šé‡‡å–ä¸€äº›æ“ä½œï¼ˆå†™å…¥æ•°æ®åº“ï¼‰ã€‚ä½†æ˜¯ï¼Œåœ¨å¿«ç…§éš”ç¦»çš„æƒ…å†µä¸‹ï¼ŒåŸå§‹æŸ¥è¯¢çš„ç»“æœåœ¨äº‹åŠ¡æäº¤æ—¶å¯èƒ½ä¸å†æ˜¯æœ€æ–°çš„ï¼Œå› ä¸ºæ•°æ®å¯èƒ½åœ¨åŒä¸€æ—¶é—´è¢«ä¿®æ”¹ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œäº‹åŠ¡åŸºäºä¸€ä¸ª<strong>å‰æï¼ˆpremiseï¼‰</strong> é‡‡å–è¡ŒåŠ¨ï¼ˆäº‹åŠ¡å¼€å§‹æ—¶å€™çš„äº‹å®ï¼Œä¾‹å¦‚ï¼šâ€œç›®å‰æœ‰ä¸¤ååŒ»ç”Ÿæ­£åœ¨å€¼ç­â€ï¼‰ã€‚ä¹‹åå½“äº‹åŠ¡è¦æäº¤æ—¶ï¼ŒåŸå§‹æ•°æ®å¯èƒ½å·²ç»æ”¹å˜â€”â€”å‰æå¯èƒ½ä¸å†æˆç«‹ã€‚</p><p>å½“åº”ç”¨ç¨‹åºè¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ˆä¾‹å¦‚ï¼Œâ€œå½“å‰æœ‰å¤šå°‘åŒ»ç”Ÿæ­£åœ¨å€¼ç­ï¼Ÿâ€ï¼‰ï¼Œæ•°æ®åº“ä¸çŸ¥é“åº”ç”¨é€»è¾‘å¦‚ä½•ä½¿ç”¨è¯¥æŸ¥è¯¢ç»“æœã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºäº†å®‰å…¨ï¼Œæ•°æ®åº“éœ€è¦å‡è®¾ä»»ä½•å¯¹è¯¥ç»“æœé›†çš„å˜æ›´éƒ½å¯èƒ½ä¼šä½¿è¯¥äº‹åŠ¡ä¸­çš„å†™å…¥å˜å¾—æ— æ•ˆã€‚ æ¢è€Œè¨€ä¹‹ï¼Œäº‹åŠ¡ä¸­çš„æŸ¥è¯¢ä¸å†™å…¥å¯èƒ½å­˜åœ¨å› æœä¾èµ–ã€‚ä¸ºäº†æä¾›å¯ä¸²è¡ŒåŒ–çš„éš”ç¦»çº§åˆ«ï¼Œå¦‚æœäº‹åŠ¡åœ¨è¿‡æ—¶çš„å‰æä¸‹æ‰§è¡Œæ“ä½œï¼Œæ•°æ®åº“å¿…é¡»èƒ½æ£€æµ‹åˆ°è¿™ç§æƒ…å†µï¼Œå¹¶ä¸­æ­¢äº‹åŠ¡ã€‚</p><p>æ•°æ®åº“å¦‚ä½•çŸ¥é“æŸ¥è¯¢ç»“æœæ˜¯å¦å¯èƒ½å·²ç»æ”¹å˜ï¼Ÿæœ‰ä¸¤ç§æƒ…å†µéœ€è¦è€ƒè™‘ï¼š</p><ul><li>æ£€æµ‹å¯¹æ—§MVCCå¯¹è±¡ç‰ˆæœ¬çš„è¯»å–ï¼ˆè¯»ä¹‹å‰å­˜åœ¨æœªæäº¤çš„å†™å…¥ï¼‰</li><li>æ£€æµ‹å½±å“å…ˆå‰è¯»å–çš„å†™å…¥ï¼ˆè¯»ä¹‹åå‘ç”Ÿå†™å…¥ï¼‰</li></ul><h4 id="æ£€æµ‹æ—§mvccè¯»å–" tabindex="-1"><a class="header-anchor" href="#æ£€æµ‹æ—§mvccè¯»å–" aria-hidden="true">#</a> æ£€æµ‹æ—§MVCCè¯»å–</h4><p>å›æƒ³ä¸€ä¸‹ï¼Œå¿«ç…§éš”ç¦»é€šå¸¸æ˜¯é€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼›è§<a href="./img/fig7-10.png">å›¾7-10</a>ï¼‰æ¥å®ç°çš„ã€‚å½“ä¸€ä¸ªäº‹åŠ¡ä»MVCCæ•°æ®åº“ä¸­çš„ä¸€è‡´å¿«ç…§è¯»æ—¶ï¼Œå®ƒå°†å¿½ç•¥å–å¿«ç…§æ—¶å°šæœªæäº¤çš„ä»»ä½•å…¶ä»–äº‹åŠ¡æ‰€åšçš„å†™å…¥ã€‚åœ¨<a href="./img/fig7-10.png">å›¾7-10</a>ä¸­ï¼Œäº‹åŠ¡43 è®¤ä¸ºAliceçš„ <code>on_call = true</code> ï¼Œå› ä¸ºäº‹åŠ¡42ï¼ˆä¿®æ”¹Aliceçš„å¾…å‘½çŠ¶æ€ï¼‰æœªè¢«æäº¤ã€‚ç„¶è€Œï¼Œåœ¨äº‹åŠ¡43æƒ³è¦æäº¤æ—¶ï¼Œäº‹åŠ¡42 å·²ç»æäº¤ã€‚è¿™æ„å‘³ç€åœ¨è¯»ä¸€è‡´æ€§å¿«ç…§æ—¶è¢«å¿½ç•¥çš„å†™å…¥å·²ç»ç”Ÿæ•ˆï¼Œäº‹åŠ¡43 çš„å‰æä¸å†ä¸ºçœŸã€‚</p><figure><img src="/assets/fig7-10-afeIOBTO.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-10 æ£€æµ‹äº‹åŠ¡ä½•æ—¶ä»MVCCå¿«ç…§è¯»å–è¿‡æ—¶çš„å€¼</strong></p><p>ä¸ºäº†é˜²æ­¢è¿™ç§å¼‚å¸¸ï¼Œæ•°æ®åº“éœ€è¦è·Ÿè¸ªä¸€ä¸ªäº‹åŠ¡ç”±äºMVCCå¯è§æ€§è§„åˆ™è€Œå¿½ç•¥å¦ä¸€ä¸ªäº‹åŠ¡çš„å†™å…¥ã€‚å½“äº‹åŠ¡æƒ³è¦æäº¤æ—¶ï¼Œæ•°æ®åº“æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•è¢«å¿½ç•¥çš„å†™å…¥ç°åœ¨å·²ç»è¢«æäº¤ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œäº‹åŠ¡å¿…é¡»ä¸­æ­¢ã€‚</p><p>ä¸ºä»€ä¹ˆè¦ç­‰åˆ°æäº¤ï¼Ÿå½“æ£€æµ‹åˆ°é™ˆæ—§çš„è¯»å–æ—¶ï¼Œä¸ºä»€ä¹ˆä¸ç«‹å³ä¸­æ­¢äº‹åŠ¡43 ï¼Ÿå› ä¸ºå¦‚æœäº‹åŠ¡43 æ˜¯åªè¯»äº‹åŠ¡ï¼Œåˆ™ä¸éœ€è¦ä¸­æ­¢ï¼Œå› ä¸ºæ²¡æœ‰å†™å…¥åå·®çš„é£é™©ã€‚å½“äº‹åŠ¡43 è¿›è¡Œè¯»å–æ—¶ï¼Œæ•°æ®åº“è¿˜ä¸çŸ¥é“äº‹åŠ¡æ˜¯å¦è¦ç¨åæ‰§è¡Œå†™æ“ä½œã€‚æ­¤å¤–ï¼Œäº‹åŠ¡42 å¯èƒ½åœ¨äº‹åŠ¡43 è¢«æäº¤çš„æ—¶å€™ä¸­æ­¢æˆ–è€…å¯èƒ½ä»ç„¶æœªè¢«æäº¤ï¼Œå› æ­¤è¯»å–å¯èƒ½ç»ˆç©¶ä¸æ˜¯é™ˆæ—§çš„ã€‚é€šè¿‡é¿å…ä¸å¿…è¦çš„ä¸­æ­¢ï¼ŒSSI ä¿ç•™äº†å¿«ç…§éš”ç¦»ä»ä¸€è‡´å¿«ç…§ä¸­é•¿æ—¶é—´è¯»å–çš„èƒ½åŠ›ã€‚</p><h4 id="æ£€æµ‹å½±å“ä¹‹å‰è¯»å–çš„å†™å…¥" tabindex="-1"><a class="header-anchor" href="#æ£€æµ‹å½±å“ä¹‹å‰è¯»å–çš„å†™å…¥" aria-hidden="true">#</a> æ£€æµ‹å½±å“ä¹‹å‰è¯»å–çš„å†™å…¥</h4><p>ç¬¬äºŒç§æƒ…å†µè¦è€ƒè™‘çš„æ˜¯å¦ä¸€ä¸ªäº‹åŠ¡åœ¨è¯»å–æ•°æ®ä¹‹åä¿®æ”¹æ•°æ®ã€‚è¿™ç§æƒ…å†µå¦‚<a href="./img/fig7-11.png">å›¾7-11</a>æ‰€ç¤ºã€‚</p><figure><img src="/assets/fig7-11-xb0t4lW5.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><strong>å›¾7-11 åœ¨å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»ä¸­ï¼Œæ£€æµ‹ä¸€ä¸ªäº‹åŠ¡ä½•æ—¶ä¿®æ”¹å¦ä¸€ä¸ªäº‹åŠ¡çš„è¯»å–ã€‚</strong></p><p>åœ¨ä¸¤é˜¶æ®µé”å®šçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†ç´¢å¼•èŒƒå›´é”ï¼ˆè¯·å‚é˜…â€œ<a href="#%E7%B4%A2%E5%BC%95%E8%8C%83%E5%9B%B4%E9%94%81">ç´¢å¼•èŒƒå›´é”</a>â€ï¼‰ï¼Œå®ƒå…è®¸æ•°æ®åº“é”å®šä¸æŸä¸ªæœç´¢æŸ¥è¯¢åŒ¹é…çš„æ‰€æœ‰è¡Œçš„è®¿é—®æƒï¼Œä¾‹å¦‚ <code>WHERE shift_id = 1234</code>ã€‚å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ç±»ä¼¼çš„æŠ€æœ¯ï¼Œé™¤äº†SSIé”ä¸ä¼šé˜»å¡å…¶ä»–äº‹åŠ¡ã€‚</p><p>åœ¨<a href="./img/fig7-11.png">å›¾7-11</a>ä¸­ï¼Œäº‹åŠ¡42 å’Œ43 éƒ½åœ¨ç­æ¬¡1234 æŸ¥æ‰¾å€¼ç­åŒ»ç”Ÿã€‚å¦‚æœåœ¨<code>shift_id</code>ä¸Šæœ‰ç´¢å¼•ï¼Œåˆ™æ•°æ®åº“å¯ä»¥ä½¿ç”¨ç´¢å¼•é¡¹1234 æ¥è®°å½•äº‹åŠ¡42 å’Œ43 è¯»å–è¿™ä¸ªæ•°æ®çš„äº‹å®ã€‚ ï¼ˆå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œè¿™ä¸ªä¿¡æ¯å¯ä»¥åœ¨è¡¨çº§åˆ«è¿›è¡Œè·Ÿè¸ªï¼‰ã€‚è¿™ä¸ªä¿¡æ¯åªéœ€è¦ä¿ç•™ä¸€æ®µæ—¶é—´ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å®Œæˆï¼ˆæäº¤æˆ–ä¸­æ­¢ï¼‰ï¼Œå¹¶ä¸”æ‰€æœ‰çš„å¹¶å‘äº‹åŠ¡å®Œæˆä¹‹åï¼Œæ•°æ®åº“å°±å¯ä»¥å¿˜è®°å®ƒè¯»å–çš„æ•°æ®äº†ã€‚</p><p>å½“äº‹åŠ¡å†™å…¥æ•°æ®åº“æ—¶ï¼Œå®ƒå¿…é¡»åœ¨ç´¢å¼•ä¸­æŸ¥æ‰¾æœ€è¿‘æ›¾è¯»å–å—å½±å“æ•°æ®çš„å…¶ä»–äº‹åŠ¡ã€‚è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºåœ¨å—å½±å“çš„é”®èŒƒå›´ä¸Šè·å–å†™é”ï¼Œä½†é”å¹¶ä¸ä¼šé˜»å¡äº‹åŠ¡æŒ‡å¯¼å…¶ä»–è¯»äº‹åŠ¡å®Œæˆï¼Œè€Œæ˜¯åƒè­¦æˆ’çº¿ä¸€æ ·åªæ˜¯ç®€å•é€šçŸ¥å…¶ä»–äº‹åŠ¡ï¼šä½ ä»¬è¯»è¿‡çš„æ•°æ®å¯èƒ½ä¸æ˜¯æœ€æ–°çš„å•¦ã€‚</p><p>åœ¨<a href="./img/fig7-11.png">å›¾7-11</a>ä¸­ï¼Œäº‹åŠ¡43 é€šçŸ¥äº‹åŠ¡42 å…¶å…ˆå‰è¯»å·²è¿‡æ—¶ï¼Œåä¹‹äº¦ç„¶ã€‚äº‹åŠ¡42é¦–å…ˆæäº¤å¹¶æˆåŠŸï¼Œå°½ç®¡äº‹åŠ¡43 çš„å†™å½±å“äº†42 ï¼Œä½†å› ä¸ºäº‹åŠ¡43 å°šæœªæäº¤ï¼Œæ‰€ä»¥å†™å…¥å°šæœªç”Ÿæ•ˆã€‚ç„¶è€Œå½“äº‹åŠ¡43 æƒ³è¦æäº¤æ—¶ï¼Œæ¥è‡ªäº‹åŠ¡42 çš„å†²çªå†™å…¥å·²ç»è¢«æäº¤ï¼Œæ‰€ä»¥äº‹åŠ¡43 å¿…é¡»ä¸­æ­¢ã€‚</p><h4 id="å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»çš„æ€§èƒ½" tabindex="-1"><a class="header-anchor" href="#å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»çš„æ€§èƒ½" aria-hidden="true">#</a> å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»çš„æ€§èƒ½</h4><p>ä¸å¾€å¸¸ä¸€æ ·ï¼Œè®¸å¤šå·¥ç¨‹ç»†èŠ‚ä¼šå½±å“ç®—æ³•çš„å®é™…è¡¨ç°ã€‚ä¾‹å¦‚ä¸€ä¸ªæƒè¡¡æ˜¯è·Ÿè¸ªäº‹åŠ¡çš„è¯»å–å’Œå†™å…¥çš„<strong>ç²’åº¦ï¼ˆgranularityï¼‰</strong>ã€‚å¦‚æœæ•°æ®åº“è¯¦ç»†åœ°è·Ÿè¸ªæ¯ä¸ªäº‹åŠ¡çš„æ´»åŠ¨ï¼ˆç»†ç²’åº¦ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥å‡†ç¡®åœ°ç¡®å®šå“ªäº›äº‹åŠ¡éœ€è¦ä¸­æ­¢ï¼Œä½†æ˜¯ç°¿è®°å¼€é”€å¯èƒ½å˜å¾—å¾ˆæ˜¾è‘—ã€‚ç®€ç•¥çš„è·Ÿè¸ªé€Ÿåº¦æ›´å¿«ï¼ˆç²—ç²’åº¦ï¼‰ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´æ›´å¤šä¸å¿…è¦çš„äº‹åŠ¡ä¸­æ­¢ã€‚</p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œäº‹åŠ¡å¯ä»¥è¯»å–è¢«å¦ä¸€ä¸ªäº‹åŠ¡è¦†ç›–çš„ä¿¡æ¯ï¼šè¿™å–å†³äºå‘ç”Ÿäº†ä»€ä¹ˆï¼Œæœ‰æ—¶å¯ä»¥è¯æ˜æ‰§è¡Œç»“æœæ— è®ºå¦‚ä½•éƒ½æ˜¯å¯ä¸²è¡ŒåŒ–çš„ã€‚ PostgreSQLä½¿ç”¨è¿™ä¸ªç†è®ºæ¥å‡å°‘ä¸å¿…è¦çš„ä¸­æ­¢æ¬¡æ•°ã€11,41ã€‘ã€‚</p><p>ä¸ä¸¤é˜¶æ®µé”å®šç›¸æ¯”ï¼Œå¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»çš„æœ€å¤§ä¼˜ç‚¹æ˜¯ä¸€ä¸ªäº‹åŠ¡ä¸éœ€è¦é˜»å¡ç­‰å¾…å¦ä¸€ä¸ªäº‹åŠ¡æ‰€æŒæœ‰çš„é”ã€‚å°±åƒåœ¨å¿«ç…§éš”ç¦»ä¸‹ä¸€æ ·ï¼Œå†™ä¸ä¼šé˜»å¡è¯»ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ç§è®¾è®¡åŸåˆ™ä½¿å¾—æŸ¥è¯¢å»¶è¿Ÿæ›´å¯é¢„æµ‹ï¼Œå˜é‡æ›´å°‘ã€‚ç‰¹åˆ«æ˜¯ï¼Œåªè¯»æŸ¥è¯¢å¯ä»¥è¿è¡Œåœ¨ä¸€è‡´å¿«ç…§ä¸Šï¼Œè€Œä¸éœ€è¦ä»»ä½•é”å®šï¼Œè¿™å¯¹äºè¯»å–ç¹é‡çš„å·¥ä½œè´Ÿè½½éå¸¸æœ‰å¸å¼•åŠ›ã€‚</p><p>ä¸ä¸²è¡Œæ‰§è¡Œç›¸æ¯”ï¼Œå¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»å¹¶ä¸å±€é™äºå•ä¸ªCPUæ ¸çš„ååé‡ï¼šFoundationDBå°†æ£€æµ‹åˆ°çš„ä¸²è¡ŒåŒ–å†²çªåˆ†å¸ƒåœ¨å¤šå°æœºå™¨ä¸Šï¼Œå…è®¸æ‰©å±•åˆ°å¾ˆé«˜çš„ååé‡ã€‚å³ä½¿æ•°æ®å¯èƒ½è·¨å¤šå°æœºå™¨è¿›è¡Œåˆ†åŒºï¼Œäº‹åŠ¡ä¹Ÿå¯ä»¥åœ¨ä¿è¯å¯ä¸²è¡ŒåŒ–éš”ç¦»ç­‰çº§çš„åŒæ—¶è¯»å†™å¤šä¸ªåˆ†åŒºä¸­çš„æ•°æ®ã€54ã€‘ã€‚</p><p>ä¸­æ­¢ç‡æ˜¾è‘—å½±å“SSIçš„æ•´ä½“è¡¨ç°ã€‚ä¾‹å¦‚ï¼Œé•¿æ—¶é—´è¯»å–å’Œå†™å…¥æ•°æ®çš„äº‹åŠ¡å¾ˆå¯èƒ½ä¼šå‘ç”Ÿå†²çªå¹¶ä¸­æ­¢ï¼Œå› æ­¤SSIè¦æ±‚åŒæ—¶è¯»å†™çš„äº‹åŠ¡å°½é‡çŸ­ï¼ˆåªè¯»çš„é•¿äº‹åŠ¡å¯èƒ½æ²¡é—®é¢˜ï¼‰ã€‚å¯¹äºæ…¢äº‹åŠ¡ï¼ŒSSIå¯èƒ½æ¯”ä¸¤é˜¶æ®µé”å®šæˆ–ä¸²è¡Œæ‰§è¡Œæ›´ä¸æ•æ„Ÿã€‚</p><h2 id="æœ¬ç« å°ç»“" tabindex="-1"><a class="header-anchor" href="#æœ¬ç« å°ç»“" aria-hidden="true">#</a> æœ¬ç« å°ç»“</h2><p>äº‹åŠ¡æ˜¯ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå…è®¸åº”ç”¨ç¨‹åºå‡è£…æŸäº›å¹¶å‘é—®é¢˜å’ŒæŸäº›ç±»å‹çš„ç¡¬ä»¶å’Œè½¯ä»¶æ•…éšœä¸å­˜åœ¨ã€‚å„å¼å„æ ·çš„é”™è¯¯è¢«ç®€åŒ–ä¸ºä¸€ç§ç®€å•æƒ…å†µï¼š<strong>äº‹åŠ¡ä¸­æ­¢ï¼ˆtransaction abortï¼‰</strong>ï¼Œè€Œåº”ç”¨éœ€è¦çš„ä»…ä»…æ˜¯é‡è¯•ã€‚</p><p>åœ¨æœ¬ç« ä¸­ä»‹ç»äº†å¾ˆå¤šé—®é¢˜ï¼Œäº‹åŠ¡æœ‰åŠ©äºé˜²æ­¢è¿™äº›é—®é¢˜å‘ç”Ÿã€‚å¹¶éæ‰€æœ‰åº”ç”¨éƒ½æ˜“å—æ­¤ç±»é—®é¢˜å½±å“ï¼šå…·æœ‰éå¸¸ç®€å•è®¿é—®æ¨¡å¼çš„åº”ç”¨ï¼ˆä¾‹å¦‚æ¯æ¬¡è¯»å†™å•æ¡è®°å½•ï¼‰å¯èƒ½æ— éœ€äº‹åŠ¡ç®¡ç†ã€‚ä½†æ˜¯å¯¹äºæ›´å¤æ‚çš„è®¿é—®æ¨¡å¼ï¼Œäº‹åŠ¡å¯ä»¥å¤§å¤§å‡å°‘éœ€è¦è€ƒè™‘çš„æ½œåœ¨é”™è¯¯æƒ…æ™¯æ•°é‡ã€‚</p><p>å¦‚æœæ²¡æœ‰äº‹åŠ¡å¤„ç†ï¼Œå„ç§é”™è¯¯æƒ…å†µï¼ˆè¿›ç¨‹å´©æºƒï¼Œç½‘ç»œä¸­æ–­ï¼Œåœç”µï¼Œç£ç›˜å·²æ»¡ï¼Œæ„å¤–å¹¶å‘ç­‰ï¼‰æ„å‘³ç€æ•°æ®å¯èƒ½ä»¥å„ç§æ–¹å¼å˜å¾—ä¸ä¸€è‡´ã€‚ä¾‹å¦‚ï¼Œéè§„èŒƒåŒ–çš„æ•°æ®å¯èƒ½å¾ˆå®¹æ˜“ä¸æºæ•°æ®ä¸åŒæ­¥ã€‚å¦‚æœæ²¡æœ‰äº‹åŠ¡å¤„ç†ï¼Œå°±å¾ˆéš¾æ¨æ–­å¤æ‚çš„äº¤äº’è®¿é—®å¯èƒ½å¯¹æ•°æ®åº“é€ æˆçš„å½±å“ã€‚</p><p>æœ¬ç« æ·±å…¥è®¨è®ºäº†<strong>å¹¶å‘æ§åˆ¶</strong>çš„è¯é¢˜ã€‚æˆ‘ä»¬è®¨è®ºäº†å‡ ä¸ªå¹¿æ³›ä½¿ç”¨çš„éš”ç¦»çº§åˆ«ï¼Œç‰¹åˆ«æ˜¯<strong>è¯»å·²æäº¤</strong>ï¼Œ<strong>å¿«ç…§éš”ç¦»</strong>ï¼ˆæœ‰æ—¶ç§°ä¸ºå¯é‡å¤è¯»ï¼‰å’Œ<strong>å¯ä¸²è¡ŒåŒ–</strong>ã€‚å¹¶é€šè¿‡ç ”ç©¶ç«äº‰æ¡ä»¶çš„å„ç§ä¾‹å­ï¼Œæ¥æè¿°è¿™äº›éš”ç¦»ç­‰çº§ï¼š</p><p><em><strong>è„è¯»</strong></em></p><p>â€‹ ä¸€ä¸ªå®¢æˆ·ç«¯è¯»å–åˆ°å¦ä¸€ä¸ªå®¢æˆ·ç«¯å°šæœªæäº¤çš„å†™å…¥ã€‚<strong>è¯»å·²æäº¤</strong>æˆ–æ›´å¼ºçš„éš”ç¦»çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€‚</p><p><em><strong>è„å†™</strong></em></p><p>â€‹ ä¸€ä¸ªå®¢æˆ·ç«¯è¦†ç›–å†™å…¥äº†å¦ä¸€ä¸ªå®¢æˆ·ç«¯å°šæœªæäº¤çš„å†™å…¥ã€‚å‡ ä¹æ‰€æœ‰çš„äº‹åŠ¡å®ç°éƒ½å¯ä»¥é˜²æ­¢è„å†™ã€‚</p><p><em><strong>è¯»å–åå·®ï¼ˆä¸å¯é‡å¤è¯»ï¼‰</strong></em></p><p>â€‹ åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå®¢æˆ·ç«¯åœ¨ä¸åŒçš„æ—¶é—´ç‚¹ä¼šçœ‹è§æ•°æ®åº“çš„ä¸åŒçŠ¶æ€ã€‚<strong>å¿«ç…§éš”ç¦»</strong>ç»å¸¸ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå…è®¸äº‹åŠ¡ä»ä¸€ä¸ªç‰¹å®šæ—¶é—´ç‚¹çš„ä¸€è‡´æ€§å¿«ç…§ä¸­è¯»å–æ•°æ®ã€‚å¿«ç…§éš”ç¦»é€šå¸¸ä½¿ç”¨<strong>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰</strong> æ¥å®ç°ã€‚</p><p><em><strong>æ›´æ–°ä¸¢å¤±</strong></em></p><p>â€‹ ä¸¤ä¸ªå®¢æˆ·ç«¯åŒæ—¶æ‰§è¡Œ<strong>è¯»å–-ä¿®æ”¹-å†™å…¥åºåˆ—</strong>ã€‚å…¶ä¸­ä¸€ä¸ªå†™æ“ä½œï¼Œåœ¨æ²¡æœ‰åˆå¹¶å¦ä¸€ä¸ªå†™å…¥å˜æ›´æƒ…å†µä¸‹ï¼Œç›´æ¥è¦†ç›–äº†å¦ä¸€ä¸ªå†™æ“ä½œçš„ç»“æœã€‚æ‰€ä»¥å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚å¿«ç…§éš”ç¦»çš„ä¸€äº›å®ç°å¯ä»¥è‡ªåŠ¨é˜²æ­¢è¿™ç§å¼‚å¸¸ï¼Œè€Œå¦ä¸€äº›å®ç°åˆ™éœ€è¦æ‰‹åŠ¨é”å®šï¼ˆ<code>SELECT FOR UPDATE</code>ï¼‰ã€‚</p><p><em><strong>å†™åå·®</strong></em></p><p>â€‹ ä¸€ä¸ªäº‹åŠ¡è¯»å–ä¸€äº›ä¸œè¥¿ï¼Œæ ¹æ®å®ƒæ‰€çœ‹åˆ°çš„å€¼ä½œå‡ºå†³å®šï¼Œå¹¶å°†è¯¥å†³å®šå†™å…¥æ•°æ®åº“ã€‚ä½†æ˜¯ï¼Œå†™å…¥æ—¶ï¼Œè¯¥å†³å®šçš„å‰æä¸å†æ˜¯çœŸå®çš„ã€‚åªæœ‰å¯ä¸²è¡ŒåŒ–çš„éš”ç¦»æ‰èƒ½é˜²æ­¢è¿™ç§å¼‚å¸¸ã€‚</p><p><em><strong>å¹»è¯»</strong></em></p><p>â€‹ äº‹åŠ¡è¯»å–ç¬¦åˆæŸäº›æœç´¢æ¡ä»¶çš„å¯¹è±¡ã€‚å¦ä¸€ä¸ªå®¢æˆ·ç«¯è¿›è¡Œå†™å…¥ï¼Œå½±å“æœç´¢ç»“æœã€‚å¿«ç…§éš”ç¦»å¯ä»¥é˜²æ­¢ç›´æ¥çš„å¹»åƒè¯»å–ï¼Œä½†æ˜¯å†™å…¥åå·®ä¸Šä¸‹æ–‡ä¸­çš„å¹»è¯»éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œä¾‹å¦‚ç´¢å¼•èŒƒå›´é”å®šã€‚</p><p>å¼±éš”ç¦»çº§åˆ«å¯ä»¥é˜²æ­¢å…¶ä¸­ä¸€äº›å¼‚å¸¸æƒ…å†µï¼Œä½†è¦æ±‚ä½ ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜æ‰‹åŠ¨å¤„ç†å‰©ä½™é‚£äº›ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨æ˜¾å¼é”å®šï¼‰ã€‚åªæœ‰å¯ä¸²è¡ŒåŒ–çš„éš”ç¦»æ‰èƒ½é˜²èŒƒæ‰€æœ‰è¿™äº›é—®é¢˜ã€‚æˆ‘ä»¬è®¨è®ºäº†å®ç°å¯ä¸²è¡ŒåŒ–äº‹åŠ¡çš„ä¸‰ç§ä¸åŒæ–¹æ³•ï¼š</p><p><em><strong>å­—é¢æ„ä¹‰ä¸Šçš„ä¸²è¡Œæ‰§è¡Œ</strong></em></p><p>â€‹ å¦‚æœæ¯ä¸ªäº‹åŠ¡çš„æ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œå¹¶ä¸”äº‹åŠ¡ååé‡è¶³å¤Ÿä½ï¼Œè¶³ä»¥åœ¨å•ä¸ªCPUæ ¸ä¸Šå¤„ç†ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„é€‰æ‹©ã€‚</p><p><em><strong>ä¸¤é˜¶æ®µé”å®š</strong></em></p><p>â€‹ æ•°åå¹´æ¥ï¼Œä¸¤é˜¶æ®µé”å®šä¸€ç›´æ˜¯å®ç°å¯ä¸²è¡ŒåŒ–çš„æ ‡å‡†æ–¹å¼ï¼Œä½†æ˜¯è®¸å¤šåº”ç”¨å‡ºäºæ€§èƒ½é—®é¢˜çš„è€ƒè™‘é¿å…ä½¿ç”¨å®ƒã€‚</p><p><em><strong>å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»ï¼ˆSSIï¼‰</strong></em></p><p>â€‹ ä¸€ä¸ªç›¸å½“æ–°çš„ç®—æ³•ï¼Œé¿å…äº†å…ˆå‰æ–¹æ³•çš„å¤§éƒ¨åˆ†ç¼ºç‚¹ã€‚å®ƒä½¿ç”¨ä¹è§‚çš„æ–¹æ³•ï¼Œå…è®¸äº‹åŠ¡æ‰§è¡Œè€Œæ— éœ€é˜»å¡ã€‚å½“ä¸€ä¸ªäº‹åŠ¡æƒ³è¦æäº¤æ—¶ï¼Œå®ƒä¼šè¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœæ‰§è¡Œä¸å¯ä¸²è¡ŒåŒ–ï¼Œäº‹åŠ¡å°±ä¼šè¢«ä¸­æ­¢ã€‚</p><p>â€‹ æœ¬ç« ä¸­çš„ç¤ºä¾‹ä¸»è¦æ˜¯åœ¨å…³ç³»æ•°æ®æ¨¡å‹çš„ä¸Šä¸‹æ–‡ä¸­ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚åœ¨è®¨è®ºä¸­ï¼Œæ— è®ºä½¿ç”¨å“ªç§æ•°æ®æ¨¡å‹ï¼Œå¦‚â€œ<strong><a href="#%E5%A4%9A%E5%AF%B9%E8%B1%A1%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9C%80%E6%B1%82">å¤šå¯¹è±¡äº‹åŠ¡çš„éœ€æ±‚</a></strong>â€ä¸­æ‰€è®¨è®ºçš„ï¼Œäº‹åŠ¡éƒ½æ˜¯æœ‰ä»·å€¼çš„æ•°æ®åº“åŠŸèƒ½ã€‚</p><p>â€‹ æœ¬ç« ä¸»è¦æ˜¯åœ¨å•æœºæ•°æ®åº“çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæ¢è®¨äº†å„ç§æƒ³æ³•å’Œç®—æ³•ã€‚åˆ†å¸ƒå¼æ•°æ®åº“ä¸­çš„äº‹åŠ¡ï¼Œåˆ™å¼•å…¥äº†ä¸€ç³»åˆ—æ–°çš„å›°éš¾æŒ‘æˆ˜ï¼Œæˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„ä¸¤ç« ä¸­è®¨è®ºã€‚</p><h2 id="å‚è€ƒæ–‡çŒ®" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒæ–‡çŒ®" aria-hidden="true">#</a> å‚è€ƒæ–‡çŒ®</h2><ol><li>Donald D. Chamberlin, Morton M. Astrahan, Michael W. Blasgen, et al.: â€œ<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.84.348&amp;rep=rep1&amp;type=pdf" target="_blank" rel="noopener noreferrer">A History and Evaluation of System R<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>Communications of the ACM</em>, volume 24, number 10, pages 632â€“646, October 1981. <a href="http://dx.doi.org/10.1145/358769.358784" target="_blank" rel="noopener noreferrer">doi:10.1145/358769.358784<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Jim N. Gray, Raymond A. Lorie, Gianfranco R. Putzolu, and Irving L. Traiger: â€œ<a href="http://citeseer.ist.psu.edu/viewdoc/download?doi=10.1.1.92.8248&amp;rep=rep1&amp;type=pdf" target="_blank" rel="noopener noreferrer">Granularity of Locks and Degrees of Consistency in a Shared Data Base<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ in <em>Modelling in Data Base Management Systems: Proceedings of the IFIP Working Conference on Modelling in Data Base Management Systems</em>, edited by G. M. Nijssen, pages 364â€“394, Elsevier/North Holland Publishing, 1976. Also in <em>Readings in Database Systems</em>, 4th edition, edited by Joseph M. Hellerstein and Michael Stonebraker, MIT Press, 2005. ISBN: 978-0-262-69314-1</li><li>Kapali P. Eswaran, Jim N. Gray, Raymond A. Lorie, and Irving L. Traiger: â€œ<a href="http://research.microsoft.com/en-us/um/people/gray/papers/On%20the%20Notions%20of%20Consistency%20and%20Predicate%20Locks%20in%20a%20Database%20System%20CACM.pdf" target="_blank" rel="noopener noreferrer">The Notions of Consistency and Predicate Locks in a Database System<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>Communications of the ACM</em>, volume 19, number 11, pages 624â€“633, November 1976.</li><li>â€œ<a href="http://web.archive.org/web/20150320053809/https://foundationdb.com/acid-claims" target="_blank" rel="noopener noreferrer">ACID Transactions Are Incredibly Helpful<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ FoundationDB, LLC, 2013.</li><li>John D. Cook: â€œ<a href="http://www.johndcook.com/blog/2009/07/06/brewer-cap-theorem-base/" target="_blank" rel="noopener noreferrer">ACID Versus BASE for Database Transactions<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>johndcook.com</em>, July 6, 2009.</li><li>Gavin Clarke: â€œ<a href="http://www.theregister.co.uk/2012/11/22/foundationdb_fear_of_cap_theorem/" target="_blank" rel="noopener noreferrer">NoSQL&#39;s CAP Theorem Busters: We Don&#39;t Drop ACID<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>theregister.co.uk</em>, November 22, 2012.</li><li>Theo HÃ¤rder and Andreas Reuter: â€œ<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.87.2812&amp;rep=rep1&amp;type=pdf" target="_blank" rel="noopener noreferrer">Principles of Transaction-Oriented Database Recovery<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>ACM Computing Surveys</em>, volume 15, number 4, pages 287â€“317, December 1983. <a href="http://dx.doi.org/10.1145/289.291" target="_blank" rel="noopener noreferrer">doi:10.1145/289.291<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Peter Bailis, Alan Fekete, Ali Ghodsi, et al.: â€œ<a href="http://www.bailis.org/papers/hat-hotos2013.pdf" target="_blank" rel="noopener noreferrer">HAT, not CAP: Towards Highly Available Transactions<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>14th USENIX Workshop on Hot Topics in Operating Systems</em> (HotOS), May 2013.</li><li>Armando Fox, Steven D. Gribble, Yatin Chawathe, et al.: â€œ<a href="http://www.cs.berkeley.edu/~brewer/cs262b/TACC.pdf" target="_blank" rel="noopener noreferrer">Cluster-Based Scalable Network Services<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>16th ACM Symposium on Operating Systems Principles</em> (SOSP), October 1997.</li><li>Philip A. Bernstein, Vassos Hadzilacos, and Nathan Goodman: <a href="http://research.microsoft.com/en-us/people/philbe/ccontrol.aspx" target="_blank" rel="noopener noreferrer"><em>Concurrency Control and Recovery in Database Systems</em><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. Addison-Wesley, 1987. ISBN: 978-0-201-10715-9, available online at <em>research.microsoft.com</em>.</li><li>Alan Fekete, Dimitrios Liarokapis, Elizabeth O&#39;Neil, et al.: â€œ<a href="https://www.cse.iitb.ac.in/infolab/Data/Courses/CS632/2009/Papers/p492-fekete.pdf" target="_blank" rel="noopener noreferrer">Making Snapshot Isolation Serializable<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>ACM Transactions on Database Systems</em>, volume 30, number 2, pages 492â€“528, June 2005. <a href="http://dx.doi.org/10.1145/1071610.1071615" target="_blank" rel="noopener noreferrer">doi:10.1145/1071610.1071615<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Mai Zheng, Joseph Tucek, Feng Qin, and Mark Lillibridge: â€œ<a href="https://www.usenix.org/system/files/conference/fast13/fast13-final80.pdf" target="_blank" rel="noopener noreferrer">Understanding the Robustness of SSDs Under Power Fault<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>11th USENIX Conference on File and Storage Technologies</em> (FAST), February 2013.</li><li>Laurie Denness: â€œ<a href="https://laur.ie/blog/2015/06/ssds-a-gift-and-a-curse/" target="_blank" rel="noopener noreferrer">SSDs: A Gift and a Curse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>laur.ie</em>, June 2, 2015.</li><li>Adam Surak: â€œ<a href="https://blog.algolia.com/when-solid-state-drives-are-not-that-solid/" target="_blank" rel="noopener noreferrer">When Solid State Drives Are Not That Solid<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>blog.algolia.com</em>, June 15, 2015.</li><li>Thanumalayan Sankaranarayana Pillai, Vijay Chidambaram, Ramnatthan Alagappan, et al.: â€œ<a href="http://research.cs.wisc.edu/wind/Publications/alice-osdi14.pdf" target="_blank" rel="noopener noreferrer">All File Systems Are Not Created Equal: On the Complexity of Crafting Crash-Consistent Applications<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>11th USENIX Symposium on Operating Systems Design and Implementation</em> (OSDI), October 2014.</li><li>Chris Siebenmann: â€œ<a href="https://utcc.utoronto.ca/~cks/space/blog/unix/FileSyncProblem" target="_blank" rel="noopener noreferrer">Unix&#39;s File Durability Problem<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>utcc.utoronto.ca</em>, April 14, 2016.</li><li>Lakshmi N. Bairavasundaram, Garth R. Goodson, Bianca Schroeder, et al.: â€œ<a href="http://research.cs.wisc.edu/adsl/Publications/corruption-fast08.pdf" target="_blank" rel="noopener noreferrer">An Analysis of Data Corruption in the Storage Stack<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>6th USENIX Conference on File and Storage Technologies</em> (FAST), February 2008.</li><li>Bianca Schroeder, Raghav Lagisetty, and Arif Merchant: â€œ<a href="https://www.usenix.org/conference/fast16/technical-sessions/presentation/schroeder" target="_blank" rel="noopener noreferrer">Flash Reliability in Production: The Expected and the Unexpected<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>14th USENIX Conference on File and Storage Technologies</em> (FAST), February 2016.</li><li>Don Allison: â€œ<a href="https://blog.korelogic.com/blog/2015/03/24" target="_blank" rel="noopener noreferrer">SSD Storage â€“ Ignorance of Technology Is No Excuse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>blog.korelogic.com</em>, March 24, 2015.</li><li>Dave Scherer: â€œ<a href="http://web.archive.org/web/20150526065247/http://blog.foundationdb.com/those-are-not-transactions-cassandra-2-0" target="_blank" rel="noopener noreferrer">Those Are Not Transactions (Cassandra 2.0)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>blog.foundationdb.com</em>, September 6, 2013.</li><li>Kyle Kingsbury: â€œ<a href="http://aphyr.com/posts/294-call-me-maybe-cassandra/" target="_blank" rel="noopener noreferrer">Call Me Maybe: Cassandra<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>aphyr.com</em>, September 24, 2013.</li><li>â€œ<a href="http://www.aerospike.com/docs/architecture/assets/AerospikeACIDSupport.pdf" target="_blank" rel="noopener noreferrer">ACID Support in Aerospike<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ Aerospike, Inc., June 2014.</li><li>Martin Kleppmann: â€œ<a href="http://martin.kleppmann.com/2014/11/25/hermitage-testing-the-i-in-acid.html" target="_blank" rel="noopener noreferrer">Hermitage: Testing the &#39;I&#39; in ACID<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>martin.kleppmann.com</em>, November 25, 2014.</li><li>Tristan D&#39;Agosta: â€œ<a href="https://bitcointalk.org/index.php?topic=499580" target="_blank" rel="noopener noreferrer">BTC Stolen from Poloniex<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>bitcointalk.org</em>, March 4, 2014.</li><li>bitcointhief2: â€œ<a href="http://www.reddit.com/r/Bitcoin/comments/1wtbiu/how_i_stole_roughly_100_btc_from_an_exchange_and/" target="_blank" rel="noopener noreferrer">How I Stole Roughly 100 BTC from an Exchange and How I Could Have Stolen More!<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>reddit.com</em>, February 2, 2014.</li><li>Sudhir Jorwekar, Alan Fekete, Krithi Ramamritham, and S. Sudarshan: â€œ<a href="http://www.vldb.org/conf/2007/papers/industrial/p1263-jorwekar.pdf" target="_blank" rel="noopener noreferrer">Automating the Detection of Snapshot Isolation Anomalies<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>33rd International Conference on Very Large Data Bases</em> (VLDB), September 2007.</li><li>Michael Melanson: â€œ<a href="http://www.michaelmelanson.net/2014/03/20/transactions/" target="_blank" rel="noopener noreferrer">Transactions: The Limits of Isolation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>michaelmelanson.net</em>, March 20, 2014.</li><li>Hal Berenson, Philip A. Bernstein, Jim N. Gray, et al.: â€œ<a href="http://research.microsoft.com/pubs/69541/tr-95-51.pdf" target="_blank" rel="noopener noreferrer">A Critique of ANSI SQL Isolation Levels<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>ACM International Conference on Management of Data</em> (SIGMOD), May 1995.</li><li>Atul Adya: â€œ<a href="http://pmg.csail.mit.edu/papers/adya-phd.pdf" target="_blank" rel="noopener noreferrer">Weak Consistency: A Generalized Theory and Optimistic Implementations for Distributed Transactions<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ PhD Thesis, Massachusetts Institute of Technology, March 1999.</li><li>Peter Bailis, Aaron Davidson, Alan Fekete, et al.: â€œ<a href="http://arxiv.org/pdf/1302.0309.pdf" target="_blank" rel="noopener noreferrer">Highly Available Transactions: Virtues and Limitations (Extended Version)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>40th International Conference on Very Large Data Bases</em> (VLDB), September 2014.</li><li>Bruce Momjian: â€œ<a href="http://momjian.us/main/presentations/internals.html#mvcc" target="_blank" rel="noopener noreferrer">MVCC Unmasked<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>momjian.us</em>, July 2014.</li><li>Annamalai Gurusami: â€œ<a href="https://blogs.oracle.com/mysqlinnodb/entry/repeatable_read_isolation_level_in" target="_blank" rel="noopener noreferrer">Repeatable Read Isolation Level in InnoDB â€“ How Consistent Read View Works<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>blogs.oracle.com</em>, January 15, 2013.</li><li>Nikita Prokopov: â€œ<a href="http://tonsky.me/blog/unofficial-guide-to-datomic-internals/" target="_blank" rel="noopener noreferrer">Unofficial Guide to Datomic Internals<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>tonsky.me</em>, May 6, 2014.</li><li>Baron Schwartz: â€œ<a href="http://www.xaprb.com/blog/2013/12/28/immutability-mvcc-and-garbage-collection/" target="_blank" rel="noopener noreferrer">Immutability, MVCC, and Garbage Collection<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>xaprb.com</em>, December 28, 2013.</li><li>J. Chris Anderson, Jan Lehnardt, and Noah Slater: <em>CouchDB: The Definitive Guide</em>. O&#39;Reilly Media, 2010. ISBN: 978-0-596-15589-6</li><li>Rikdeb Mukherjee: â€œ<a href="http://mframes.blogspot.co.uk/2013/07/isolation-in-cursor.html" target="_blank" rel="noopener noreferrer">Isolation in DB2 (Repeatable Read, Read Stability, Cursor Stability, Uncommitted Read) with Examples<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>mframes.blogspot.co.uk</em>, July 4, 2013.</li><li>Steve Hilker: â€œ<a href="http://www.toadworld.com/platforms/ibmdb2/w/wiki/6661.cursor-stability-cs.aspx" target="_blank" rel="noopener noreferrer">Cursor Stability (CS) â€“ IBM DB2 Community<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>toadworld.com</em>, March 14, 2013.</li><li>Nate Wiger: â€œ<a href="http://www.nateware.com/an-atomic-rant.html" target="_blank" rel="noopener noreferrer">An Atomic Rant<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>nateware.com</em>, February 18, 2010.</li><li>Joel Jacobson: â€œ<a href="http://blog.joeljacobson.com/riak-2-0-data-types/" target="_blank" rel="noopener noreferrer">Riak 2.0: Data Types<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>blog.joeljacobson.com</em>, March 23, 2014.</li><li>Michael J. Cahill, Uwe RÃ¶hm, and Alan Fekete: â€œ<a href="http://www.cs.nyu.edu/courses/fall12/CSCI-GA.2434-001/p729-cahill.pdf" target="_blank" rel="noopener noreferrer">Serializable Isolation for Snapshot Databases<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>ACM International Conference on Management of Data</em> (SIGMOD), June 2008. <a href="http://dx.doi.org/10.1145/1376616.1376690" target="_blank" rel="noopener noreferrer">doi:10.1145/1376616.1376690<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Dan R. K. Ports and Kevin Grittner: â€œ<a href="http://drkp.net/papers/ssi-vldb12.pdf" target="_blank" rel="noopener noreferrer">Serializable Snapshot Isolation in PostgreSQL<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>38th International Conference on Very Large Databases</em> (VLDB), August 2012.</li><li>Tony Andrews: â€œ<a href="http://tonyandrews.blogspot.co.uk/2004/10/enforcing-complex-constraints-in.html" target="_blank" rel="noopener noreferrer">Enforcing Complex Constraints in Oracle<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>tonyandrews.blogspot.co.uk</em>, October 15, 2004.</li><li>Douglas B. Terry, Marvin M. Theimer, Karin Petersen, et al.: â€œ<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.141.7889&amp;rep=rep1&amp;type=pdf" target="_blank" rel="noopener noreferrer">Managing Update Conflicts in Bayou, a Weakly Connected Replicated Storage System<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>15th ACM Symposium on Operating Systems Principles</em> (SOSP), December 1995. <a href="http://dx.doi.org/10.1145/224056.224070" target="_blank" rel="noopener noreferrer">doi:10.1145/224056.224070<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Gary Fredericks: â€œ<a href="https://github.com/gfredericks/pg-serializability-bug" target="_blank" rel="noopener noreferrer">Postgres Serializability Bug<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>github.com</em>, September 2015.</li><li>Michael Stonebraker, Samuel Madden, Daniel J. Abadi, et al.: â€œ<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.137.3697&amp;rep=rep1&amp;type=pdf" target="_blank" rel="noopener noreferrer">The End of an Architectural Era (Itâ€™s Time for a Complete Rewrite)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>33rd International Conference on Very Large Data Bases</em> (VLDB), September 2007.</li><li>John Hugg: â€œ<a href="https://www.youtube.com/watch?v=hD5M4a1UVz8" target="_blank" rel="noopener noreferrer">H-Store/VoltDB Architecture vs. CEP Systems and Newer Streaming Architectures<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>Data @Scale Boston</em>, November 2014.</li><li>Robert Kallman, Hideaki Kimura, Jonathan Natkins, et al.: â€œ<a href="http://www.vldb.org/pvldb/1/1454211.pdf" target="_blank" rel="noopener noreferrer">H-Store: A High-Performance, Distributed Main Memory Transaction Processing System<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>Proceedings of the VLDB Endowment</em>, volume 1, number 2, pages 1496â€“1499, August 2008.</li><li>Rich Hickey: â€œ<a href="http://www.infoq.com/articles/Architecture-Datomic" target="_blank" rel="noopener noreferrer">The Architecture of Datomic<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>infoq.com</em>, November 2, 2012.</li><li>John Hugg: â€œ<a href="http://voltdb.com/blog/debunking-myths-about-voltdb-memory-database" target="_blank" rel="noopener noreferrer">Debunking Myths About the VoltDB In-Memory Database<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>voltdb.com</em>, May 12, 2014.</li><li>Joseph M. Hellerstein, Michael Stonebraker, and James Hamilton: â€œ<a href="http://db.cs.berkeley.edu/papers/fntdb07-architecture.pdf" target="_blank" rel="noopener noreferrer">Architecture of a Database System<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>Foundations and Trends in Databases</em>, volume 1, number 2, pages 141â€“259, November 2007. <a href="http://dx.doi.org/10.1561/1900000002" target="_blank" rel="noopener noreferrer">doi:10.1561/1900000002<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Michael J. Cahill: â€œ<a href="http://cahill.net.au/wp-content/uploads/2010/02/cahill-thesis.pdf" target="_blank" rel="noopener noreferrer">Serializable Isolation for Snapshot Databases<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ PhD Thesis, University of Sydney, July 2009.</li><li>D. Z. Badal: â€œ<a href="http://ieeexplore.ieee.org/abstract/document/762563/" target="_blank" rel="noopener noreferrer">Correctness of Concurrency Control and Implications in Distributed Databases<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ at <em>3rd International IEEE Computer Software and Applications Conference</em> (COMPSAC), November 1979.</li><li>Rakesh Agrawal, Michael J. Carey, and Miron Livny: â€œ<a href="http://www.eecs.berkeley.edu/~brewer/cs262/ConcControl.pdf" target="_blank" rel="noopener noreferrer">Concurrency Control Performance Modeling: Alternatives and Implications<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>ACM Transactions on Database Systems</em> (TODS), volume 12, number 4, pages 609â€“654, December 1987. <a href="http://dx.doi.org/10.1145/32204.32220" target="_blank" rel="noopener noreferrer">doi:10.1145/32204.32220<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Dave Rosenthal: â€œ<a href="http://web.archive.org/web/20150427041746/http://blog.foundationdb.com/databases-at-14.4mhz" target="_blank" rel="noopener noreferrer">Databases at 14.4MHz<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,â€ <em>blog.foundationdb.com</em>, December 10, 2014.</li></ol><hr><table><thead><tr><th>ä¸Šä¸€ç« </th><th>ç›®å½•</th><th>ä¸‹ä¸€ç« </th></tr></thead><tbody><tr><td><a href="/book/ddia/ch6.html" class="">ç¬¬å…­ç« ï¼šåˆ†åŒº</a></td><td><a href="/book/ddia/DDIA_README.html" class="">è®¾è®¡æ•°æ®å¯†é›†å‹åº”ç”¨</a></td><td><a href="/book/ddia/ch8.html" class="">ç¬¬å…«ç« ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„éº»çƒ¦</a></td></tr></tbody></table><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p>ä¹”Â·æµ·å‹’æ–¯å¦ï¼ˆJoe Hellersteinï¼‰æŒ‡å‡ºï¼Œåœ¨è®ºHÃ¤rderä¸Reuterçš„è®ºæ–‡ä¸­ï¼Œâ€œACIDä¸­çš„Câ€æ˜¯è¢«â€œæ‰”è¿›å»å‡‘ç¼©å†™å•è¯çš„â€ã€7ã€‘ï¼Œè€Œä¸”é‚£æ—¶å€™å¤§å®¶éƒ½ä¸æ€ä¹ˆåœ¨ä¹ä¸€è‡´æ€§ã€‚ <a href="#footnote-ref1" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote2" class="footnote-item"><p>å¯ä»¥è¯´é‚®ä»¶åº”ç”¨ä¸­çš„é”™è¯¯è®¡æ•°å™¨å¹¶ä¸æ˜¯ä»€ä¹ˆç‰¹åˆ«é‡è¦çš„é—®é¢˜ã€‚ä½†æ¢ç§æ–¹å¼æ¥çœ‹ï¼Œä½ å¯ä»¥æŠŠæœªè¯»è®¡æ•°å™¨æ¢æˆå®¢æˆ·è´¦æˆ·ä½™é¢ï¼ŒæŠŠé‚®ä»¶æ”¶å‘çœ‹æˆæ”¯ä»˜äº¤æ˜“ã€‚ <a href="#footnote-ref2" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote3" class="footnote-item"><p>è¿™å¹¶ä¸å®Œç¾ã€‚å¦‚æœTCPè¿æ¥ä¸­æ–­ï¼Œåˆ™äº‹åŠ¡å¿…é¡»ä¸­æ­¢ã€‚å¦‚æœä¸­æ–­å‘ç”Ÿåœ¨å®¢æˆ·ç«¯è¯·æ±‚æäº¤ä¹‹åï¼Œä½†åœ¨æœåŠ¡å™¨ç¡®è®¤æäº¤å‘ç”Ÿä¹‹å‰ï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“äº‹åŠ¡æ˜¯å¦å·²æäº¤ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäº‹åŠ¡ç®¡ç†å™¨å¯ä»¥é€šè¿‡ä¸€ä¸ªå”¯ä¸€äº‹åŠ¡æ ‡è¯†ç¬¦æ¥å¯¹æ“ä½œè¿›è¡Œåˆ†ç»„ï¼Œè¿™ä¸ªæ ‡è¯†ç¬¦å¹¶æœªç»‘å®šåˆ°ç‰¹å®šTCPè¿æ¥ã€‚åç»­å†â€œ<a href="/book/ddia/ch12.html#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%AB%AF%E5%88%B0%E7%AB%AF%E5%8E%9F%E5%88%99" class="">æ•°æ®åº“çš„ç«¯åˆ°ç«¯åŸåˆ™</a>â€ä¸€èŠ‚å°†å›åˆ°è¿™ä¸ªä¸»é¢˜ã€‚ <a href="#footnote-ref3" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote4" class="footnote-item"><p>ä¸¥æ ¼åœ°è¯´ï¼Œ<strong>åŸå­è‡ªå¢ï¼ˆatomic incrementï¼‰</strong> è¿™ä¸ªæœ¯è¯­åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹çš„æ„ä¹‰ä¸Šä½¿ç”¨äº†åŸå­è¿™ä¸ªè¯ã€‚ åœ¨ACIDçš„æƒ…å†µä¸‹ï¼Œå®ƒå®é™…ä¸Šåº”è¯¥è¢«ç§°ä¸º <strong>éš”ç¦»çš„ï¼ˆisolatedï¼‰</strong> çš„æˆ–<strong>å¯ä¸²è¡Œçš„ï¼ˆserializableï¼‰</strong> çš„å¢é‡ã€‚ ä½†è¿™å°±å¤ªå¹æ¯›æ±‚ç–µäº†ã€‚ <a href="#footnote-ref4" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote5" class="footnote-item"><p>è½¶äº‹ï¼šå¶ç„¶å‡ºç°çš„ç¬æ—¶é”™è¯¯æœ‰æ—¶ç§°ä¸º<em><strong>Heisenbug</strong></em>ï¼Œè€Œç¡®å®šæ€§çš„é—®é¢˜å¯¹åº”åœ°ç§°ä¸º<em><strong>Bohrbugs</strong></em> <a href="#footnote-ref5" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote6" class="footnote-item"><p>æŸäº›æ•°æ®åº“æ”¯æŒç”šè‡³æ›´å¼±çš„éš”ç¦»çº§åˆ«ï¼Œç§°ä¸º<strong>è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰</strong>ã€‚å®ƒå¯ä»¥é˜²æ­¢è„å†™ï¼Œä½†ä¸é˜²æ­¢è„è¯»ã€‚ <a href="#footnote-ref6" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote7" class="footnote-item"><p>åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œå”¯ä¸€åœ¨è¯»å·²æäº¤éš”ç¦»çº§åˆ«ä½¿ç”¨è¯»é”çš„ä¸»æµæ•°æ®åº“æ˜¯ä½¿ç”¨<code>read_committed_snapshot = off</code>é…ç½®çš„IBM DB2å’ŒMicrosoft SQL Server [23,36]ã€‚ <a href="#footnote-ref7" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote8" class="footnote-item"><p>äº‹å®ä¸Šï¼Œäº‹åŠ¡IDæ˜¯32ä½æ•´æ•°ï¼Œæ‰€ä»¥å¤§çº¦ä¼šåœ¨40äº¿æ¬¡äº‹åŠ¡ä¹‹åæº¢å‡ºã€‚ PostgreSQLçš„Vacuumè¿‡ç¨‹ä¼šæ¸…ç†è€æ—§çš„äº‹åŠ¡IDï¼Œç¡®ä¿äº‹åŠ¡IDæº¢å‡ºï¼ˆå›å·ï¼‰ä¸ä¼šå½±å“åˆ°æ•°æ®ã€‚ <a href="#footnote-ref8" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote9" class="footnote-item"><p>åœ¨PostgreSQLä¸­ï¼Œ<code>created_by</code> çš„å®é™…åç§°ä¸º<code>xmin</code>ï¼Œ<code>deleted_by</code> çš„å®é™…åç§°ä¸º<code>xmax</code> <a href="#footnote-ref9" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote10" class="footnote-item"><p>å°†æ–‡æœ¬æ–‡æ¡£çš„ç¼–è¾‘è¡¨ç¤ºä¸ºåŸå­çš„å˜åŒ–æµæ˜¯å¯èƒ½çš„ï¼Œå°½ç®¡ç›¸å½“å¤æ‚ã€‚è¯·å‚é˜…â€œ<a href="/book/ddia/ch5.html#%E8%87%AA%E5%8A%A8%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3" class="">è‡ªåŠ¨å†²çªè§£å†³</a>â€ã€‚ <a href="#footnote-ref10" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote11" class="footnote-item"><p>åœ¨PostgreSQLä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨èŒƒå›´ç±»å‹ä¼˜é›…åœ°æ‰§è¡Œæ­¤æ“ä½œï¼Œä½†åœ¨å…¶ä»–æ•°æ®åº“ä¸­å¹¶æœªå¾—åˆ°å¹¿æ³›æ”¯æŒã€‚ <a href="#footnote-ref11" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote12" class="footnote-item"><p>å¦‚æœäº‹åŠ¡éœ€è¦è®¿é—®ä¸åœ¨å†…å­˜ä¸­çš„æ•°æ®ï¼Œæœ€å¥½çš„è§£å†³æ–¹æ¡ˆå¯èƒ½æ˜¯ä¸­æ­¢äº‹åŠ¡ï¼Œå¼‚æ­¥åœ°å°†æ•°æ®æå–åˆ°å†…å­˜ä¸­ï¼ŒåŒæ—¶ç»§ç»­å¤„ç†å…¶ä»–äº‹åŠ¡ï¼Œç„¶ååœ¨æ•°æ®åŠ è½½å®Œæ¯•æ—¶é‡æ–°å¯åŠ¨äº‹åŠ¡ã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä¸º<strong>åç¼“å­˜ï¼ˆanti-cachingï¼‰</strong>ï¼Œæ­£å¦‚å‰é¢åœ¨â€œ<a href="/book/ddia/ch3.html#%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%AD%98%E5%82%A8%E4%B8%80%E5%88%87" class="">åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€åˆ‡</a>â€ä¸­æ‰€è¿°ã€‚ <a href="#footnote-ref12" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote13" class="footnote-item"><p>æœ‰æ—¶ä¹Ÿç§°ä¸º<strong>ä¸¥æ ¼ä¸¤é˜¶æ®µé”å®šï¼ˆSS2PL, strong strict two-phase lockingï¼‰</strong>ï¼Œä»¥ä¾¿å’Œå…¶ä»–2PLå˜ä½“åŒºåˆ†ã€‚ <a href="#footnote-ref13" class="footnote-backref">â†©ï¸</a></p></li></ol></section></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/ET-yzk/ET-yzk.github.io/edit/v2/docs/book/ddia/ch7.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: yzket@foxmail.com">zkye</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="ç¬¬å…­ç« ï¼šåˆ†åŒº" class="vp-link nav-link prev nav-link prev" href="/book/ddia/ch6.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ç¬¬å…­ç« ï¼šåˆ†åŒº</div></a><a aria-label="ç¬¬å…«ç« ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„éº»çƒ¦" class="vp-link nav-link next nav-link next" href="/book/ddia/ch8.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">ç¬¬å…«ç« ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„éº»çƒ¦<!----></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±(å¯é€‰)</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€(å¯é€‰)</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.8</div></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">At four o'clock in the morning, I saw Begonia flowers awake. â€</div><div class="vp-copyright">Copyright Â© 2021-present zkye | <a href="/LICENSE">MIT License</a></div></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-HHaGRXeI.js" defer></script>
  </body>
</html>
